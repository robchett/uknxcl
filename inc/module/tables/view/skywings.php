<?phpclass skywings_view extends view {    public function get_view() {        $html = '';        $league_table = new league_table();        $league_table->min_score = 10;        $league_table->set_year(date('Y'));        $league_table->get_flights();        $league_table->class = 'pilot_official';        foreach ($league_table->flights as $t) {            if ($league_table->split_classes && $t->class == 5) {                $t->ClassID += 8000;            }            if (isset ($array [$t->ClassID])) {                $array [$t->ClassID]->add_flight($t);            } else {                /** @var $class pilot */                $class = new $league_table->class();                $class->output_function = 'csv';                $class->set_from_flight($t, $league_table->max_flights, $league_table->split_classes);                $array[$t->ClassID] = $class;            }        }        if (isset ($array)) {            usort($array, "cmp");            //if(1)ShowTop4W($WHERE);            $class1 = 1;            $class5 = 1;            $html .= '<pre>Pos ,Name ,Glider ,Club ,Best ,Second ,Third ,Forth ,Fifth ,Sixth ,Total' . "\n";            for ($j = 0; $j < count($array); $j++) {                if ($array [$j]->Class == 1) {                    $html .= $array [$j]->output($class1, 0);                    $class1++;                } else {                    $html .= $array [$j]->output($class5, 0);                    $class5++;                }            }            $html .= '</pre>' . "\n";            return $html;        }    }}