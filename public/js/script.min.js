function initMlink(){$("select[multiple=multiple]").each(function(){var e;$(this).siblings("select").length||(e=$(this).attr("name"),$(this).hide(),$(this).after('<select id="'+e+'_select" class="'+$(this).attr("class")+'" onchange="addMlink(\''+e+"',this.value)\"><option value='-1'>Select Another</option></select><ul id=\""+e+'_selected" class="mlink_selected_wrapper"></ul>'),$(this).find("option:not(optgroup > option) ,optgroup").each(function(){$(this).clone().appendTo($("#"+e+"_select")),$(this).is(":selected")&&addMlink(e,$(this).val())}))})}function addMlink(e,t){var n,i;-1!=t&&0!=t&&(i=(n=$("#"+e+"_select option[value="+t+"]")).html(),n.attr("disabled","disabled"),$('select[name="'+e+'"] option[value='+t+"]").attr("selected","selected"),$("#"+e+"_select").val(-1),$("#"+e+"_selected").append('<li data-value="'+t+'">'+i+"<a onclick=\"removeMlink('"+e+"','"+t+"')\">Remove</a></li>"))}function removeMlink(e,t){-1!=t&&0!=t&&($("#"+e+"_select option[value="+t+"]").removeAttr("disabled"),$('select[name="'+e+'"] option[value='+t+"]").removeAttr("selected"),$('select[name="'+e+'"]').trigger("change"),$("#"+e+"_selected [data-value="+t+"]").remove())}function handle_json_response(e){$(".loading_shroud").remove(),e.pre_inject.each(function(e){switch(""!=e.over&&$(e.over).remove(),e.pos){case"append":$(e.id).append(e.html);break;case"prepend":$(e.id).prepend(e.html);break;case"before":$(e.id).before(e.html);break;case"after":$(e.id).after(e.html)}}),e.update.each(function(e){$(e.id).html(e.html)}),e.inject.each(function(e){switch(""!=e.over&&$(e.over).remove(),e.pos){case"append":$(e.id).append(e.html);break;case"prepend":$(e.id).prepend(e.html);break;case"before":$(e.id).before(e.html);break;case"after":$(e.id).after(e.html)}}),void 0!==e.push_state&&($.fn.ajax_factory.states[e.push_state.url]=e.push_state.data,window.history.pushState(e.push_state,e.push_state.title,e.push_state.url)),$.fn.ajax_factory.defaults.complete&&$.fn.ajax_factory.defaults.complete.each(function(e,t,n){"function"==typeof e?e(n):window[e](n)},e)}function add_loading_shroud(e){if(void 0===e)return!1;var t=document.createElement("div");return t.className="loading_shroud",t.style.width=$(e).outerWidth()+"px",t.style.height=$(e).outerHeight()+"px",t.style.left=0,t.style.top=0,"absolute"==$(e).css("position")&&"relative"==$(e).css("position")||$(e).css({position:"relative"}),$(e).prepend(t),t}!function(f,x){function t(e,t){return t.toUpperCase()}function n(){m.removeEventListener("DOMContentLoaded",n,!1),f.removeEventListener("load",n,!1),ye.ready()}var i,o,g=typeof x,e=f.location,m=f.document,r=m.documentElement,a=f.jQuery,s=f.$,l={},c=[],d="2.0.3",v=c.concat,h=c.push,u=c.slice,p=c.indexOf,y=l.toString,b=l.hasOwnProperty,w=d.trim,ye=function(e,t){return new ye.fn.init(e,t,i)},_=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,k=/\S+/g,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,j=/^-ms-/,$=/-([\da-z])/gi;function M(e){var t=e.length,n=ye.type(e);return!ye.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&0<t&&t-1 in e)))}ye.fn=ye.prototype={jquery:d,constructor:ye,init:function(e,t,n){if(!e)return this;if("string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):ye.isFunction(e)?n.ready(e):(e.selector!==x&&(this.selector=e.selector,this.context=e.context),ye.makeArray(e,this));if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:C.exec(e))||!i[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(i[1]){if(t=t instanceof ye?t[0]:t,ye.merge(this,ye.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),T.test(i[1])&&ye.isPlainObject(t))for(var i in t)ye.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=m.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=m,this.selector=e,this},selector:"",length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){e=ye.merge(this.constructor(),e);return e.prevObject=this,e.context=this.context,e},each:function(e,t){return ye.each(this,e,t)},ready:function(e){return ye.ready.promise().done(e),this},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},map:function(n){return this.pushStack(ye.map(this,function(e,t){return n.call(e,t,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},ye.fn.init.prototype=ye.fn,ye.extend=ye.fn.extend=function(){var e,t,n,i,o,r=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[1]||{},a=2),"object"==typeof r||ye.isFunction(r)||(r={}),s===a&&(r=this,--a);a<s;a++)if(null!=(e=arguments[a]))for(t in e)o=r[t],n=e[t],r!==n&&(l&&n&&(ye.isPlainObject(n)||(i=ye.isArray(n)))?(o=i?(i=!1,o&&ye.isArray(o)?o:[]):o&&ye.isPlainObject(o)?o:{},r[t]=ye.extend(l,o,n)):n!==x&&(r[t]=n));return r},ye.extend({expando:"jQuery"+(d+Math.random()).replace(/\D/g,""),noConflict:function(e){return f.$===ye&&(f.$=s),e&&f.jQuery===ye&&(f.jQuery=a),ye},isReady:!1,readyWait:1,holdReady:function(e){e?ye.readyWait++:ye.ready(!0)},ready:function(e){(!0===e?--ye.readyWait:ye.isReady)||((ye.isReady=!0)!==e&&0<--ye.readyWait||(o.resolveWith(m,[ye]),ye.fn.trigger&&ye(m).trigger("ready").off("ready")))},isFunction:function(e){return"function"===ye.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[y.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==ye.type(e)||e.nodeType||ye.isWindow(e))return!1;try{if(e.constructor&&!b.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||m;var i=T.exec(e),n=!n&&[];return i?[t.createElement(i[1])]:(i=ye.buildFragment([e],t,n),n&&ye(n).remove(),ye.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=x}return t&&!t.getElementsByTagName("parsererror").length||ye.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){var t,n=eval;(e=ye.trim(e))&&(1===e.indexOf("use strict")?((t=m.createElement("script")).text=e,m.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(j,"ms-").replace($,t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i,o=0,r=e.length,a=M(e);if(n){if(a)for(;o<r&&!1!==(i=t.apply(e[o],n));o++);else for(o in e)if(i=t.apply(e[o],n),!1===i)break}else if(a)for(;o<r&&!1!==(i=t.call(e[o],o,e[o]));o++);else for(o in e)if(i=t.call(e[o],o,e[o]),!1===i)break;return e},trim:function(e){return null==e?"":w.call(e)},makeArray:function(e,t){t=t||[];return null!=e&&(M(Object(e))?ye.merge(t,"string"==typeof e?[e]:e):h.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:p.call(t,e,n)},merge:function(e,t){var n=t.length,i=e.length,o=0;if("number"==typeof n)for(;o<n;o++)e[i++]=t[o];else for(;t[o]!==x;)e[i++]=t[o++];return e.length=i,e},grep:function(e,t,n){var i=[],o=0,r=e.length;for(n=!!n;o<r;o++)n!==!!t(e[o],o)&&i.push(e[o]);return i},map:function(e,t,n){var i,o=0,r=e.length,a=[];if(M(e))for(;o<r;o++)null!=(i=t(e[o],o,n))&&(a[a.length]=i);else for(o in e)i=t(e[o],o,n),null!=i&&(a[a.length]=i);return v.apply([],a)},guid:1,proxy:function(e,t){var n,i;return"string"==typeof t&&(i=e[t],t=e,e=i),ye.isFunction(e)?(n=u.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(u.call(arguments)))}).guid=e.guid=e.guid||ye.guid++,i):x},access:function(e,t,n,i,o,r,a){var s=0,l=e.length,c=null==n;if("object"===ye.type(n))for(s in o=!0,n)ye.access(e,t,s,n[s],!0,r,a);else if(i!==x&&(o=!0,ye.isFunction(i)||(a=!0),t=c?a?(t.call(e,i),null):(c=t,function(e,t,n){return c.call(ye(e),n)}):t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return o?e:c?t.call(e):l?t(e[0],n):r},now:Date.now,swap:function(e,t,n,i){var o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,i||[]),t)e.style[o]=r[o];return i}}),ye.ready.promise=function(e){return o||(o=ye.Deferred(),"complete"===m.readyState?setTimeout(ye.ready):(m.addEventListener("DOMContentLoaded",n,!1),f.addEventListener("load",n,!1))),o.promise(e)},ye.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),i=ye(m),function(n,i){var e,h,x,_,r,t,u,k,c,p,C,o,f,g,a,s,m,b="sizzle"+-new Date,v=n.document,T=0,y=0,l=oe(),d=oe(),w=oe(),j=!1,$=function(e,t){return e===t&&(j=!0),0},M=typeof i,L={}.hasOwnProperty,S=[],N=S.pop,E=S.push,P=S.push,D=S.slice,A=S.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",H=I.replace("w","w#"),R="\\["+F+"*("+I+")"+F+"*(?:([*^$|!~]?=)"+F+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+H+")|)|)"+F+"*\\]",B=":("+I+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+R.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),q=RegExp("^"+F+"*,"+F+"*"),X=RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),z=RegExp(F+"*[+~]"),G=RegExp("="+F+"*([^\\]'\"]*)"+F+"*\\]","g"),V=RegExp(B),K=RegExp("^"+H+"$"),Y={ID:RegExp("^#("+I+")"),CLASS:RegExp("^\\.("+I+")"),TAG:RegExp("^("+I.replace("w","w*")+")"),ATTR:RegExp("^"+R),PSEUDO:RegExp("^"+B),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:RegExp("^(?:"+O+")$","i"),needsContext:RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},U=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,ee=/'|\\/g,te=RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(65536+i):String.fromCharCode(55296|i>>10,56320|1023&i)};try{P.apply(S=D.call(v.childNodes),v.childNodes),S[v.childNodes.length].nodeType}catch(e){P={apply:S.length?function(e,t){E.apply(e,D.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ie(e,t,n,i){var o,r,a,s,l,c,d;if((t?t.ownerDocument||t:v)!==C&&p(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=(t=t||C).nodeType)&&9!==o)return[];if(f&&!i){if(c=Q.exec(e))if(d=c[1]){if(9===o){if(!(s=t.getElementById(d))||!s.parentNode)return n;if(s.id===d)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(d))&&m(t,s)&&s.id===d)return n.push(s),n}else{if(c[2])return P.apply(n,t.getElementsByTagName(e)),n;if((d=c[3])&&h.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(d)),n}if(h.qsa&&(!g||!g.test(e))){if(l=s=b,c=t,d=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(a=he(e),(s=t.getAttribute("id"))?l=s.replace(ee,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",r=a.length;r--;)a[r]=l+ue(a[r]);c=z.test(e)&&t.parentNode||t,d=a.join(",")}if(d)try{return P.apply(n,c.querySelectorAll(d)),n}catch(e){}finally{s||t.removeAttribute("id")}}}return function(e,t,n,i){var o,r,a,s,l,c=he(e);if(!i&&1===c.length){if(2<(r=c[0]=c[0].slice(0)).length&&"ID"===(a=r[0]).type&&h.getById&&9===t.nodeType&&f&&_.relative[r[1].type]){if(!(t=(_.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;e=e.slice(r.shift().value.length)}for(o=Y.needsContext.test(e)?0:r.length;o--&&(a=r[o],!_.relative[s=a.type]);)if((l=_.find[s])&&(i=l(a.matches[0].replace(te,ne),z.test(r[0].type)&&t.parentNode||t))){if(r.splice(o,1),!(e=i.length&&ue(r)))return P.apply(n,i),n;break}}return u(e,c)(i,t,!f,n,z.test(e)),n}(e.replace(W,"$1"),t,n,i)}function oe(){var n=[];function i(e,t){return n.push(e+=" ")>_.cacheLength&&delete i[n.shift()],i[e]=t}return i}function re(e){return e[b]=!0,e}function ae(e){var t=C.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function se(e,t){for(var n=e.split("|"),i=e.length;i--;)_.attrHandle[n[i]]=t}function le(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(a){return re(function(r){return r=+r,re(function(e,t){for(var n,i=a([],e.length,r),o=i.length;o--;)e[n=i[o]]&&(e[n]=!(t[n]=e[n]))})})}for(e in t=ie.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},h=ie.support={},p=ie.setDocument=function(e){var l=e?e.ownerDocument||e:v,e=l.defaultView;return l!==C&&9===l.nodeType&&l.documentElement?(o=(C=l).documentElement,f=!t(l),e&&e.attachEvent&&e!==e.top&&e.attachEvent("onbeforeunload",function(){p()}),h.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=ae(function(e){return e.appendChild(l.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=ae(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),h.getById=ae(function(e){return o.appendChild(e).id=b,!l.getElementsByName||!l.getElementsByName(b).length}),h.getById?(_.find.ID=function(e,t){if(typeof t.getElementById!=M&&f){e=t.getElementById(e);return e&&e.parentNode?[e]:[]}},_.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(te,ne);return function(e){e=typeof e.getAttributeNode!=M&&e.getAttributeNode("id");return e&&e.value===t}}),_.find.TAG=h.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!=M?t.getElementsByTagName(e):i}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"!==e)return r;for(;n=r[o++];)1===n.nodeType&&i.push(n);return i},_.find.CLASS=h.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!=M&&f?t.getElementsByClassName(e):i},a=[],g=[],(h.qsa=U.test(l.querySelectorAll))&&(ae(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+O+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ae(function(e){var t=l.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(h.matchesSelector=U.test(s=o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ae(function(e){h.disconnectedMatch=s.call(e,"div"),s.call(e,"[s!='']:x"),a.push("!=",B)}),g=g.length&&RegExp(g.join("|")),a=a.length&&RegExp(a.join("|")),m=U.test(o.contains)||o.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=o.compareDocumentPosition?function(e,t){if(e===t)return j=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||!h.sortDetached&&t.compareDocumentPosition(e)===n?e===l||m(v,e)?-1:t===l||m(v,t)?1:c?A.call(c,e)-A.call(c,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,o=e.parentNode,r=t.parentNode,a=[e],s=[t];if(e===t)return j=!0,0;if(!o||!r)return e===l?-1:t===l?1:o?-1:r?1:c?A.call(c,e)-A.call(c,t):0;if(o===r)return le(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?le(a[i],s[i]):a[i]===v?-1:s[i]===v?1:0},l):C},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&p(e),t=t.replace(G,"='$1']"),!(!h.matchesSelector||!f||a&&a.test(t)||g&&g.test(t)))try{var n=s.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<ie(t,C,null,[e]).length},ie.contains=function(e,t){return(e.ownerDocument||e)!==C&&p(e),m(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==C&&p(e);var n=_.attrHandle[t.toLowerCase()],n=n&&L.call(_.attrHandle,t.toLowerCase())?n(e,t,!f):i;return n===i?h.attributes||!f?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null:n},ie.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,n=[],i=0,o=0;if(j=!h.detectDuplicates,c=!h.sortStable&&e.slice(0),e.sort($),j){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return e},r=ie.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i];i++)n+=r(t);return n},(_=ie.selectors={cacheLength:50,createPseudo:re,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]&&e[4]!==i?e[2]=e[4]:n&&V.test(n)&&(t=he(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=l[e+" "];return t||(t=RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&l(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!=M&&e.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(e){e=ie.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===i:"!="===n?e!==i:"^="===n?i&&0===e.indexOf(i):"*="===n?i&&-1<e.indexOf(i):"$="===n?i&&e.slice(-i.length)===i:"~="===n?-1<(" "+e+" ").indexOf(i):"|="===n&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(p,e,t,f,g){var m="nth"!==p.slice(0,3),v="last"!==p.slice(-4),y="of-type"===e;return 1===f&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,o,r,a,s,l,c=m!=v?"nextSibling":"previousSibling",d=e.parentNode,h=y&&e.nodeName.toLowerCase(),u=!n&&!y;if(d){if(m){for(;c;){for(r=e;r=r[c];)if(y?r.nodeName.toLowerCase()===h:1===r.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?d.firstChild:d.lastChild],v&&u){for(s=(i=(o=d[b]||(d[b]={}))[p]||[])[0]===T&&i[1],a=i[0]===T&&i[2],r=s&&d.childNodes[s];r=++s&&r&&r[c]||(a=s=0)||l.pop();)if(1===r.nodeType&&++a&&r===e){o[p]=[T,s,a];break}}else if(u&&(i=(e[b]||(e[b]={}))[p])&&i[0]===T)a=i[1];else for(;(r=++s&&r&&r[c]||(a=s=0)||l.pop())&&((y?r.nodeName.toLowerCase()!==h:1!==r.nodeType)||!++a||(u&&((r[b]||(r[b]={}))[p]=[T,a]),r!==e)););return(a-=g)===f||0==a%f&&0<=a/f}}},PSEUDO:function(e,r){var t,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return a[b]?a(r):1<a.length?(t=[e,e,"",r],_.setFilters.hasOwnProperty(e.toLowerCase())?re(function(e,t){for(var n,i=a(e,r),o=i.length;o--;)e[n=A.call(e,i[o])]=!(t[n]=i[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:re(function(e){var i=[],o=[],s=u(e.replace(W,"$1"));return s[b]?re(function(e,t,n,i){for(var o,r=s(e,null,i,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return i[0]=e,s(i,null,n,o),!o.pop()}}),has:re(function(t){return function(e){return 0<ie(t,e).length}}),contains:re(function(t){return function(e){return-1<(e.textContent||e.innerText||r(e)).indexOf(t)}}),lang:re(function(n){return K.test(n||"")||ie.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if("@"<e.nodeName||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ce(function(){return[0]}),last:ce(function(e,t){return[t-1]}),eq:ce(function(e,t,n){return[n<0?n+t:n]}),even:ce(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ce(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ce(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:ce(function(e,t,n){for(var i=n<0?n+t:n;t>++i;)e.push(i);return e})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})_.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function de(){}function he(e,t){var n,i,o,r,a,s,l,c=d[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=_.preFilter;a;){for(r in n&&!(i=q.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(o=[])),n=!1,(i=X.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(W," ")}),a=a.slice(n.length)),_.filter)!(i=Y[r].exec(a))||l[r]&&!(i=l[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ie.error(e):d(e,s).slice(0)}function ue(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function pe(s,e,t){var l=e.dir,c=t&&"parentNode"===l,d=y++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||c)return s(e,t,n)}:function(e,t,n){var i,o,r,a=T+" "+d;if(n){for(;e=e[l];)if((1===e.nodeType||c)&&s(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||c)if((o=(r=e[b]||(e[b]={}))[l])&&o[0]===a){if(!0===(i=o[1])||i===x)return!0===i}else if((o=r[l]=[a])[1]=s(e,t,n)||x,!0===o[1])return!0}}function fe(o){return 1<o.length?function(e,t,n){for(var i=o.length;i--;)if(!o[i](e,t,n))return!1;return!0}:o[0]}function ge(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,c=null!=t;s<l;s++)!(r=e[s])||n&&!n(r,i,o)||(a.push(r),c&&t.push(s));return a}function me(p,f,g,m,v,e){return m&&!m[b]&&(m=me(m)),v&&!v[b]&&(v=me(v,e)),re(function(e,t,n,i){var o,r,a,s=[],l=[],c=t.length,d=e||function(e,t,n){for(var i=0,o=t.length;i<o;i++)ie(e,t[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),h=!p||!e&&f?d:ge(d,s,p,n,i),u=g?v||(e?p:c||m)?[]:t:h;if(g&&g(h,u,n,i),m)for(o=ge(u,l),m(o,[],n,i),r=o.length;r--;)(a=o[r])&&(u[l[r]]=!(h[l[r]]=a));if(e){if(v||p){if(v){for(o=[],r=u.length;r--;)(a=u[r])&&o.push(h[r]=a);v(null,u=[],o,i)}for(r=u.length;r--;)(a=u[r])&&-1<(o=v?A.call(e,a):s[r])&&(e[o]=!(t[o]=a))}}else u=ge(u===t?u.splice(c,u.length):u),v?v(null,t,u,i):P.apply(t,u)})}function ve(m,v){function e(e,t,n,i,o){var r,a,s,l=[],c=0,d="0",h=e&&[],u=null!=o,p=k,f=e||w&&_.find.TAG("*",o&&t.parentNode||t),g=T+=null==p?1:Math.random()||.1;for(u&&(k=t!==C&&t,x=y);null!=(r=f[d]);d++){if(w&&r){for(a=0;s=m[a++];)if(s(r,t,n)){i.push(r);break}u&&(T=g,x=++y)}b&&((r=!s&&r)&&c--,e&&h.push(r))}if(c+=d,b&&d!==c){for(a=0;s=v[a++];)s(h,l,t,n);if(e){if(0<c)for(;d--;)h[d]||l[d]||(l[d]=N.call(i));l=ge(l)}P.apply(i,l),u&&!e&&0<l.length&&1<c+v.length&&ie.uniqueSort(i)}return u&&(T=g,k=p),h}var y=0,b=0<v.length,w=0<m.length;return b?re(e):e}de.prototype=_.filters=_.pseudos,_.setFilters=new de,u=ie.compile=function(e,t){var n,i=[],o=[],r=w[e+" "];if(!r){for(n=(t=t||he(e)).length;n--;)((r=function e(t){for(var i,n,o,r=t.length,a=_.relative[t[0].type],s=a||_.relative[" "],l=a?1:0,c=pe(function(e){return e===i},s,!0),d=pe(function(e){return-1<A.call(i,e)},s,!0),h=[function(e,t,n){return!a&&(n||t!==k)||((i=t).nodeType?c:d)(e,t,n)}];l<r;l++)if(n=_.relative[t[l].type])h=[pe(fe(h),n)];else{if((n=_.filter[t[l].type].apply(null,t[l].matches))[b]){for(o=++l;o<r&&!_.relative[t[o].type];o++);return me(1<l&&fe(h),1<l&&ue(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(W,"$1"),n,l<o&&e(t.slice(l,o)),o<r&&e(t=t.slice(o)),o<r&&ue(t))}h.push(n)}return fe(h)}(t[n]))[b]?i:o).push(r);r=w(e,ve(o,i))}return r},h.sortStable=b.split("").sort($).join("")===b,h.detectDuplicates=j,p(),h.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(C.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,n){return n?i:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?i:e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||se(O,function(e,t,n){return n?i:(n=e.getAttributeNode(t))&&n.specified?n.value:!0===e[t]?t.toLowerCase():null}),ye.find=ie,ye.expr=ie.selectors,ye.expr[":"]=ye.expr.pseudos,ye.unique=ie.uniqueSort,ye.text=ie.getText,ye.isXMLDoc=ie.isXML,ye.contains=ie.contains}(f);var L,S,N,E,P={};ye.Callbacks=function(o){var e,n;o="string"==typeof o?P[o]||(n=P[e=o]={},ye.each(e.match(k)||[],function(e,t){n[t]=!0}),n):ye.extend({},o);function i(e){for(t=o.memory&&e,r=!0,c=s||0,s=0,l=d.length,a=!0;d&&c<l;c++)if(!1===d[c].apply(e[0],e[1])&&o.stopOnFalse){t=!1;break}a=!1,d&&(h?h.length&&i(h.shift()):t?d=[]:u.disable())}var t,r,a,s,l,c,d=[],h=!o.once&&[],u={add:function(){var e;return d&&(e=d.length,function i(e){ye.each(e,function(e,t){var n=ye.type(t);"function"===n?o.unique&&u.has(t)||d.push(t):t&&t.length&&"string"!==n&&i(t)})}(arguments),a?l=d.length:t&&(s=e,i(t))),this},remove:function(){return d&&ye.each(arguments,function(e,t){for(var n;-1<(n=ye.inArray(t,d,n));)d.splice(n,1),a&&(n<=l&&l--,n<=c&&c--)}),this},has:function(e){return e?-1<ye.inArray(e,d):!(!d||!d.length)},empty:function(){return d=[],l=0,this},disable:function(){return d=h=t=x,this},disabled:function(){return!d},lock:function(){return h=x,t||u.disable(),this},locked:function(){return!h},fireWith:function(e,t){return!d||r&&!h||(t=[e,(t=t||[]).slice?t.slice():t],a?h.push(t):i(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},ye.extend({Deferred:function(e){var a=[["resolve","done",ye.Callbacks("once memory"),"resolved"],["reject","fail",ye.Callbacks("once memory"),"rejected"],["notify","progress",ye.Callbacks("memory")]],o="pending",s={state:function(){return o},always:function(){return l.done(arguments).fail(arguments),this},then:function(){var r=arguments;return ye.Deferred(function(o){ye.each(a,function(e,t){var n=t[0],i=ye.isFunction(r[e])&&r[e];l[t[1]](function(){var e=i&&i.apply(this,arguments);e&&ye.isFunction(e.promise)?e.promise().done(o.resolve).fail(o.reject).progress(o.notify):o[n+"With"](this===s?o.promise():this,i?[e]:arguments)})}),r=null}).promise()},promise:function(e){return null!=e?ye.extend(e,s):s}},l={};return s.pipe=s.then,ye.each(a,function(e,t){var n=t[2],i=t[3];s[t[1]]=n.add,i&&n.add(function(){o=i},a[1^e][2].disable,a[2][2].lock),l[t[0]]=function(){return l[t[0]+"With"](this===l?s:this,arguments),this},l[t[0]+"With"]=n.fireWith}),s.promise(l),e&&e.call(l,l),l},when:function(e){function t(t,n,i){return function(e){n[t]=this,i[t]=1<arguments.length?u.call(arguments):e,i===o?c.notifyWith(n,i):--l||c.resolveWith(n,i)}}var o,n,i,r=0,a=u.call(arguments),s=a.length,l=1!==s||e&&ye.isFunction(e.promise)?s:0,c=1===l?e:ye.Deferred();if(1<s)for(o=Array(s),n=Array(s),i=Array(s);r<s;r++)a[r]&&ye.isFunction(a[r].promise)?a[r].promise().done(t(r,i,a)).fail(c.reject).progress(t(r,n,o)):--l;return l||c.resolveWith(i,a),c.promise()}}),ye.support=(L={},S=m.createElement("input"),N=m.createDocumentFragment(),E=m.createElement("div"),c=m.createElement("select"),d=c.appendChild(m.createElement("option")),S.type&&(S.type="checkbox",L.checkOn=""!==S.value,L.optSelected=d.selected,L.reliableMarginRight=!0,L.boxSizingReliable=!0,L.pixelPosition=!1,S.checked=!0,L.noCloneChecked=S.cloneNode(!0).checked,c.disabled=!0,L.optDisabled=!d.disabled,(S=m.createElement("input")).value="t",S.type="radio",L.radioValue="t"===S.value,S.setAttribute("checked","t"),S.setAttribute("name","t"),N.appendChild(S),L.checkClone=N.cloneNode(!0).cloneNode(!0).lastChild.checked,L.focusinBubbles="onfocusin"in f,E.style.backgroundClip="content-box",E.cloneNode(!0).style.backgroundClip="",L.clearCloneStyle="content-box"===E.style.backgroundClip,ye(function(){var e,t,n=m.getElementsByTagName("body")[0];n&&((e=m.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",n.appendChild(e).appendChild(E),E.innerHTML="",E.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",ye.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){L.boxSizing=4===E.offsetWidth}),f.getComputedStyle&&(L.pixelPosition="1%"!==(f.getComputedStyle(E,null)||{}).top,L.boxSizingReliable="4px"===(f.getComputedStyle(E,null)||{width:"4px"}).width,(t=E.appendChild(m.createElement("div"))).style.cssText=E.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",t.style.marginRight=t.style.width="0",E.style.width="1px",L.reliableMarginRight=!parseFloat((f.getComputedStyle(t,null)||{}).marginRight)),n.removeChild(e))})),L);var D,A,O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;function I(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=ye.expando+Math.random()}function H(e,t,n){var i;if(n===x&&1===e.nodeType)if(i="data-"+t.replace(F,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:O.test(n)?JSON.parse(n):n)}catch(e){}D.set(e,t,n)}else n=x;return n}I.uid=1,I.accepts=function(e){return!e.nodeType||(1===e.nodeType||9===e.nodeType)},I.prototype={key:function(t){if(!I.accepts(t))return 0;var n={},i=t[this.expando];if(!i){i=I.uid++;try{n[this.expando]={value:i},Object.defineProperties(t,n)}catch(e){n[this.expando]=i,ye.extend(t,n)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,n){var i,e=this.key(e),o=this.cache[e];if("string"==typeof t)o[t]=n;else if(ye.isEmptyObject(o))ye.extend(this.cache[e],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){e=this.cache[this.key(e)];return t===x?e:e[t]},access:function(e,t,n){var i;return t===x||t&&"string"==typeof t&&n===x?(i=this.get(e,t))!==x?i:this.get(e,ye.camelCase(t)):(this.set(e,t,n),n!==x?n:t)},remove:function(e,t){var n,i,e=this.key(e),o=this.cache[e];if(t===x)this.cache[e]={};else{n=(i=ye.isArray(t)?t.concat(t.map(ye.camelCase)):(e=ye.camelCase(t),t in o?[t,e]:(i=e)in o?[i]:i.match(k)||[])).length;for(;n--;)delete o[i[n]]}},hasData:function(e){return!ye.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},D=new I,A=new I,ye.extend({acceptData:I.accepts,hasData:function(e){return D.hasData(e)||A.hasData(e)},data:function(e,t,n){return D.access(e,t,n)},removeData:function(e,t){D.remove(e,t)},_data:function(e,t,n){return A.access(e,t,n)},_removeData:function(e,t){A.remove(e,t)}}),ye.fn.extend({data:function(i,e){var t,n,o=this[0],r=0,a=null;if(i!==x)return"object"==typeof i?this.each(function(){D.set(this,i)}):ye.access(this,function(t){var e,n=ye.camelCase(i);if(o&&t===x)return(e=D.get(o,i))!==x||(e=D.get(o,n))!==x?e:(e=H(o,n,x))!==x?e:void 0;this.each(function(){var e=D.get(this,n);D.set(this,n,t),-1!==i.indexOf("-")&&e!==x&&D.set(this,i,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(a=D.get(o),1===o.nodeType&&!A.get(o,"hasDataAttrs"))){for(t=o.attributes;t.length>r;r++)0===(n=t[r].name).indexOf("data-")&&(n=ye.camelCase(n.slice(5)),H(o,n,a[n]));A.set(o,"hasDataAttrs",!0)}return a},removeData:function(e){return this.each(function(){D.remove(this,e)})}}),ye.extend({queue:function(e,t,n){var i;return e?(i=A.get(e,t=(t||"fx")+"queue"),n&&(!i||ye.isArray(n)?i=A.access(e,t,ye.makeArray(n)):i.push(n)),i||[]):x},dequeue:function(e,t){t=t||"fx";var n=ye.queue(e,t),i=n.length,o=n.shift(),r=ye._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,function(){ye.dequeue(e,t)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return A.get(e,n)||A.access(e,n,{empty:ye.Callbacks("once memory").add(function(){A.remove(e,[t+"queue",n])})})}}),ye.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ye.queue(this[0],t):n===x?this:this.each(function(){var e=ye.queue(this,t,n);ye._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ye.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ye.dequeue(this,e)})},delay:function(i,e){return i=ye.fx&&ye.fx.speeds[i]||i,this.queue(e=e||"fx",function(e,t){var n=setTimeout(e,i);t.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--o||r.resolveWith(a,[a])}var i,o=1,r=ye.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=x),e=e||"fx";s--;)(i=A.get(a[s],e+"queueHooks"))&&i.empty&&(o++,i.empty.add(n));return n(),r.promise(t)}});var R,B=/[\t\r\n\f]/g,W=/\r/g,q=/^(?:input|select|textarea|button)$/i;ye.fn.extend({attr:function(e,t){return ye.access(this,ye.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ye.removeAttr(this,e)})},prop:function(e,t){return ye.access(this,ye.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ye.propFix[e]||e]})},addClass:function(t){var e,n,i,o,r,a=0,s=this.length,l="string"==typeof t&&t;if(ye.isFunction(t))return this.each(function(e){ye(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(k)||[];a<s;a++)if(i=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(B," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");n.className=ye.trim(i)}return this},removeClass:function(t){var e,n,i,o,r,a=0,s=this.length,l=0===arguments.length||"string"==typeof t&&t;if(ye.isFunction(t))return this.each(function(e){ye(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(k)||[];a<s;a++)if(i=1===(n=this[a]).nodeType&&(n.className?(" "+n.className+" ").replace(B," "):"")){for(r=0;o=e[r++];)for(;0<=i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");n.className=t?ye.trim(i):""}return this},toggleClass:function(o,t){var r=typeof o;return"boolean"==typeof t&&"string"==r?t?this.addClass(o):this.removeClass(o):ye.isFunction(o)?this.each(function(e){ye(this).toggleClass(o.call(this,e,this.className,t),t)}):this.each(function(){if("string"==r)for(var e,t=0,n=ye(this),i=o.match(k)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else r!=g&&"boolean"!=r||(this.className&&A.set(this,"__className__",this.className),this.className=!this.className&&!1!==o&&A.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(B," ").indexOf(t))return!0;return!1},val:function(t){var n,e,i,o=this[0];return arguments.length?(i=ye.isFunction(t),this.each(function(e){1===this.nodeType&&(null==(e=i?t.call(this,e,ye(this).val()):t)?e="":"number"==typeof e?e+="":ye.isArray(e)&&(e=ye.map(e,function(e){return null==e?"":e+""})),(n=ye.valHooks[this.type]||ye.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,e,"value")!==x||(this.value=e))})):o?(n=ye.valHooks[o.type]||ye.valHooks[o.nodeName.toLowerCase()])&&"get"in n&&(e=n.get(o,"value"))!==x?e:"string"==typeof(e=o.value)?e.replace(W,""):null==e?"":e:void 0}}),ye.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,r=o?null:[],a=o?i+1:n.length,s=i<0?a:o?i:0;s<a;s++)if(!(!(t=n[s]).selected&&s!==i||(ye.support.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&ye.nodeName(t.parentNode,"optgroup"))){if(t=ye(t).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var n,i,o=e.options,r=ye.makeArray(t),a=o.length;a--;)((i=o[a]).selected=0<=ye.inArray(ye(i).val(),r))&&(n=!0);return n||(e.selectedIndex=-1),r}}},attr:function(e,t,n){var i,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute==g?ye.prop(e,t,n):(1===r&&ye.isXMLDoc(e)||(t=t.toLowerCase(),i=ye.attrHooks[t]||(ye.expr.match.bool.test(t)?R:void 0)),n===x?i&&"get"in i&&null!==(o=i.get(e,t))?o:null==(o=ye.find.attr(e,t))?x:o:null!==n?i&&"set"in i&&(o=i.set(e,n,t))!==x?o:(e.setAttribute(t,n+""),n):(ye.removeAttr(e,t),x))},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(k);if(r&&1===e.nodeType)for(;n=r[o++];)i=ye.propFix[n]||n,ye.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!ye.support.radioValue&&"radio"===t&&ye.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return(1!==r||!ye.isXMLDoc(e))&&(t=ye.propFix[t]||t,o=ye.propHooks[t]),n!==x?o&&"set"in o&&(i=o.set(e,n,t))!==x?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||q.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),R={set:function(e,t,n){return!1===t?ye.removeAttr(e,n):e.setAttribute(n,n),n}},ye.each(ye.expr.match.bool.source.match(/\w+/g),function(e,t){var o=ye.expr.attrHandle[t]||ye.find.attr;ye.expr.attrHandle[t]=function(e,t,n){var i=ye.expr.attrHandle[t],n=n?x:(ye.expr.attrHandle[t]=x)!=o(e,t,n)?t.toLowerCase():null;return ye.expr.attrHandle[t]=i,n}}),ye.support.optSelected||(ye.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),ye.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ye.propFix[this.toLowerCase()]=this}),ye.each(["radio","checkbox"],function(){ye.valHooks[this]={set:function(e,t){return ye.isArray(t)?e.checked=0<=ye.inArray(ye(e).val(),t):x}},ye.support.checkOn||(ye.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var X=/^key/,z=/^(?:mouse|contextmenu)|click/,G=/^(?:focusinfocus|focusoutblur)$/,V=/^([^.]*)(?:\.(.+)|)$/;function K(){return!0}function Y(){return!1}function U(){try{return m.activeElement}catch(e){}}ye.event={global:{},add:function(e,t,n,i,o){var r,a,s,l,c,d,h,u,p,f=A.get(e);if(f)for(n.handler&&(n=(r=n).handler,o=r.selector),n.guid||(n.guid=ye.guid++),(s=f.events)||(s=f.events={}),(a=f.handle)||((a=f.handle=function(e){return typeof ye==g||e&&ye.event.triggered===e.type?x:ye.event.dispatch.apply(a.elem,arguments)}).elem=e),l=(t=(t||"").match(k)||[""]).length;l--;)h=p=(c=V.exec(t[l])||[])[1],u=(c[2]||"").split(".").sort(),h&&(d=ye.event.special[h]||{},h=(o?d.delegateType:d.bindType)||h,d=ye.event.special[h]||{},c=ye.extend({type:h,origType:p,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&ye.expr.match.needsContext.test(o),namespace:u.join(".")},r),(p=s[h])||((p=s[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,u,a)||e.addEventListener&&e.addEventListener(h,a,!1)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,c):p.push(c),ye.event.global[h]=!0)},remove:function(e,t,n,i,o){var r,a,s,l,c,d,h,u,p,f,g,m=A.hasData(e)&&A.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(k)||[""]).length;c--;)if(p=g=(s=V.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=ye.event.special[p]||{},u=l[p=(i?h.delegateType:h.bindType)||p]||[],s=s[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=u.length;r--;)d=u[r],!o&&g!==d.origType||n&&n.guid!==d.guid||s&&!s.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(u.splice(r,1),d.selector&&u.delegateCount--,h.remove&&h.remove.call(e,d));a&&!u.length&&(h.teardown&&!1!==h.teardown.call(e,f,m.handle)||ye.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)ye.event.remove(e,p+t[c],n,i,!0);ye.isEmptyObject(l)&&(delete m.handle,A.remove(e,"events"))}},trigger:function(e,t,n,i){var o,r,a,s,l,c,d=[n||m],h=b.call(e,"type")?e.type:e,u=b.call(e,"namespace")?e.namespace.split("."):[],p=r=n=n||m;if(3!==n.nodeType&&8!==n.nodeType&&!G.test(h+ye.event.triggered)&&(0<=h.indexOf(".")&&(h=(u=h.split(".")).shift(),u.sort()),s=h.indexOf(":")<0&&"on"+h,(e=e[ye.expando]?e:new ye.Event(h,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=u.join("."),e.namespace_re=e.namespace?RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=x,e.target||(e.target=n),t=null==t?[e]:ye.makeArray(t,[e]),c=ye.event.special[h]||{},i||!c.trigger||!1!==c.trigger.apply(n,t))){if(!i&&!c.noBubble&&!ye.isWindow(n)){for(a=c.delegateType||h,G.test(a+h)||(p=p.parentNode);p;p=p.parentNode)d.push(p),r=p;r===(n.ownerDocument||m)&&d.push(r.defaultView||r.parentWindow||f)}for(o=0;(p=d[o++])&&!e.isPropagationStopped();)e.type=1<o?a:c.bindType||h,(l=(A.get(p,"events")||{})[e.type]&&A.get(p,"handle"))&&l.apply(p,t),(l=s&&p[s])&&ye.acceptData(p)&&l.apply&&!1===l.apply(p,t)&&e.preventDefault();return e.type=h,i||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!ye.acceptData(n)||s&&ye.isFunction(n[h])&&!ye.isWindow(n)&&((r=n[s])&&(n[s]=null),n[ye.event.triggered=h](),ye.event.triggered=x,r&&(n[s]=r)),e.result}},dispatch:function(e){e=ye.event.fix(e);var t,n,i,o,r,a=u.call(arguments),s=(A.get(this,"events")||{})[e.type]||[],l=ye.event.special[e.type]||{};if((a[0]=e).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(r=ye.event.handlers.call(this,e,s),t=0;(i=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(o.namespace)||(e.handleObj=o,e.data=o.data,(o=((ye.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))!==x&&!1===(e.result=o)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(i=[],n=0;n<s;n++)i[o=(r=t[n]).selector+" "]===x&&(i[o]=r.needsContext?0<=ye(o,this).index(l):ye.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return t.length>s&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=(i=e.target.ownerDocument||m).documentElement,i=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),e.which||o===x||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[ye.expando])return e;var t,n,i,o=e.type,r=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=z.test(o)?this.mouseHooks:X.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new ye.Event(r),t=i.length;t--;)e[n=i[t]]=r[n];return e.target||(e.target=m),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,r):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==U()&&this.focus?(this.focus(),!1):x},delegateType:"focusin"},blur:{trigger:function(){return this===U()&&this.blur?(this.blur(),!1):x},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ye.nodeName(this,"input")?(this.click(),!1):x},_default:function(e){return ye.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==x&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){e=ye.extend(new ye.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?ye.event.trigger(e,null,t):ye.event.dispatch.call(t,e),e.isDefaultPrevented()&&n.preventDefault()}},ye.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},ye.Event=function(e,t){return this instanceof ye.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?K:Y):this.type=e,t&&ye.extend(this,t),this.timeStamp=e&&e.timeStamp||ye.now(),this[ye.expando]=!0,x):new ye.Event(e,t)},ye.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=K,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=K,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()}},ye.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,o){ye.event.special[e]={delegateType:o,bindType:o,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||ye.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=o),t}}}),ye.support.focusinBubbles||ye.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){ye.event.simulate(t,e.target,ye.event.fix(e),!0)}var i=0;ye.event.special[t]={setup:function(){0==i++&&m.addEventListener(e,n,!0)},teardown:function(){0==--i&&m.removeEventListener(e,n,!0)}}}),ye.fn.extend({on:function(e,t,n,i,o){var r,a;if("object"==typeof e){for(a in"string"!=typeof t&&(n=n||t,t=x),e)this.on(a,t,n,e[a],o);return this}if(null==n&&null==i?(i=t,n=t=x):null==i&&("string"==typeof t?(i=n,n=x):(i=n,n=t,t=x)),!1===i)i=Y;else if(!i)return this;return 1===o&&(r=i,(i=function(e){return ye().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=ye.guid++)),this.each(function(){ye.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ye(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=x),!1===n&&(n=Y),this.each(function(){ye.event.remove(this,e,n,t)});for(o in e)this.off(o,t,e[o]);return this},trigger:function(e,t){return this.each(function(){ye.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ye.event.trigger(e,t,n,!0):x}});var Q=/^.[^:#\[\.,]*$/,Z=/^(?:parents|prev(?:Until|All))/,J=ye.expr.match.needsContext,ee={children:!0,contents:!0,next:!0,prev:!0};function te(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function ne(e,n,i){if(ye.isFunction(n))return ye.grep(e,function(e,t){return!!n.call(e,t,e)!==i});if(n.nodeType)return ye.grep(e,function(e){return e===n!==i});if("string"==typeof n){if(Q.test(n))return ye.filter(n,e,i);n=ye.filter(n,e)}return ye.grep(e,function(e){return 0<=p.call(n,e)!==i})}ye.fn.extend({find:function(e){var t,n=[],i=this,o=i.length;if("string"!=typeof e)return this.pushStack(ye(e).filter(function(){for(t=0;t<o;t++)if(ye.contains(i[t],this))return!0}));for(t=0;t<o;t++)ye.find(e,i[t],n);return(n=this.pushStack(1<o?ye.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=ye(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ye.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(ne(this,e||[],!0))},filter:function(e){return this.pushStack(ne(this,e||[],!1))},is:function(e){return!!ne(this,"string"==typeof e&&J.test(e)?ye(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,o=this.length,r=[],a=J.test(e)||"string"!=typeof e?ye(e,t||this.context):0;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ye.find.matchesSelector(n,e))){n=r.push(n);break}return this.pushStack(1<r.length?ye.unique(r):r)},index:function(e){return e?"string"==typeof e?p.call(ye(e),this[0]):p.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){e="string"==typeof e?ye(e,t):ye.makeArray(e&&e.nodeType?[e]:e),e=ye.merge(this.get(),e);return this.pushStack(ye.unique(e))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ye.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return ye.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ye.dir(e,"parentNode",n)},next:function(e){return te(e,"nextSibling")},prev:function(e){return te(e,"previousSibling")},nextAll:function(e){return ye.dir(e,"nextSibling")},prevAll:function(e){return ye.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ye.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ye.dir(e,"previousSibling",n)},siblings:function(e){return ye.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ye.sibling(e.firstChild)},contents:function(e){return e.contentDocument||ye.merge([],e.childNodes)}},function(i,o){ye.fn[i]=function(e,t){var n=ye.map(this,o,e);return(t="Until"!==i.slice(-5)?e:t)&&"string"==typeof t&&(n=ye.filter(t,n)),1<this.length&&(ee[i]||ye.unique(n),Z.test(i)&&n.reverse()),this.pushStack(n)}}),ye.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ye.find.matchesSelector(i,e)?[i]:[]:ye.find.matches(e,ye.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){for(var i=[],o=n!==x;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ye(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,oe=/<([\w:]+)/,re=/<|&#?\w+;/,ae=/<(?:script|style|link)/i,se=/^(?:checkbox|radio)$/i,le=/checked\s*(?:[^=]|=\s*.checked.)/i,ce=/^$|\/(?:java|ecma)script/i,de=/^true\/(.*)/,he=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(e,t){return ye.nodeName(e,"table")&&ye.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function fe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ge(e){var t=de.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function me(e,t){for(var n=e.length,i=0;i<n;i++)A.set(e[i],"globalEval",!t||A.get(t[i],"globalEval"))}function ve(e,t){var n,i,o,r,a,s;if(1===t.nodeType){if(A.hasData(e)&&(r=A.access(e),a=A.set(t,r),s=r.events))for(o in delete a.handle,a.events={},s)for(n=0,i=s[o].length;n<i;n++)ye.event.add(t,o,s[o][n]);D.hasData(e)&&(e=D.access(e),e=ye.extend({},e),D.set(t,e))}}function be(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===x||t&&ye.nodeName(e,t)?ye.merge([e],n):n}ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td,ye.fn.extend({text:function(e){return ye.access(this,function(e){return e===x?ye.text(this):this.empty().append((this[0]&&this[0].ownerDocument||m).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||pe(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=pe(this,e)).insertBefore(e,t.firstChild)})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?ye.filter(e,this):this,o=0;null!=(n=i[o]);o++)t||1!==n.nodeType||ye.cleanData(be(n)),n.parentNode&&(t&&ye.contains(n.ownerDocument,n)&&me(be(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ye.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ye.clone(this,e,t)})},html:function(e){return ye.access(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===x&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ae.test(e)&&!ue[(oe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ie,"<$1></$2>");try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(ye.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=ye.map(this,function(e){return[e.nextSibling,e.parentNode]}),o=0;return this.domManip(arguments,function(e){var t=i[o++],n=i[o++];n&&(t&&t.parentNode!==n&&(t=this.nextSibling),ye(this).remove(),n.insertBefore(e,t))},!0),o?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(n,i,o){n=v.apply([],n);var e,t,r,a,s,l,c=0,d=this.length,h=this,u=d-1,p=n[0],f=ye.isFunction(p);if(f||!(d<=1||"string"!=typeof p||ye.support.checkClone)&&le.test(p))return this.each(function(e){var t=h.eq(e);f&&(n[0]=p.call(this,e,t.html())),t.domManip(n,i,o)});if(d&&(t=(e=ye.buildFragment(n,this[0].ownerDocument,!1,!o&&this)).firstChild,1===e.childNodes.length&&(e=t),t)){for(a=(r=ye.map(be(e,"script"),fe)).length;c<d;c++)s=e,c!==u&&(s=ye.clone(s,!0,!0),a&&ye.merge(r,be(s,"script"))),i.call(this[c],s,c);if(a)for(l=r[r.length-1].ownerDocument,ye.map(r,ge),c=0;c<a;c++)s=r[c],ce.test(s.type||"")&&!A.access(s,"globalEval")&&ye.contains(l,s)&&(s.src?ye._evalUrl(s.src):ye.globalEval(s.textContent.replace(he,"")))}return this}}),ye.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ye.fn[e]=function(e){for(var t,n=[],i=ye(e),o=i.length-1,r=0;r<=o;r++)t=r===o?this:this.clone(!0),ye(i[r])[a](t),h.apply(n,t.get());return this.pushStack(n)}}),ye.extend({clone:function(e,t,n){var i,o,r,a,s,l,c,d=e.cloneNode(!0),h=ye.contains(e.ownerDocument,e);if(!(ye.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ye.isXMLDoc(e)))for(a=be(d),i=0,o=(r=be(e)).length;i<o;i++)s=r[i],l=a[i],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&se.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(r=r||be(e),a=a||be(d),i=0,o=r.length;i<o;i++)ve(r[i],a[i]);else ve(e,d);return 0<(a=be(d,"script")).length&&me(a,!h&&be(e,"script")),d},buildFragment:function(e,t,n,i){for(var o,r,a,s,l,c=0,d=e.length,h=t.createDocumentFragment(),u=[];c<d;c++)if((o=e[c])||0===o)if("object"===ye.type(o))ye.merge(u,o.nodeType?[o]:o);else if(re.test(o)){for(r=r||h.appendChild(t.createElement("div")),a=(oe.exec(o)||["",""])[1].toLowerCase(),a=ue[a]||ue._default,r.innerHTML=a[1]+o.replace(ie,"<$1></$2>")+a[2],l=a[0];l--;)r=r.lastChild;ye.merge(u,r.childNodes),(r=h.firstChild).textContent=""}else u.push(t.createTextNode(o));for(h.textContent="",c=0;o=u[c++];)if((!i||-1===ye.inArray(o,i))&&(s=ye.contains(o.ownerDocument,o),r=be(h.appendChild(o),"script"),s&&me(r),n))for(l=0;o=r[l++];)ce.test(o.type||"")&&n.push(o);return h},cleanData:function(e){for(var t,n,i,o,r,a,s=ye.event.special,l=0;(n=e[l])!==x;l++){if(I.accepts(n)&&((r=n[A.expando])&&(t=A.cache[r]))){if((i=Object.keys(t.events||{})).length)for(a=0;(o=i[a])!==x;a++)s[o]?ye.event.remove(n,o):ye.removeEvent(n,o,t.handle);A.cache[r]&&delete A.cache[r]}delete D.cache[n[D.expando]]}},_evalUrl:function(e){return ye.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),ye.fn.extend({wrapAll:function(t){var e;return ye.isFunction(t)?this.each(function(e){ye(this).wrapAll(t.call(this,e))}):(this[0]&&(e=ye(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return ye.isFunction(n)?this.each(function(e){ye(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ye(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=ye.isFunction(t);return this.each(function(e){ye(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){ye.nodeName(this,"body")||ye(this).replaceWith(this.childNodes)}).end()}});var we,xe,_e=/^(none|table(?!-c[ea]).+)/,ke=/^margin/,Ce=RegExp("^("+_+")(.*)$","i"),Te=RegExp("^("+_+")(?!px)[a-z%]+$","i"),je=RegExp("^([+-])=("+_+")","i"),$e={BODY:"block"},Me={position:"absolute",visibility:"hidden",display:"block"},Le={letterSpacing:0,fontWeight:400},Se=["Top","Right","Bottom","Left"],Ne=["Webkit","O","Moz","ms"];function Ee(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=Ne.length;o--;)if((t=Ne[o]+n)in e)return t;return i}function Pe(e,t){return"none"===ye.css(e=t||e,"display")||!ye.contains(e.ownerDocument,e)}function De(e){return f.getComputedStyle(e,null)}function Ae(e,t){for(var n,i,o,r,a,s=[],l=0,c=e.length;l<c;l++)(i=e[l]).style&&(s[l]=A.get(i,"olddisplay"),n=i.style.display,t?(s[l]||"none"!==n||(i.style.display=""),""===i.style.display&&Pe(i)&&(s[l]=A.access(i,"olddisplay",(o=i.nodeName,a=r=void 0,r=m,(a=$e[o])||("none"!==(a=He(o,r))&&a||(xe=(xe||ye("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(r.documentElement),(r=(xe[0].contentWindow||xe[0].contentDocument).document).write("<!doctype html><html><body>"),r.close(),a=He(o,r),xe.detach()),$e[o]=a),a)))):s[l]||(a=Pe(i),(n&&"none"!==n||!a)&&A.set(i,"olddisplay",a?n:ye.css(i,"display"))));for(l=0;l<c;l++)(i=e[l]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[l]||"":"none"));return e}function Oe(e,t,n){var i=Ce.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function Fe(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,a=0;r<4;r+=2)"margin"===n&&(a+=ye.css(e,n+Se[r],!0,o)),i?("content"===n&&(a-=ye.css(e,"padding"+Se[r],!0,o)),"margin"!==n&&(a-=ye.css(e,"border"+Se[r]+"Width",!0,o))):(a+=ye.css(e,"padding"+Se[r],!0,o),"padding"!==n&&(a+=ye.css(e,"border"+Se[r]+"Width",!0,o)));return a}function Ie(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=De(e),a=ye.support.boxSizing&&"border-box"===ye.css(e,"boxSizing",!1,r);if(o<=0||null==o){if(((o=we(e,t,r))<0||null==o)&&(o=e.style[t]),Te.test(o))return o;i=a&&(ye.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+Fe(e,t,n||(a?"border":"content"),i,r)+"px"}function He(e,t){e=ye(t.createElement(e)).appendTo(t.body),t=ye.css(e[0],"display");return e.remove(),t}ye.fn.extend({css:function(e,t){return ye.access(this,function(e,t,n){var i,o,r={},a=0;if(ye.isArray(t)){for(i=De(e),o=t.length;a<o;a++)r[t[a]]=ye.css(e,t[a],!1,i);return r}return n!==x?ye.style(e,t,n):ye.css(e,t)},e,t,1<arguments.length)},show:function(){return Ae(this,!0)},hide:function(){return Ae(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Pe(this)?ye(this).show():ye(this).hide()})}}),ye.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=we(e,"opacity");return""===e?"1":e}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=ye.camelCase(t),l=e.style;return t=ye.cssProps[s]||(ye.cssProps[s]=Ee(l,s)),a=ye.cssHooks[t]||ye.cssHooks[s],n===x?a&&"get"in a&&(o=a.get(e,!1,i))!==x?o:l[t]:("string"===(r=typeof n)&&(o=je.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(ye.css(e,t)),r="number"),null==n||"number"===r&&isNaN(n)||("number"!==r||ye.cssNumber[s]||(n+="px"),ye.support.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&(n=a.set(e,n,i))===x||(l[t]=n)),x)}},css:function(e,t,n,i){var o,r=ye.camelCase(t);return t=ye.cssProps[r]||(ye.cssProps[r]=Ee(e.style,r)),"normal"===(o=(o=(r=ye.cssHooks[t]||ye.cssHooks[r])&&"get"in r?r.get(e,!0,n):o)===x?we(e,t,i):o)&&t in Le&&(o=Le[t]),""===n||n?(t=parseFloat(o),!0===n||ye.isNumeric(t)?t||0:o):o}}),we=function(e,t,n){var i=n||De(e),o=i?i.getPropertyValue(t)||i[t]:x,r=e.style;return i&&(""!==o||ye.contains(e.ownerDocument,e)||(o=ye.style(e,t)),Te.test(o)&&ke.test(t)&&(n=r.width,e=r.minWidth,t=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=n,r.minWidth=e,r.maxWidth=t)),o},ye.each(["height","width"],function(e,o){ye.cssHooks[o]={get:function(e,t,n){return t?0===e.offsetWidth&&_e.test(ye.css(e,"display"))?ye.swap(e,Me,function(){return Ie(e,o,n)}):Ie(e,o,n):x},set:function(e,t,n){var i=n&&De(e);return Oe(0,t,n?Fe(e,o,n,ye.support.boxSizing&&"border-box"===ye.css(e,"boxSizing",!1,i),i):0)}}}),ye(function(){ye.support.reliableMarginRight||(ye.cssHooks.marginRight={get:function(e,t){return t?ye.swap(e,{display:"inline-block"},we,[e,"marginRight"]):x}}),!ye.support.pixelPosition&&ye.fn.position&&ye.each(["top","left"],function(e,n){ye.cssHooks[n]={get:function(e,t){return t?(t=we(e,n),Te.test(t)?ye(e).position()[n]+"px":t):x}}})}),ye.expr&&ye.expr.filters&&(ye.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},ye.expr.filters.visible=function(e){return!ye.expr.filters.hidden(e)}),ye.each({margin:"",padding:"",border:"Width"},function(o,r){ye.cssHooks[o+r]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[o+Se[t]+r]=i[t]||i[t-2]||i[0];return n}},ke.test(o)||(ye.cssHooks[o+r].set=Oe)});var Re=/%20/g,Be=/\[\]$/,We=/\r?\n/g,qe=/^(?:submit|button|image|reset|file)$/i,Xe=/^(?:input|select|textarea|keygen)/i;ye.fn.extend({serialize:function(){return ye.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ye.prop(this,"elements");return e?ye.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ye(this).is(":disabled")&&Xe.test(this.nodeName)&&!qe.test(e)&&(this.checked||!se.test(e))}).map(function(e,t){var n=ye(this).val();return null==n?null:ye.isArray(n)?ye.map(n,function(e){return{name:t.name,value:e.replace(We,"\r\n")}}):{name:t.name,value:n.replace(We,"\r\n")}}).get()}}),ye.param=function(e,t){function n(e,t){t=ye.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var i,o=[];if(t===x&&(t=ye.ajaxSettings&&ye.ajaxSettings.traditional),ye.isArray(e)||e.jquery&&!ye.isPlainObject(e))ye.each(e,function(){n(this.name,this.value)});else for(i in e)!function n(i,e,o,r){if(ye.isArray(e))ye.each(e,function(e,t){o||Be.test(i)?r(i,t):n(i+"["+("object"==typeof t?e:"")+"]",t,o,r)});else if(o||"object"!==ye.type(e))r(i,e);else for(var t in e)n(i+"["+t+"]",e[t],o,r)}(i,e[i],t,n);return o.join("&").replace(Re,"+")},ye.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){ye.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),ye.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ze,Ge,Ve=ye.now(),Ke=/\?/,Ye=/#.*$/,Ue=/([?&])_=[^&]*/,Qe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ze=/^(?:GET|HEAD)$/,Je=/^\/\//,et=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,tt=ye.fn.load,nt={},it={},ot="*/".concat("*");try{Ge=e.href}catch(e){(Ge=m.createElement("a")).href="",Ge=Ge.href}function rt(r){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,o=e.toLowerCase().match(k)||[];if(ye.isFunction(t))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(t)):(r[n]=r[n]||[]).push(t)}}function at(t,i,o,r){var a={},s=t===it;function l(e){var n;return a[e]=!0,ye.each(t[e]||[],function(e,t){t=t(i,o,r);return"string"!=typeof t||s||a[t]?s?!(n=t):x:(i.dataTypes.unshift(t),l(t),!1)}),n}return l(i.dataTypes[0])||!a["*"]&&l("*")}function st(e,t){var n,i,o=ye.ajaxSettings.flatOptions||{};for(n in t)t[n]!==x&&((o[n]?e:i=i||{})[n]=t[n]);return i&&ye.extend(!0,e,i),e}ze=et.exec(Ge.toLowerCase())||[],ye.fn.load=function(e,t,n){if("string"!=typeof e&&tt)return tt.apply(this,arguments);var i,o,r,a=this,s=e.indexOf(" ");return 0<=s&&(i=e.slice(s),e=e.slice(0,s)),ye.isFunction(t)?(n=t,t=x):t&&"object"==typeof t&&(o="POST"),0<a.length&&ye.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?ye("<div>").append(ye.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},ye.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ye.fn[t]=function(e){return this.on(t,e)}}),ye.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ge,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ze[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ot,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ye.parseJSON,"text xml":ye.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?st(st(e,ye.ajaxSettings),t):st(ye.ajaxSettings,e)},ajaxPrefilter:rt(nt),ajaxTransport:rt(it),ajax:function(e,t){"object"==typeof e&&(t=e,e=x);var l,c,d,n,h,u,i,p=ye.ajaxSetup({},t=t||{}),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?ye(f):ye.event,m=ye.Deferred(),v=ye.Callbacks("once memory"),y=p.statusCode||{},o={},r={},b=0,a="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!n)for(n={};t=Qe.exec(d);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?d:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=r[n]=r[n]||e,o[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){if(e)if(b<2)for(var t in e)y[t]=[y[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){e=e||a;return l&&l.abort(e),s(0,e),this}};if(m.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,p.url=((e||p.url||Ge)+"").replace(Ye,"").replace(Je,ze[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=ye.trim(p.dataType||"*").toLowerCase().match(k)||[""],null==p.crossDomain&&(e=et.exec(p.url.toLowerCase()),p.crossDomain=!(!e||e[1]===ze[1]&&e[2]===ze[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(ze[3]||("http:"===ze[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ye.param(p.data,p.traditional)),at(nt,p,t,w),2===b)return w;for(i in(u=p.global)&&0==ye.active++&&ye.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ze.test(p.type),c=p.url,p.hasContent||(p.data&&(c=p.url+=(Ke.test(c)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=Ue.test(c)?c.replace(Ue,"$1_="+Ve++):c+(Ke.test(c)?"&":"?")+"_="+Ve++)),p.ifModified&&(ye.lastModified[c]&&w.setRequestHeader("If-Modified-Since",ye.lastModified[c]),ye.etag[c]&&w.setRequestHeader("If-None-Match",ye.etag[c])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+ot+"; q=0.01":""):p.accepts["*"]),p.headers)w.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(!1===p.beforeSend.call(f,w,p)||2===b))return w.abort();for(i in a="abort",{success:1,error:1,complete:1})w[i](p[i]);if(l=at(it,p,t,w)){w.readyState=1,u&&g.trigger("ajaxSend",[w,p]),p.async&&0<p.timeout&&(h=setTimeout(function(){w.abort("timeout")},p.timeout));try{b=1,l.send(o,s)}catch(e){if(!(b<2))throw e;s(-1,e)}}else s(-1,"No Transport");function s(e,t,n,i){var o,r,a,s=t;2!==b&&(b=2,h&&clearTimeout(h),l=x,d=i||"",w.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(a=function(e,t,n){var i,o,r,a,s=e.contents,l=e.dataTypes;for(;"*"===l[0];)l.shift(),i===x&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a=a||o}r=r||a}return r?(r!==l[0]&&l.unshift(r),n[r]):x}(p,w,n)),a=function(e,t,n,i){var o,r,a,s,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];r=d.shift();for(;r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=d.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=c[l+" "+r]||c["* "+r]))for(o in c)if(s=o.split(" "),s[1]===r&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[o]:!0!==c[o]&&(r=s[0],d.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(p,a,w,i),i?(p.ifModified&&((n=w.getResponseHeader("Last-Modified"))&&(ye.lastModified[c]=n),(n=w.getResponseHeader("etag"))&&(ye.etag[c]=n)),204===e||"HEAD"===p.type?s="nocontent":304===e?s="notmodified":(s=a.state,o=a.data,i=!(r=a.error))):(r=s,!e&&s||(s="error",e<0&&(e=0))),w.status=e,w.statusText=(t||s)+"",i?m.resolveWith(f,[o,s,w]):m.rejectWith(f,[w,s,r]),w.statusCode(y),y=x,u&&g.trigger(i?"ajaxSuccess":"ajaxError",[w,p,i?o:r]),v.fireWith(f,[w,s]),u&&(g.trigger("ajaxComplete",[w,p]),--ye.active||ye.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return ye.get(e,t,n,"json")},getScript:function(e,t){return ye.get(e,x,t,"script")}}),ye.each(["get","post"],function(e,o){ye[o]=function(e,t,n,i){return ye.isFunction(t)&&(i=i||n,n=t,t=x),ye.ajax({url:e,type:o,dataType:i,data:t,success:n})}}),ye.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ye.globalEval(e),e}}}),ye.ajaxPrefilter("script",function(e){e.cache===x&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ye.ajaxTransport("script",function(n){var i,o;if(n.crossDomain)return{send:function(e,t){i=ye("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",o=function(e){i.remove(),o=null,e&&t("error"===e.type?404:200,e.type)}),m.head.appendChild(i[0])},abort:function(){o&&o()}}});var lt=[],ct=/(=)\?(?=&|$)|\?\?/;ye.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=lt.pop()||ye.expando+"_"+Ve++;return this[e]=!0,e}}),ye.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,r,a=!1!==e.jsonp&&(ct.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ct.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=ye.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ct,"$1"+i):!1!==e.jsonp&&(e.url+=(Ke.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return r||ye.error(i+" was not called"),r[0]},e.dataTypes[0]="json",o=f[i],f[i]=function(){r=arguments},n.always(function(){f[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,lt.push(i)),r&&ye.isFunction(o)&&o(r[0]),r=o=x}),"script"):x}),ye.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var dt=ye.ajaxSettings.xhr(),ht={0:200,1223:204},ut=0,pt={};f.ActiveXObject&&ye(f).on("unload",function(){for(var e in pt)pt[e]();pt=x}),ye.support.cors=!!dt&&"withCredentials"in dt,ye.support.ajax=dt=!!dt,ye.ajaxTransport(function(r){var a;return ye.support.cors||dt&&!r.crossDomain?{send:function(e,t){var n,i,o=r.xhr();if(o.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)o[n]=r.xhrFields[n];for(n in r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)o.setRequestHeader(n,e[n]);a=function(e){return function(){a&&(delete pt[i],a=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?t(o.status||404,o.statusText):t(ht[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:x,o.getAllResponseHeaders()))}},o.onload=a(),o.onerror=a("error"),a=pt[i=ut++]=a("abort"),o.send(r.hasContent&&r.data||null)},abort:function(){a&&a()}}:x});var ft,gt,mt=/^(?:toggle|show|hide)$/,vt=RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),yt=/queueHooks$/,bt=[function(t,e,n){var i,o,r,a,s,l,c=this,d={},h=t.style,u=t.nodeType&&Pe(t),p=A.get(t,"fxshow");for(i in n.queue||(null==(s=ye._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,ye.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===ye.css(t,"display")&&"none"===ye.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),e)if(o=e[i],mt.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(u?"hide":"show")){if("show"!==o||!p||p[i]===x)continue;u=!0}d[i]=p&&p[i]||ye.style(t,i)}if(!ye.isEmptyObject(d))for(i in p?"hidden"in p&&(u=p.hidden):p=A.access(t,"fxshow",{}),r&&(p.hidden=!u),u?ye(t).show():c.done(function(){ye(t).hide()}),c.done(function(){for(var e in A.remove(t,"fxshow"),d)ye.style(t,e,d[e])}),d)a=_t(u?p[i]:0,i,c),i in p||(p[i]=a.start,u&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}],wt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),t=vt.exec(t),o=t&&t[3]||(ye.cssNumber[e]?"":"px"),r=(ye.cssNumber[e]||"px"!==o&&+i)&&vt.exec(ye.css(n.elem,e)),a=1,s=20;if(r&&r[3]!==o)for(o=o||r[3],t=t||[],r=+i||1;ye.style(n.elem,e,(r/=a=a||".5")+o),a!==(a=n.cur()/i)&&1!==a&&--s;);return t&&(r=n.start=+r||+i||0,n.unit=o,n.end=t[1]?r+(t[1]+1)*t[2]:+t[2]),n}]};function xt(){return setTimeout(function(){ft=x}),ft=ye.now()}function _t(e,t,n){for(var i,o=(wt[t]||[]).concat(wt["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,t,e))return i}function kt(o,e,t){var n,r,i=0,a=bt.length,s=ye.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ft||xt(),e=Math.max(0,c.startTime+c.duration-e),t=1-(e/c.duration||0),n=0,i=c.tweens.length;n<i;n++)c.tweens[n].run(t);return s.notifyWith(o,[c,t,e]),t<1&&i?e:(s.resolveWith(o,[c]),!1)},c=s.promise({elem:o,props:ye.extend({},e),opts:ye.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:ft||xt(),duration:t.duration,tweens:[],createTween:function(e,t){e=ye.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(e),e},stop:function(e){var t=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;t<n;t++)c.tweens[t].run(1);return e?s.resolveWith(o,[c,e]):s.rejectWith(o,[c,e]),this}}),d=c.props;for(function(e,t){var n,i,o,r,a;for(n in e)if(i=ye.camelCase(n),o=t[i],r=e[n],ye.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),a=ye.cssHooks[i],a&&"expand"in a)for(n in r=a.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(d,c.opts.specialEasing);i<a;i++)if(n=bt[i].call(c,o,d,c.opts))return n;return ye.map(d,_t,c),ye.isFunction(c.opts.start)&&c.opts.start.call(o,c),ye.fx.timer(ye.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function Ct(e,t,n,i,o){return new Ct.prototype.init(e,t,n,i,o)}function Tt(e,t){var n,i={height:e},o=0;for(t=t?1:0;o<4;o+=2-t)i["margin"+(n=Se[o])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function jt(e){return ye.isWindow(e)?e:9===e.nodeType&&e.defaultView}ye.Animation=ye.extend(kt,{tweener:function(e,t){for(var n,i=0,o=(e=ye.isFunction(e)?(t=e,["*"]):e.split(" ")).length;i<o;i++)n=e[i],wt[n]=wt[n]||[],wt[n].unshift(t)},prefilter:function(e,t){t?bt.unshift(e):bt.push(e)}}),((ye.Tween=Ct).prototype={constructor:Ct,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(ye.cssNumber[n]?"":"px")},cur:function(){var e=Ct.propHooks[this.prop];return(e&&e.get?e:Ct.propHooks._default).get(this)},run:function(e){var t=Ct.propHooks[this.prop];return this.pos=e=this.options.duration?ye.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(t&&t.set?t:Ct.propHooks._default).set(this),this}}).init.prototype=Ct.prototype,(Ct.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ye.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){ye.fx.step[e.prop]?ye.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ye.cssProps[e.prop]]||ye.cssHooks[e.prop])?ye.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}}).scrollTop=Ct.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ye.each(["toggle","show","hide"],function(e,i){var o=ye.fn[i];ye.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(Tt(i,!0),e,t,n)}}),ye.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var o=ye.isEmptyObject(t),r=ye.speed(e,n,i),i=function(){var e=kt(this,ye.extend({},t),r);(o||A.get(this,"finish"))&&e.stop(!0)};return i.finish=i,o||!1===r.queue?this.each(i):this.queue(r.queue,i)},stop:function(o,e,r){function a(e){var t=e.stop;delete e.stop,t(r)}return"string"!=typeof o&&(r=e,e=o,o=x),e&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var e=!0,t=null!=o&&o+"queueHooks",n=ye.timers,i=A.get(this);if(t)i[t]&&i[t].stop&&a(i[t]);else for(t in i)i[t]&&i[t].stop&&yt.test(t)&&a(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=o&&n[t].queue!==o||(n[t].anim.stop(r),e=!1,n.splice(t,1));!e&&r||ye.dequeue(this,o)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=A.get(this),n=t[a+"queue"],i=t[a+"queueHooks"],o=ye.timers,r=n?n.length:0;for(t.finish=!0,ye.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===a&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<r;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ye.each({slideDown:Tt("show"),slideUp:Tt("hide"),slideToggle:Tt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){ye.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),ye.speed=function(e,t,n){var i=e&&"object"==typeof e?ye.extend({},e):{complete:n||!n&&t||ye.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ye.isFunction(t)&&t};return i.duration=ye.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ye.fx.speeds?ye.fx.speeds[i.duration]:ye.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){ye.isFunction(i.old)&&i.old.call(this),i.queue&&ye.dequeue(this,i.queue)},i},ye.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ye.timers=[],ye.fx=Ct.prototype.init,ye.fx.tick=function(){var e,t=ye.timers,n=0;for(ft=ye.now();t.length>n;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||ye.fx.stop(),ft=x},ye.fx.timer=function(e){e()&&ye.timers.push(e)&&ye.fx.start()},ye.fx.interval=13,ye.fx.start=function(){gt=gt||setInterval(ye.fx.tick,ye.fx.interval)},ye.fx.stop=function(){clearInterval(gt),gt=null},ye.fx.speeds={slow:600,fast:200,_default:400},ye.fx.step={},ye.expr&&ye.expr.filters&&(ye.expr.filters.animated=function(t){return ye.grep(ye.timers,function(e){return t===e.elem}).length}),ye.fn.offset=function(t){if(arguments.length)return t===x?this:this.each(function(e){ye.offset.setOffset(this,t,e)});var e,n=this[0],i={top:0,left:0},o=n&&n.ownerDocument;return o?(e=o.documentElement,ye.contains(e,n)?(typeof n.getBoundingClientRect!=g&&(i=n.getBoundingClientRect()),o=jt(o),{top:i.top+o.pageYOffset-e.clientTop,left:i.left+o.pageXOffset-e.clientLeft}):i):void 0},ye.offset={setOffset:function(e,t,n){var i,o,r,a,s=ye.css(e,"position"),l=ye(e),c={};"static"===s&&(e.style.position="relative"),r=l.offset(),i=ye.css(e,"top"),a=ye.css(e,"left"),a=("absolute"===s||"fixed"===s)&&-1<(i+a).indexOf("auto")?(o=(s=l.position()).top,s.left):(o=parseFloat(i)||0,parseFloat(a)||0),null!=(t=ye.isFunction(t)?t.call(e,n,r):t).top&&(c.top=t.top-r.top+o),null!=t.left&&(c.left=t.left-r.left+a),"using"in t?t.using.call(e,c):l.css(c)}},ye.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ye.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),(i=!ye.nodeName(e[0],"html")?e.offset():i).top+=ye.css(e[0],"borderTopWidth",!0),i.left+=ye.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ye.css(n,"marginTop",!0),left:t.left-i.left-ye.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||r;e&&!ye.nodeName(e,"html")&&"static"===ye.css(e,"position");)e=e.offsetParent;return e||r})}}),ye.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,o){var r="pageYOffset"===o;ye.fn[t]=function(e){return ye.access(this,function(e,t,n){var i=jt(e);return n===x?i?i[o]:e[t]:(i?i.scrollTo(r?f.pageXOffset:n,r?n:f.pageYOffset):e[t]=n,x)},t,e,arguments.length,null)}}),ye.each({Height:"height",Width:"width"},function(r,a){ye.each({padding:"inner"+r,content:a,"":"outer"+r},function(i,e){ye.fn[e]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),o=i||(!0===e||!0===t?"margin":"border");return ye.access(this,function(e,t,n){var i;return ye.isWindow(e)?e.document.documentElement["client"+r]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+r],i["scroll"+r],e.body["offset"+r],i["offset"+r],i["client"+r])):n===x?ye.css(e,t,o):ye.style(e,t,n,o)},a,n?e:x,n,null)}})}),ye.fn.size=function(){return this.length},ye.fn.andSelf=ye.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ye:"function"==typeof define&&define.amd&&define("jquery",[],function(){return ye}),"object"==typeof f&&"object"==typeof f.document&&(f.jQuery=f.$=ye)}(window),$(document).ready(function(){function s(e){var t={};return e.find(":input").each(function(){var e=$(this).attr("name");"checkbox"==$(this).attr("type")?$(this).is(":checked")&&(e.match(/\[\]/)?(t[e]=t[e]||[],t[e].push($(this).val())):t[e]=$(this).val()):t[e]=$(this).val()}),t}var e=$("body");e.on("click",null,function(e){var t,n,i,o,r=$(e.target);r.attr("disabled")||r.hasClass("disabled")||(r.attr("data-ajaxclick")||r.parent("a").attr("data-ajaxclick")?(r.attr("data-ajaxclick")||(r=r.parent("a")),e.preventDefault(),t=(i=r.data("ajaxclick").split(":"))[0],n=i[1],o={},r.data("ajaxshroud")&&(o.loading_target=r.data("ajaxshroud")),(i=r.data("ajaxpost")||{}).origin=r.attr("id"),$.fn.ajax_factory(t,n,i,o)):$.fn.ajax_factory.defaults.load_pages_ajax&&(r.is("a")||(r=r.parent("a")).length)&&(i=r.attr("href"),r=r.attr("rel"),void 0===i||"#"==i||void 0!==r&&"external"==r||i.match("http")||(e.preventDefault(),(e=$("div[data-url='"+i+"']")).length?(window.history.pushState($.fn.ajax_factory.get_state(i),"",i),void 0!==page_handeler&&(page_handeler.toggle_page(e),void 0!==(e=$.fn.ajax_factory.get_state(i))&&null!=typeof e.actions&&page_handeler.perform_page_actions($.fn.ajax_factory.get_state(i).actions,i))):(o={call_as_uri:i,loading_target:"#main"},$.fn.ajax_factory("core","load_page",{module:"core",act:"load_page"},o)))))}),e.on("change",":input",function(e){var t=$(e.target);if(!t.attr("disabled")&&!t.hasClass("disabled"))if(t.attr("data-ajaxchange")){var n={};e.preventDefault();var i=(a=t.attr("data-ajaxchange").split(":"))[0],o=a[1],r=t.data("ajaxpost")||{};"checkbox"===t.attr("type")?r.value=t.is(":checked")?1:0:r.value=t.val(),r.origin=t.attr("id"),t.data("ajaxshroud")&&(n.loading_target=t.data("ajaxshroud")),$.fn.ajax_factory(i,o,r,n)}else{t=t.parents("form").eq(0);if(t.data("ajaxchange")){var a,i=(a=t.attr("data-ajaxchange").split(":"))[0],o=a[1],n={loading_target:t.attr("data-ajaxshroud")};return(r=s(t)).ajax_origin=t.id,$.fn.ajax_factory(i,o,r,n),!1}}}),e.on("click","form .submit",function(e){return $(this).parents("form").eq(0).submit(),e.preventDefault(),!1}),e.on("submit","form.ajax",function(e){e.preventDefault();var t=$(this).attr("action").split(":"),n=t[0],i=t[1],o=$(this).attr("data-ajaxshroud"),t=s($(this)),o=$.fn.extend($(this).data(),{loading_target:o});return t.ajax_origin=$(e.target)[0].id,$.fn.ajax_factory(n,i,t,o),!1}),e.on("submit","form.noajax",function(){var e,t=add_loading_shroud($(this).attr("data-ajaxshroud"));$(this).data("ajaxsocket")&&(e=add_socket_io($(this).data("ajaxsocket"),t),$(this).find("input[name=data-socket]").length||((t=document.createElement("input")).className="hidden",t.name="data-socket",t.type="hidden",t.value=e,$(this).prepend(t)))}),$.fn.ajax_factory=function(e,t,n,i){n=n||{};var o=add_loading_shroud((i=i||{}).loading_target);i.ajaxsocket&&(n["data-socket"]=add_socket_io(i.ajaxsocket,o)),n.module=e,n.act=t,$(".error_message").remove(),$.ajax({url:i.call_as_uri||window.location,global:!1,async:!0,type:"POST",dataType:"json",cache:!1,data:n,success:handle_json_response})},$.fn.ajax_factory.defaults={complete:["initMlink"],load_pages_ajax:!1},$.fn.ajax_factory.states=[],$.fn.ajax_factory.get_state=function(e){return this.states[e]},initMlink()}),Array.prototype.each=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e(this[n],n,t)},Array.prototype.count=function(){return this.length-2},String.prototype.isNumber=function(){return!isNaN(parseFloat(this))&&isFinite(this)};var socketId=!1;function add_socket_io(e,t){return socketId||(socketId=randomString(32,"aA#"),t&&$.getScript(window.location.origin+":8000/socket.io/socket.io.js",function(){var e=io.connect(window.location.origin+":8000");e.emit("set nickname",socketId),e.on("message",function(e){$(t).append("<code>"+e+"</code>")})})),socketId}function randomString(e,t){var n="";-1<t.indexOf("a")&&(n+="abcdefghijklmnopqrstuvwxyz"),-1<t.indexOf("A")&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),-1<t.indexOf("#")&&(n+="0123456789"),-1<t.indexOf("!")&&(n+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var i="",o=e;0<o;--o)i+=n[Math.round(Math.random()*(n.length-1))];return i}$(document).ready(function(){recreate_checkboxes(),$.fn.ajax_factory.defaults.complete.push("recreate_checkboxes")}),recreate_checkboxes=function(){var e=$(".checkbox_replace");e.each(function(){var e=$(this);e.children("input").prop("checked")&&e.addClass("checked")}),e.click(function(){var e=$(this),t=e.children("input");t.prop("checked")?(e.removeClass("checked"),t.prop("checked",!1)):(e.addClass("checked"),t.prop("checked",!0))})},window.onpopstate=function(e){void 0!==page_handeler&&e&&e.state&&page_handeler.page(e.state.url,e.state,1)},function(ye,be,we){ye.fn.jScrollPane=function(n){function i(b,e){function w(e){var t,n,i,o,r,a,s,l,c,d,h,u,p,f,g,m=!1,v=!1;if(F=e,I===we)i=b.scrollTop(),o=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),H=b.innerWidth()+ve,R=b.innerHeight(),b.width(H),I=ye('<div class="jspPane" />').css("padding",pe).append(b.children()),B=ye('<div class="jspContainer" />').css({width:H+"px",height:R+"px"}).append(I).appendTo(b);else{if(b.css("width",""),m=F.stickToBottom&&(20<(a=q-R)&&a-A()<10),v=F.stickToRight&&(20<(r=W-H)&&r-D()<10),(r=b.innerWidth()+ve!=H||b.outerHeight()!=R)&&(H=b.innerWidth()+ve,R=b.innerHeight(),B.css({width:H+"px",height:R+"px"})),!r&&fe==W&&I.outerHeight()==q)return b.width(H),0;fe=W,I.css("width",""),b.width(H),B.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}function y(){var e=J,t=U;switch(s){case 40:ge.scrollByY(F.keyboardSpeed,!1);break;case 38:ge.scrollByY(-F.keyboardSpeed,!1);break;case 34:case 32:ge.scrollByY(R*F.scrollPagePercent,!1);break;case 33:ge.scrollByY(-R*F.scrollPagePercent,!1);break;case 39:ge.scrollByX(F.keyboardSpeed,!1);break;case 37:ge.scrollByX(-F.keyboardSpeed,!1)}return l=e!=J||t!=U}I.css("overflow","auto"),W=e.contentWidth||I[0].scrollWidth,q=I[0].scrollHeight,I.css("overflow",""),G=1<(z=q/R),(V=1<(X=W/H))||G?(b.addClass("jspScrollable"),(e=F.maintainPosition&&(U||J))&&(t=D(),n=A()),G&&(B.append(ye('<div class="jspVerticalBar" />').append(ye('<div class="jspCap jspCapTop" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragTop" />'),ye('<div class="jspDragBottom" />'))),ye('<div class="jspCap jspCapBottom" />'))),ee=B.find(">.jspVerticalBar"),te=ee.find(">.jspTrack"),K=te.find(">.jspDrag"),F.showArrows&&(oe=ye('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",C(0,-1)).bind("click.jsp",O),re=ye('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",C(0,1)).bind("click.jsp",O),F.arrowScrollOnHover&&(oe.bind("mouseover.jsp",C(0,-1,oe)),re.bind("mouseover.jsp",C(0,1,re))),k(te,F.verticalArrowPositions,oe,re)),ne=R,B.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ne-=ye(this).outerHeight()}),K.hover(function(){K.addClass("jspHover")},function(){K.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",O),K.addClass("jspActive");var t=e.pageY-K.position().top;return ye("html").bind("mousemove.jsp",function(e){$(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),x()),V&&(B.append(ye('<div class="jspHorizontalBar" />').append(ye('<div class="jspCap jspCapLeft" />'),ye('<div class="jspTrack" />').append(ye('<div class="jspDrag" />').append(ye('<div class="jspDragLeft" />'),ye('<div class="jspDragRight" />'))),ye('<div class="jspCap jspCapRight" />'))),ae=B.find(">.jspHorizontalBar"),se=ae.find(">.jspTrack"),Q=se.find(">.jspDrag"),F.showArrows&&(de=ye('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",C(-1,0)).bind("click.jsp",O),he=ye('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",C(1,0)).bind("click.jsp",O),F.arrowScrollOnHover&&(de.bind("mouseover.jsp",C(-1,0,de)),he.bind("mouseover.jsp",C(1,0,he))),k(se,F.horizontalArrowPositions,de,he)),Q.hover(function(){Q.addClass("jspHover")},function(){Q.removeClass("jspHover")}).bind("mousedown.jsp",function(e){ye("html").bind("dragstart.jsp selectstart.jsp",O),Q.addClass("jspActive");var t=e.pageX-Q.position().left;return ye("html").bind("mousemove.jsp",function(e){L(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),le=B.innerWidth(),_()),function(){{var e,t;V&&G&&(e=se.outerHeight(),t=te.outerWidth(),ne-=e,ye(ae).find(">.jspCap:visible,>.jspArrow").each(function(){le+=ye(this).outerWidth()}),le-=t,R-=t,H-=e,se.parent().append(ye('<div class="jspCorner" />').css("width",e+"px")),x(),_())}V&&I.width(B.outerWidth()-ve+"px"),q=I.outerHeight(),z=q/R,V&&((ce=Math.ceil(1/X*le))>F.horizontalDragMaxWidth?ce=F.horizontalDragMaxWidth:ce<F.horizontalDragMinWidth&&(ce=F.horizontalDragMinWidth),Q.width(ce+"px"),Z=le-ce,S(J)),G&&((ie=Math.ceil(1/z*ne))>F.verticalDragMaxHeight?ie=F.verticalDragMaxHeight:ie<F.verticalDragMinHeight&&(ie=F.verticalDragMinHeight),K.height(ie+"px"),Y=ne-ie,M(U))}(),e&&(E(v?W-H:t,!1),N(m?q-R:n,!1)),I.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){P(e.target,!1)}),B.unbind(me).bind(me,function(e,t,n,i){var o=J,r=U,e=e.deltaFactor||F.mouseWheelSpeed;return ge.scrollBy(n*e,-i*e,!1),o==J&&r==U}),g=!1,B.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];d=D(),h=A(),u=e.pageX,p=e.pageY,g=!(f=!1)}).bind("touchmove.jsp",function(e){if(g){var t=e.originalEvent.touches[0],n=J,e=U;return ge.scrollTo(d+u-t.pageX,h+p-t.pageY),f=f||5<Math.abs(u-t.pageX)||5<Math.abs(p-t.pageY),n==J&&e==U}}).bind("touchend.jsp",function(){g=!1}).bind("click.jsp-touchclick",function(){return f?f=!1:void 0}),F.enableKeyboardNavigation&&(c=[],V&&c.push(ae[0]),G&&c.push(ee[0]),I.focus(function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||c.length&&ye(e.target).closest(c).length){var t=J,n=U;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=e.keyCode,y();break;case 35:N(q-R),s=null;break;case 36:N(0),s=null}return!(l=e.keyCode==s&&t!=J||n!=U)}}).bind("keypress.jsp",function(e){return e.keyCode==s&&y(),!l}),F.hideFocus?(b.css("outline","none"),"hideFocus"in B[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in B[0]&&b.attr("hideFocus",!1))),F.clickOnTrack&&(T(),G&&te.bind("mousedown.jsp",function(i){if(i.originalTarget===we||i.originalTarget==i.currentTarget){var o,r=ye(this),e=r.offset(),a=i.pageY-e.top-U,s=!0,l=function(){var e=r.offset(),t=i.pageY-e.top-ie/2,n=R*F.scrollPagePercent,e=Y*n/(q-R);if(a<0)t<U-e?ge.scrollByY(-n):$(t);else{if(!(0<a))return void c();U+e<t?ge.scrollByY(n):$(t)}o=setTimeout(l,s?F.initialDelay:F.trackClickRepeatFreq),s=!1},c=function(){o&&clearTimeout(o),o=null,ye(document).unbind("mouseup.jsp",c)};return l(),ye(document).bind("mouseup.jsp",c),!1}}),V&&se.bind("mousedown.jsp",function(i){if(i.originalTarget===we||i.originalTarget==i.currentTarget){var o,r=ye(this),e=r.offset(),a=i.pageX-e.left-J,s=!0,l=function(){var e=r.offset(),t=i.pageX-e.left-ce/2,n=H*F.scrollPagePercent,e=Z*n/(W-H);if(a<0)t<J-e?ge.scrollByX(-n):L(t);else{if(!(0<a))return void c();J+e<t?ge.scrollByX(n):L(t)}o=setTimeout(l,s?F.initialDelay:F.trackClickRepeatFreq),s=!1},c=function(){o&&clearTimeout(o),o=null,ye(document).unbind("mouseup.jsp",c)};return l(),ye(document).bind("mouseup.jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,n=escape(location.hash.substr(1));try{e=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}e.length&&I.find(n)&&(0===B.scrollTop()?t=setInterval(function(){0<B.scrollTop()&&(P(e,!0),ye(document).scrollTop(B.position().top),clearInterval(t))},50):(P(e,!0),ye(document).scrollTop(B.position().top)))}}(),F.hijackInternalLinks&&(ye(document.body).data("jspHijack")||(ye(document.body).data("jspHijack",!0),ye(document.body).delegate("a[href*=#]","click",function(e){var t,n=this.href.substr(0,this.href.indexOf("#")),i=location.href;if(n===(i=-1!==location.href.indexOf("#")?location.href.substr(0,location.href.indexOf("#")):i)){n=escape(this.href.substr(this.href.indexOf("#")+1));try{t=ye("#"+n+', a[name="'+n+'"]')}catch(e){return}t.length&&((i=t.closest(".jspScrollable")).data("jsp").scrollToElement(t,!0),i[0].scrollIntoView&&(n=ye(be).scrollTop(),((t=t.offset().top)<n||t>n+ye(be).height())&&i[0].scrollIntoView()),e.preventDefault())}})))):(b.removeClass("jspScrollable"),I.css({top:0,left:0,width:B.width()-ve}),B.unbind(me),I.find(":input,a").unbind("focus.jsp"),b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),T()),F.autoReinitialise&&!ue?ue=setInterval(function(){w(F)},F.autoReinitialiseDelay):!F.autoReinitialise&&ue&&clearInterval(ue),i&&b.scrollTop(0)&&N(i,!1),o&&b.scrollLeft(0)&&E(o,!1),b.trigger("jsp-initialised",[V||G])}function x(){te.height(ne+"px"),U=0,t=F.verticalGutter+te.outerWidth(),I.width(H-t-ve);try{0===ee.position().left&&I.css("margin-left",t+"px")}catch(e){}}function _(){B.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){le-=ye(this).outerWidth()}),se.width(le+"px"),J=0}function k(e,t,n,i){var o="before",r="after";(t="os"==t?/Mac/.test(navigator.platform)?"after":"split":t)==o?r=t:t==r&&(o=t,t=n,n=i,i=t),e[o](n)[r](i)}function C(e,t,n){return function(){return function(e,t,n,i){n=ye(n).addClass("jspActive");function o(){0!==e&&ge.scrollByX(e*F.arrowButtonSpeed),0!==t&&ge.scrollByY(t*F.arrowButtonSpeed),a=setTimeout(o,s?F.initialDelay:F.arrowRepeatFreq),s=!1}var r,a,s=!0;o(),r=i?"mouseout.jsp":"mouseup.jsp",(i=i||ye("html")).bind(r,function(){n.removeClass("jspActive"),a&&clearTimeout(a),a=null,i.unbind(r)})}(e,t,this,n),this.blur(),!1}}function T(){se&&se.unbind("mousedown.jsp"),te&&te.unbind("mousedown.jsp")}function j(){ye("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),K&&K.removeClass("jspActive"),Q&&Q.removeClass("jspActive")}function $(e,t){G&&(e<0?e=0:Y<e&&(e=Y),(t=t===we?F.animateScroll:t)?ge.animate(K,"top",e,M):(K.css("top",e),M(e)))}function M(e){e===we&&(e=K.position().top),B.scrollTop(0);var t,n=0===(U=e),i=U==Y,o=-(e/Y)*(q-R);r==n&&s==i||(r=n,s=i,b.trigger("jsp-arrow-change",[r,s,a,l])),t=n,e=i,F.showArrows&&(oe[t?"addClass":"removeClass"]("jspDisabled"),re[e?"addClass":"removeClass"]("jspDisabled")),I.css("top",o),b.trigger("jsp-scroll-y",[-o,n,i]).trigger("scroll")}function L(e,t){V&&(e<0?e=0:Z<e&&(e=Z),(t=t===we?F.animateScroll:t)?ge.animate(Q,"left",e,S):(Q.css("left",e),S(e)))}function S(e){e===we&&(e=Q.position().left),B.scrollTop(0);var t,n=0===(J=e),i=J==Z,o=-(e/Z)*(W-H);a==n&&l==i||(a=n,l=i,b.trigger("jsp-arrow-change",[r,s,a,l])),t=n,e=i,F.showArrows&&(de[t?"addClass":"removeClass"]("jspDisabled"),he[e?"addClass":"removeClass"]("jspDisabled")),I.css("left",o),b.trigger("jsp-scroll-x",[-o,n,i]).trigger("scroll")}function N(e,t){$(e/(q-R)*Y,t)}function E(e,t){L(e/(W-H)*Z,t)}function P(e,t,n){var i,o,r,a,s,l,c=0,d=0;try{i=ye(e)}catch(e){return}for(a=i.outerHeight(),o=i.outerWidth(),B.scrollTop(0),B.scrollLeft(0);!i.is(".jspPane");)if(c+=i.position().top,d+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;e=(r=A())+R,c<r||t?s=c-F.horizontalGutter:e<c+a&&(s=c-R+a+F.horizontalGutter),isNaN(s)||N(s,n),s=(a=D())+H,d<a||t?l=d-F.horizontalGutter:s<d+o&&(l=d-H+o+F.horizontalGutter),isNaN(l)||E(l,n)}function D(){return-I.position().left}function A(){return-I.position().top}function O(){return!1}var F,I,H,R,B,W,q,X,z,G,V,K,Y,U,Q,Z,J,ee,te,t,ne,ie,oe,re,ae,se,le,ce,de,he,ue,pe,fe,ge=this,r=!0,a=!0,s=!1,l=!1,n=b.clone(!1,!1).empty(),me=ye.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",ve="border-box"===b.css("box-sizing")?pe=0:(pe=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0));ye.extend(ge,{reinitialise:function(e){w(e=ye.extend({},F,e))},scrollToElement:function(e,t,n){P(e,t,n)},scrollTo:function(e,t,n){E(e,n),N(t,n)},scrollToX:function(e,t){E(e,t)},scrollToY:function(e,t){N(e,t)},scrollToPercentX:function(e,t){E(e*(W-H),t)},scrollToPercentY:function(e,t){N(e*(q-R),t)},scrollBy:function(e,t,n){ge.scrollByX(e,n),ge.scrollByY(t,n)},scrollByX:function(e,t){L((D()+Math[e<0?"floor":"ceil"](e))/(W-H)*Z,t)},scrollByY:function(e,t){$((A()+Math[e<0?"floor":"ceil"](e))/(q-R)*Y,t)},positionDragX:function(e,t){L(e,t)},positionDragY:function(e,t){$(e,t)},animate:function(e,t,n,i){var o={};o[t]=n,e.animate(o,{duration:F.animateDuration,easing:F.animateEase,queue:!1,step:i})},getContentPositionX:D,getContentPositionY:A,getContentWidth:function(){return W},getContentHeight:function(){return q},getPercentScrolledX:function(){return D()/(W-H)},getPercentScrolledY:function(){return A()/(q-R)},getIsScrollableH:function(){return V},getIsScrollableV:function(){return G},getContentPane:function(){return I},scrollToBottom:function(e){$(Y,e)},hijackInternalLinks:ye.noop,destroy:function(){var e,t;e=A(),t=D(),b.removeClass("jspScrollable").unbind(".jsp"),b.replaceWith(n.append(I.children())),n.scrollTop(e),n.scrollLeft(t),ue&&clearInterval(ue)}}),w(e)}return n=ye.extend({},ye.fn.jScrollPane.defaults,n),ye.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){n[this]=n[this]||n.speed}),this.each(function(){var e=ye(this),t=e.data("jsp");t?t.reinitialise(n):(ye("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new i(e,n),e.data("jsp",t))})},ye.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:we,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(e){"function"==typeof define&&define.amd?define(["./jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(l){var c,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(l.event.fixHooks)for(var n=e.length;n;)l.event.fixHooks[e[--n]]=l.event.mouseHooks;var i=l.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],o,!1);else this.onmousewheel=o;l.data(this,"mousewheel-line-height",i.getLineHeight(this)),l.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],o,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(l(e)["offsetParent"in l.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return l(e).height()},settings:{adjustOldDeltas:!0}};function o(e){var t,n,i=e||window.event,o=h.call(arguments,1),r=0,a=0,s=0;if((e=l.event.fix(i)).type="mousewheel","detail"in i&&(s=-1*i.detail),"wheelDelta"in i&&(s=i.wheelDelta),"wheelDeltaY"in i&&(s=i.wheelDeltaY),"wheelDeltaX"in i&&(a=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(a=-1*s,s=0),r=0===s?a:s,"deltaY"in i&&(r=s=-1*i.deltaY),"deltaX"in i&&(a=i.deltaX,0===s&&(r=-1*a)),0!==s||0!==a)return 1===i.deltaMode?(r*=n=l.data(this,"mousewheel-line-height"),s*=n,a*=n):2===i.deltaMode&&(r*=n=l.data(this,"mousewheel-page-height"),s*=n,a*=n),t=Math.max(Math.abs(s),Math.abs(a)),(!d||t<d)&&p(i,d=t)&&(d/=40),p(i,t)&&(r/=40,a/=40,s/=40),r=Math[1<=r?"floor":"ceil"](r/d),a=Math[1<=a?"floor":"ceil"](a/d),s=Math[1<=s?"floor":"ceil"](s/d),e.deltaX=a,e.deltaY=s,e.deltaFactor=d,e.deltaMode=0,o.unshift(e,r,a,s),c&&clearTimeout(c),c=setTimeout(u,200),(l.event.dispatch||l.event.handle).apply(this,o)}function u(){d=null}function p(e,t){return i.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}l.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});var page_handeler={defaults:{complete:[]},init:function(){$("body").on("click","a",function(e){void 0!==$(this).data("page-post")&&(e.preventDefault(),this.page($(this).attr("href"),$(this).data("page-post")))}),$.fn.ajax_factory.defaults.complete.push(function(e){page_handeler.page_callback(e)}),$.fn.ajax_factory.defaults.load_pages_ajax=!0},page_callback:function(e){e&&e.push_state&&((e=$(e.push_state.id)).length&&this.toggle_page(e))},toggle_page:function(e){var t,n;2!=e.css("z-index")&&(t=$("#main"),e.hide(),t.stop(!0,!0).addClass("flipped"),n=t.children("div"),setTimeout(function(){n.hide(),e.show(),t.removeClass("flipped"),$("a").removeClass("sel").parent("li").removeClass("sel"),$('a[href="'+e.data("url")+'"]').addClass("sel").parent("li").addClass("sel"),t.animate({scrollTo:0}),page_handeler.defaults.complete&&page_handeler.defaults.complete.each(function(e){"function"==typeof e?e():window[e]()})},300))},page:function(e,t,n){var i=t.module,o=t.act;t.is_popped=n||0;var r=$("div[data-url='"+e+"']");r.length?(n||window.history.pushState(t,"",e),this.toggle_page(r),this.perform_page_actions(t.actions,e)):(delete t.module,delete t.act,t.url=e,$.fn.ajax_factory(i,o,t))},perform_page_actions:function(e,n){void 0!==e&&e.each(function(e){var t=e[3]||{};t.post_as_url=n,$.fn.ajax_factory(e[0],e[1],e[2]||{},t)})}},map,main_scrollpane,throttleTimeout,$body;function Airspace(){this.visible={PROHIBITED:!1,RESTRICTED:!1,DANGER:!1,OTHER:!1,CTRCTA:!1,ALL:!1},this.loaded={PROHIBITED:!1,RESTRICTED:!1,DANGER:!1,OTHER:!1,CTRCTA:!1,ALL:!1},this._airspace=[],this.varyWithTrack=!1,this.maximum_base=7500,this.enabled=!1,this.isLoaded=function(e){return this.loaded[e]},this.setLoaded=function(e,t){this.loaded[e]=t},this.isVisible=function(e){if(e)return this.visible[e];var t=!0;for(e in this.visible)this.visible.hasOwnProperty(e)&&this.isVisible(e)&&(t=!1);return!t},this.setVisible=function(e,t){if(e)t&&!this.isLoaded(e)&&this.load(e),(this.visible[e]=t)?$("#airspace_tree #"+e).addClass("visible"):$("#airspace_tree #"+e).removeClass("visible");else{for(e in this.visible)this.visible.hasOwnProperty(e)&&this.setVisible(e,t);t?$("#airspace_tree .all").addClass("visible"):$("#airspace_tree .all").removeClass("visible")}},this.getType=function(e){switch(e){case 0:return"PROHIBITED";case 1:return"RESTRICTED";case 2:return"DANGER";case 3:return"OTHER";case 4:return"CTRCTA"}return!1},this.setHeight=function(e){this.maximum_base=e},this.loadAll=function(e){this.load("PROHIBITED"),this.load("RESTRICTED"),this.load("OTHER"),this.load("DANGER"),this.load("CTRCTA"),this.visible={PROHIBITED:e,RESTRICTED:e,DANGER:e,OTHER:e,CTRCTA:e,ALL:e}};this.reload=function(o){this._airspace.each(function(e,t,n){var i;n.varyWithTrack&&void 0!==o?(e.level>=o/.3048||e.top<=o/.3048||e.level>=n.maximum_base)&&(e.poly.setMap(null),e.visible=!1):(i=e._class,!n.isVisible(i)||e.level>=n.maximum_base?e.visible&&(e.poly.setMap(null),e.visible=!1):e.visible||(e.poly.setMap(map.internal_map),e.visible=!0))},this)},this.toggle=function(e){e=this.getType(e),this.setVisible(e,!this.isVisible(e)),this.reload()},this.add=function(e,t,n,i,o,r,a,s,l,c){c=new google.maps.Polygon({strokeColor:r,strokeWeight:o,clickable:!0,strokeOpacity:a,path:google.maps.geometry.encoding.decodePath(i),fillColor:s,fillOpacity:l,zIndex:185-t,title:c});this._airspace.push({poly:c,_class:e,level:t,top:n,visible:!1})}}$(document).ready(function(){page_handeler.init()}),function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];function benchmark(e,t){log(e+","+((new Date).getTime()-t.getTime())+"ms")}function log(e){"undefined"!=typeof console&&void 0!==console.debug?console.log(e):alert(e)}function buildParserCache(e,t){var n;if(e.config.debug&&(n=""),0!=e.tBodies.length){var i=e.tBodies[0].rows;if(i[0])for(var o=[],r=i[0].cells.length,a=0;a<r;a++){var s=!1;$.metadata&&$(t[a]).metadata()&&$(t[a]).metadata().sorter?s=getParserById($(t[a]).metadata().sorter):e.config.headers[a]&&e.config.headers[a].sorter&&(s=getParserById(e.config.headers[a].sorter)),s=s||detectParserForColumn(e,i,-1,a),e.config.debug&&(n+="column:"+a+" parser:"+s.id+"\n"),o.push(s)}return e.config.debug&&log(n),o}}function detectParserForColumn(e,t,n,i){for(var o=parsers.length,r=!1,a=!1,s=!0;""==a&&s;)t[++n]?(r=getNodeFromRowAndCellIndex(t,n,i),a=trimAndGetNodeText(e.config,r),e.config.debug&&log("Checking if value was empty on row:"+n)):s=!1;for(var l=1;l<o;l++)if(parsers[l].is(a,e,r))return parsers[l];return parsers[0]}function getNodeFromRowAndCellIndex(e,t,n){return e[t].cells[n]}function trimAndGetNodeText(e,t){return $.trim(getElementText(e,t))}function getParserById(e){for(var t=parsers.length,n=0;n<t;n++)if(parsers[n].id.toLowerCase()==e.toLowerCase())return parsers[n];return!1}function buildCache(e){var t;e.config.debug&&(t=new Date);for(var n=e.tBodies[0]&&e.tBodies[0].rows.length||0,i=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,o=e.config.parsers,r={row:[],normalized:[]},a=0;a<n;++a){var s=$(e.tBodies[0].rows[a]),l=[];if(s.hasClass(e.config.cssChildRow))r.row[r.row.length-1]=r.row[r.row.length-1].add(s);else{r.row.push(s);for(var c=0;c<i;++c)l.push(o[c].format(getElementText(e.config,s[0].cells[c]),e,s[0].cells[c]));l.push(r.normalized.length),r.normalized.push(l),l=null}}return e.config.debug&&benchmark("Building cache for "+n+" rows:",t),r}function getElementText(e,t){return t?(e.supportsTextContent||(e.supportsTextContent=t.textContent||!1),"simple"==e.textExtraction?e.supportsTextContent?t.textContent:(t.childNodes[0]&&t.childNodes[0].hasChildNodes()?t.childNodes[0]:t).innerHTML:"function"==typeof e.textExtraction?e.textExtraction(t):$(t).text()):""}function appendToTable(e,t){var n;e.config.debug&&(n=new Date);for(var i=t.row,o=t.normalized,r=o.length,a=o[0].length-1,s=$(e.tBodies[0]),l=[],c=0;c<r;c++){var d=o[c][a];if(l.push(i[d]),!e.config.appender)for(var h=i[d].length,u=0;u<h;u++)s[0].appendChild(i[d][u])}e.config.appender&&e.config.appender(e,l),l=null,e.config.debug&&benchmark("Rebuilt table:",n),applyWidget(e),setTimeout(function(){$(e).trigger("sortEnd")},0)}function buildHeaders(n){var e;n.config.debug&&(e=new Date);$.metadata;var i=computeTableHeaderCellIndexes(n);return $tableHeaders=$(n.config.selectorHeaders,n).each(function(e){var t;this.column=i[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(n.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(n,e))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(n,e)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(n,e)),this.sortDisabled||(t=$(this).addClass(n.config.cssHeader),n.config.onRenderHeader&&n.config.onRenderHeader.apply(t)),n.config.headerList[e]=this}),n.config.debug&&(benchmark("Built headers:",e),log($tableHeaders)),$tableHeaders}function computeTableHeaderCellIndexes(e){for(var t=[],n={},i=e.getElementsByTagName("THEAD")[0].getElementsByTagName("TR"),o=0;o<i.length;o++)for(var r=i[o].cells,a=0;a<r.length;a++){var s,l=r[a],c=l.parentNode.rowIndex,d=c+"-"+l.cellIndex,h=l.rowSpan||1,u=l.colSpan||1;void 0===t[c]&&(t[c]=[]);for(var p=0;p<t[c].length+1;p++)if(void 0===t[c][p]){s=p;break}n[d]=s;for(p=c;p<c+h;p++){void 0===t[p]&&(t[p]=[]);for(var f=t[p],g=s;g<s+u;g++)f[g]="x"}}return n}function checkCellColSpan(e,t,n){for(var i=[],o=e.tHead.rows,r=o[n].cells,a=0;a<r.length;a++){var s=r[a];1<s.colSpan?i=i.concat(checkCellColSpan(e,headerArr,n++)):(1==e.tHead.length||1<s.rowSpan||!o[n+1])&&i.push(s)}return i}function checkHeaderMetadata(e){return!(!$.metadata||!1!==$(e).metadata().sorter)}function checkHeaderOptions(e,t){return!(!e.config.headers[t]||!1!==e.config.headers[t].sorter)}function checkHeaderOptionsSortingLocked(e,t){return!(!e.config.headers[t]||!e.config.headers[t].lockedOrder)&&e.config.headers[t].lockedOrder}function applyWidget(e){for(var t=e.config.widgets,n=t.length,i=0;i<n;i++)getWidgetById(t[i]).format(e)}function getWidgetById(e){for(var t=widgets.length,n=0;n<t;n++)if(widgets[n].id.toLowerCase()==e.toLowerCase())return widgets[n]}function formatSortingOrder(e){return"Number"!=typeof e?"desc"==e.toLowerCase()?1:0:1==e?1:0}function isValueInArray(e,t){for(var n=t.length,i=0;i<n;i++)if(t[i][0]==e)return 1}function setHeadersCss(e,t,n,i){t.removeClass(i[0]).removeClass(i[1]);var o=[];t.each(function(e){this.sortDisabled||(o[this.column]=$(this))});for(var r=n.length,a=0;a<r;a++)o[n[a][0]].addClass(i[n[a][1]])}function fixColumnWidth(e,t){var n;e.config.widthFixed&&(n=$("<colgroup>"),$("tr:first td",e.tBodies[0]).each(function(){n.append($("<col>").css("width",$(this).width()))}),$(e).prepend(n))}function updateHeaderSortCount(e,t){for(var n=e.config,i=t.length,o=0;o<i;o++){var r=t[o],a=n.headerList[r[0]];a.count=r[1],a.count++}}function multisort(table,sortList,cache){var sortTime;table.config.debug&&(sortTime=new Date);for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?makeSortFunction("text",0==order?"asc":"desc",c):makeSortFunction("numeric",0==order?"asc":"desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(e,t,n){var i="a["+n+"]",n="b["+n+"]";return"text"==e&&"asc"==t?"("+i+" == "+n+" ? 0 : ("+i+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : ("+i+" < "+n+") ? -1 : 1 )));":"text"==e&&"desc"==t?"("+i+" == "+n+" ? 0 : ("+i+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : ("+n+" < "+i+") ? -1 : 1 )));":"numeric"==e&&"asc"==t?"("+i+" === null && "+n+" === null) ? 0 :("+i+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : "+i+" - "+n+"));":"numeric"==e&&"desc"==t?"("+i+" === null && "+n+" === null) ? 0 :("+i+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : "+n+" - "+i+"));":void 0}function makeSortText(e){return 1}function makeSortTextDesc(e){return 1}function makeSortNumeric(e){return 1}function makeSortNumericDesc(e){return 1}function sortText(e,t){return table.config.sortLocaleCompare?e.localeCompare(t):e<t?-1:t<e}function sortTextDesc(e,t){return table.config.sortLocaleCompare?t.localeCompare(e):t<e?-1:e<t}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark,this.construct=function(e){return this.each(function(){var s,l,c,d,h;this.tHead&&this.tBodies&&(this.config={},c=$.extend(this.config,$.tablesorter.defaults,e),s=$(this),$.data(this,"tablesorter",c),l=buildHeaders(this),this.config.parsers=buildParserCache(this,l),d=buildCache(this),h=[c.cssDesc,c.cssAsc],fixColumnWidth(this),l.click(function(e){var t=s[0].tBodies[0]&&s[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&0<t){s.trigger("sortStart");$(this);var n=this.column;if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),e[c.sortMultiSortKey])if(isValueInArray(n,c.sortList))for(a=0;a<c.sortList.length;a++){var i=c.sortList[a],o=c.headerList[i[0]];i[0]==n&&(o.count=i[1],o.count++,i[1]=o.count%2)}else c.sortList.push([n,this.order]);else{if(c.sortList=[],null!=c.sortForce)for(var r=c.sortForce,a=0;a<r.length;a++)r[a][0]!=n&&c.sortList.push(r[a]);c.sortList.push([n,this.order])}return setTimeout(function(){setHeadersCss(s[0],l,c.sortList,h),appendToTable(s[0],multisort(s[0],c.sortList,d))},1),!1}}).mousedown(function(){if(c.cancelSelection)return!(this.onselectstart=function(){return!1})}),s.bind("update",function(){var e=this;setTimeout(function(){e.config.parsers=buildParserCache(e,l),d=buildCache(e)},1)}).bind("updateCell",function(e,t){var n=this.config,i=[t.parentNode.rowIndex-1,t.cellIndex];d.normalized[i[0]][i[1]]=n.parsers[i[1]].format(getElementText(n,t),t)}).bind("sorton",function(e,t){$(this).trigger("sortStart"),c.sortList=t;t=c.sortList;updateHeaderSortCount(this,t),setHeadersCss(this,l,t,h),appendToTable(this,multisort(this,t,d))}).bind("appendCache",function(){appendToTable(this,d)}).bind("applyWidgetId",function(e,t){getWidgetById(t).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(c.sortList=$(this).metadata().sortlist),0<c.sortList.length&&s.trigger("sorton",[c.sortList]),applyWidget(this))})},this.addParser=function(e){for(var t=parsers.length,n=!0,i=0;i<t;i++)parsers[i].id.toLowerCase()==e.id.toLowerCase()&&(n=!1);n&&parsers.push(e)},this.addWidget=function(e){widgets.push(e)},this.formatFloat=function(e){e=parseFloat(e);return isNaN(e)?0:e},this.formatInt=function(e){e=parseInt(e);return isNaN(e)?0:e},this.isDigit=function(e,t){return/^[-+]?\d*$/.test($.trim(e.replace(/[,.']/g,"")))},this.clearTableBody=function(e){$.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(e.tBodies[0]):e.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(e){return!0},format:function(e){return $.trim(e.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(e,t){t=t.config;return $.tablesorter.isDigit(e,t)},format:function(e){return $.tablesorter.formatFloat(e)},type:"numeric"}),ts.addParser({id:"currency",is:function(e){return/^[£$€?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[£$€]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(e){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){for(var t=e.split("."),n="",i=t.length,o=0;o<i;o++){var r=t[o];2==r.length?n+="0"+r:n+=r}return $.tablesorter.formatFloat(n)},type:"numeric"}),ts.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(""!=e?new Date(e.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(e){return/\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return $.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(e){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){t=t.config;return e=e.replace(/\-/g,"/"),"us"==t.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==t.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"dd/mm/yy"!=t.dateFormat&&"dd-mm-yy"!=t.dateFormat||(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(e){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(e){return!1},format:function(e,t,n){t=t.config,t=t.parserMetadataName||"sortValue";return $(n).metadata()[t]},type:"numeric"}),ts.addParser({id:"uk_date",is:function(e){return!1},format:function(e){return e.substr(6,4)+e.substr(3,2)+e.substr(0,2)},type:"numeric"}),ts.addParser({id:"score",is:function(e){return!1},format:function(e){return e.substr(1)},type:"numeric"}),ts.addWidget({id:"zebra",format:function(t){var e;t.config.debug&&(e=new Date);var n,i,o=-1;$("tr:visible",t.tBodies[0]).each(function(e){(n=$(this)).hasClass(t.config.cssChildRow)||o++,i=o%2==0,n.removeClass(t.config.widgetZebra.css[i?0:1]).addClass(t.config.widgetZebra.css[i?1:0])}),t.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",e)}})}(jQuery),$.tablesorter.addParser({id:"grades",is:function(e){return!1},format:function(e){return e.toLowerCase().replace(/good/,2).replace(/medium/,1).replace(/bad/,0)},type:"numeric"}),function(e,l){"use strict";l.fn.extend({collapseText:function(s){return s=l.extend({},e,s),l(this).each(function(){l(this);var e,t,n,i=l(this).data("collapse-height")||s.height,o=l(this).data("collapse-show-text")||s.showText,r=l(this).data("collapse-hide-text")||s.hideText,a=l(this).data("collapse-allow-hide")||s.allowHide;l(this).css({height:"auto"}).find("collapse-button").remove(),l(this).children().eq(0).hasClass("collapse-container")&&l(this).html(l(this).children().eq(0).html()),l(this).height()>parseInt(i)&&((e=l(this).wrapInner('<div class="collapse-container"></div>').children(".collapse-container")).css({height:i,overflow:"hidden"}),t=l('<a class="btn collapse-button collapse-button-show"/></a>').html(o),a?(n=l('<a class="btn collapse-button collapse-button-hide"></a>').html(r).hide(),t.click(function(){l(this).hide(),n.show(),e.css({height:"auto"})}),n.click(function(){l(this).hide(),t.show(),e.css({height:i})}),l(this).append(t).append(n)):(button1.click(function(){l(this).hide(),e.css({height:"auto"})}),l(this).append(t)))})}})}({height:"200px",showText:"Show more",hideText:"Show less",allowHide:!0},jQuery,(window,document)),function(d,s,a){function l(e,t,n){e=s.createElement(e);return t&&(e.id=te+t),n&&(e.style.cssText=n),d(e)}function h(){return a.innerHeight||d(a).height()}function c(e){var t=j.length,e=(q+e)%t;return e<0?t+e:e}function u(e,t){return Math.round((/%/.test(e)?("x"===t?$.width():h())/100:1)*parseInt(e,10))}function p(e,t){return e.photo||e.photoRegex.test(t)}function f(e,t){return e.retinaUrl&&1<a.devicePixelRatio?t.replace(e.photoRegex,e.retinaSuffix):t}function g(e){"contains"in b[0]&&!b[0].contains(e.target)&&(e.stopPropagation(),b.focus())}function m(){var e,t=d.data(W,ee);for(e in null==t?(F=d.extend({},J),console&&console.log&&console.log("Error: cboxElement missing settings object")):F=d.extend({},t),F)d.isFunction(F[e])&&"on"!==e.slice(0,2)&&(F[e]=F[e].call(W));F.rel=F.rel||W.rel||d(W).data("rel")||"nofollow",F.href=F.href||d(W).attr("href"),F.title=F.title||W.title,"string"==typeof F.href&&(F.href=d.trim(F.href))}function v(e,t){d(s).trigger(e),ce.trigger(e),d.isFunction(t)&&t.call(W)}function o(e){var t,n,i,o,r;V||(W=e,m(),j=d(W),q=0,"nofollow"!==F.rel&&(j=d("."+ne).filter(function(){var e,t=d.data(this,ee);return(e=t?d(this).data("rel")||t.rel||this.rel:e)===F.rel}),-1===(q=j.index(W))&&(j=j.add(W),q=j.length-1)),y.css({opacity:parseFloat(F.opacity),cursor:F.overlayClose?"pointer":"auto",visibility:"visible"}).show(),U&&b.add(y).removeClass(U),F.className&&b.add(y).addClass(F.className),U=F.className,F.closeButton?A.html(F.close).appendTo(x):A.appendTo("<div/>"),z||(z=G=!0,b.css({visibility:"hidden",display:"block"}),M=l(de,"LoadedContent","width:0; height:0; overflow:hidden"),x.css({width:"",height:""}).append(M),I=_.height()+T.height()+x.outerHeight(!0)-x.height(),H=k.width()+C.width()+x.outerWidth(!0)-x.width(),R=M.outerHeight(!0),B=M.outerWidth(!0),F.w=u(F.initialWidth,"x"),F.h=u(F.initialHeight,"y"),M.css({width:"",height:F.h}),Y.position(),v(ie,F.onOpen),O.add(N).hide(),b.focus(),F.trapFocus&&s.addEventListener&&(s.addEventListener("focus",g,!0),ce.one(se,function(){s.removeEventListener("focus",g,!0)})),F.returnFocus&&ce.one(se,function(){d(W).focus()})),o=Y.prep,r=++he,X=!(G=!0),W=j[q],m(),v(le),v(oe,F.onLoad),F.h=F.height?u(F.height,"y")-R-I:F.innerHeight&&u(F.innerHeight,"y"),F.w=F.width?u(F.width,"x")-B-H:F.innerWidth&&u(F.innerWidth,"x"),F.mw=F.w,F.mh=F.h,F.maxWidth&&(F.mw=u(F.maxWidth,"x")-B-H,F.mw=F.w&&F.w<F.mw?F.w:F.mw),F.maxHeight&&(F.mh=u(F.maxHeight,"y")-R-I,F.mh=F.h&&F.h<F.mh?F.h:F.mh),t=F.href,K=setTimeout(function(){S.show()},100),F.inline?(i=l(de).hide().insertBefore(d(t)[0]),ce.one(le,function(){i.replaceWith(M.children())}),o(d(t))):F.iframe?o(" "):F.html?o(F.html):p(F,t)?(t=f(F,t),X=s.createElement("img"),d(X).addClass(te+"Photo").bind("error",function(){F.title=!1,o(l(de,"Error").html(F.imgError))}).one("load",function(){var e;r===he&&(d.each(["alt","longdesc","aria-describedby"],function(e,t){var n=d(W).attr(t)||d(W).attr("data-"+t);n&&X.setAttribute(t,n)}),F.retinaImage&&1<a.devicePixelRatio&&(X.height=X.height/a.devicePixelRatio,X.width=X.width/a.devicePixelRatio),F.scalePhotos&&(n=function(){X.height-=X.height*e,X.width-=X.width*e},F.mw&&X.width>F.mw&&(e=(X.width-F.mw)/X.width,n()),F.mh&&X.height>F.mh&&(e=(X.height-F.mh)/X.height,n())),F.h&&(X.style.marginTop=Math.max(F.mh-X.height,0)/2+"px"),j[1]&&(F.loop||j[q+1])&&(X.style.cursor="pointer",X.onclick=function(){Y.next()}),X.style.width=X.width+"px",X.style.height=X.height+"px",setTimeout(function(){o(X)},1))}),setTimeout(function(){X.src=t},1)):t&&L.load(t,F.data,function(e,t){r===he&&o("error"===t?l(de,"Error").html(F.xhrError):d(this).contents())}))}function r(){!b&&s.body&&(Q=!1,$=d(a),b=l(de).attr({id:ee,class:!1===d.support.opacity?te+"IE":"",role:"dialog",tabindex:"-1"}).hide(),y=l(de,"Overlay").hide(),S=d([l(de,"LoadingOverlay")[0],l(de,"LoadingGraphic")[0]]),w=l(de,"Wrapper"),x=l(de,"Content").append(N=l(de,"Title"),E=l(de,"Current"),D=d('<button type="button"/>').attr({id:te+"Previous"}),P=d('<button type="button"/>').attr({id:te+"Next"}),e=l("button","Slideshow"),S),A=d('<button type="button"/>').attr({id:te+"Close"}),w.append(l(de).append(l(de,"TopLeft"),_=l(de,"TopCenter"),l(de,"TopRight")),l(de,!1,"clear:left").append(k=l(de,"MiddleLeft"),x,C=l(de,"MiddleRight")),l(de,!1,"clear:left").append(l(de,"BottomLeft"),T=l(de,"BottomCenter"),l(de,"BottomRight"))).find("div div").css({float:"left"}),L=l(de,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=P.add(D).add(E).add(e),d(s.body).append(y,b.append(w,L)))}var y,b,w,x,_,k,C,T,j,$,M,L,S,N,E,e,P,D,A,O,F,I,H,R,B,W,q,X,z,G,V,K,Y,U,Q,t,n,i,Z,J={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},ee="colorbox",te="cbox",ne=te+"Element",ie=te+"_open",oe=te+"_load",re=te+"_complete",ae=te+"_cleanup",se=te+"_closed",le=te+"_purge",ce=d("<a/>"),de="div",he=0,ue={},pe=(i=te+"Slideshow_",Z="click."+te,function(){t?F.slideshow||(ce.unbind(ae,ye),ye()):F.slideshow&&j[1]&&(t=!0,ce.one(ae,ye),(F.slideshowAuto?me:ve)(),e.show())});function fe(){clearTimeout(n)}function ge(){(F.loop||j[q+1])&&(fe(),n=setTimeout(Y.next,F.slideshowSpeed))}function me(){e.html(F.slideshowStop).unbind(Z).one(Z,ve),ce.bind(re,ge).bind(oe,fe),b.removeClass(i+"off").addClass(i+"on")}function ve(){fe(),ce.unbind(re,ge).unbind(oe,fe),e.html(F.slideshowStart).unbind(Z).one(Z,function(){Y.next(),me()}),b.removeClass(i+"on").addClass(i+"off")}function ye(){t=!1,e.hide(),fe(),ce.unbind(re,ge).unbind(oe,fe),b.removeClass(i+"off "+i+"on")}d.colorbox||(d(r),(Y=d.fn[ee]=d[ee]=function(e,t){var n=this;if(e=e||{},r(),b&&(Q||(Q=!0,P.click(function(){Y.next()}),D.click(function(){Y.prev()}),A.click(function(){Y.close()}),y.click(function(){F.overlayClose&&Y.close()}),d(s).bind("keydown."+te,function(e){var t=e.keyCode;z&&F.escKey&&27===t&&(e.preventDefault(),Y.close()),z&&F.arrowKey&&j[1]&&!e.altKey&&(37===t?(e.preventDefault(),D.click()):39===t&&(e.preventDefault(),P.click()))}),d.isFunction(d.fn.on)?d(s).on("click."+te,"."+ne,i):d("."+ne).live("click."+te,i)),1)){if(d.isFunction(n))n=d("<a/>"),e.open=!0;else if(!n[0])return n;t&&(e.onComplete=t),n.each(function(){d.data(this,ee,d.extend({},d.data(this,ee)||J,e))}).addClass(ne),(d.isFunction(e.open)&&e.open.call(n)||e.open)&&o(n[0])}function i(e){1<e.which||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),o(this))}return n}).position=function(t,e){function n(){_[0].style.width=T[0].style.width=x[0].style.width=parseInt(b[0].style.width,10)-H+"px",x[0].style.height=k[0].style.height=C[0].style.height=parseInt(b[0].style.height,10)-I+"px"}var i,o,r,a,s=0,l=0,c=b.offset();$.unbind("resize."+te),b.css({top:-9e4,left:-9e4}),o=$.scrollTop(),r=$.scrollLeft(),F.fixed?(c.top-=o,c.left-=r,b.css({position:"fixed"})):(s=o,l=r,b.css({position:"absolute"})),l+=!1!==F.right?Math.max($.width()-F.w-B-H-u(F.right,"x"),0):!1!==F.left?u(F.left,"x"):Math.round(Math.max($.width()-F.w-B-H,0)/2),s+=!1!==F.bottom?Math.max(h()-F.h-R-I-u(F.bottom,"y"),0):!1!==F.top?u(F.top,"y"):Math.round(Math.max(h()-F.h-R-I,0)/2),b.css({top:c.top,left:c.left,visibility:"visible"}),w[0].style.width=w[0].style.height="9999px",i={width:F.w+B+H,height:F.h+R+I,top:s,left:l},t&&(a=0,d.each(i,function(e){return i[e]!==ue[e]?void(a=t):void 0}),t=a),ue=i,t||b.css(i),b.dequeue().animate(i,{duration:t||0,complete:function(){n(),G=!1,w[0].style.width=F.w+B+H+"px",w[0].style.height=F.h+R+I+"px",F.reposition&&setTimeout(function(){$.bind("resize."+te,Y.position)},1),e&&e()},step:n})},Y.resize=function(e){var t;z&&((e=e||{}).width&&(F.w=u(e.width,"x")-B-H),e.innerWidth&&(F.w=u(e.innerWidth,"x")),M.css({width:F.w}),e.height&&(F.h=u(e.height,"y")-R-I),e.innerHeight&&(F.h=u(e.innerHeight,"y")),e.innerHeight||e.height||(t=M.scrollTop(),M.css({height:"auto"}),F.h=M.height()),M.css({height:F.h}),t&&M.scrollTop(t),Y.position("none"===F.transition?0:F.speed))},Y.prep=function(e){var t,a;z&&(a="none"===F.transition?0:F.speed,M.empty().remove(),(M=l(de,"LoadedContent").append(e)).hide().appendTo(L.show()).css({width:(F.w=F.w||M.width(),F.w=F.mw&&F.mw<F.w?F.mw:F.w,F.w),overflow:F.scrolling?"auto":"hidden"}).css({height:(F.h=F.h||M.height(),F.h=F.mh&&F.mh<F.h?F.mh:F.h,F.h)}).prependTo(x),L.hide(),d(X).css({float:"none"}),t=function(){function e(){!1===d.support.opacity&&b[0].style.removeAttribute("filter")}var t,n,i=j.length,o="frameBorder",r="allowTransparency";z&&(n=function(){clearTimeout(K),S.hide(),v(re,F.onComplete)},N.html(F.title).add(M).show(),1<i?("string"==typeof F.current&&E.html(F.current.replace("{current}",q+1).replace("{total}",i)).show(),P[F.loop||q<i-1?"show":"hide"]().html(F.next),D[F.loop||q?"show":"hide"]().html(F.previous),pe(),F.preloading&&d.each([c(-1),c(1)],function(){var e,t=j[this],n=d.data(t,ee);n&&n.href?(e=n.href,d.isFunction(e)&&(e=e.call(t))):e=d(t).attr("href"),e&&p(n,e)&&(e=f(n,e),s.createElement("img").src=e)})):O.hide(),F.iframe?(o in(t=l("iframe")[0])&&(t[o]=0),r in t&&(t[r]="true"),F.scrolling||(t.scrolling="no"),d(t).attr({src:F.href,name:(new Date).getTime(),class:te+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",n).appendTo(M),ce.one(le,function(){t.src="//about:blank"}),F.fastIframe&&d(t).trigger("load")):n(),"fade"===F.transition?b.fadeTo(a,1,e):e())},"fade"===F.transition?b.fadeTo(a,0,function(){Y.position(0,t)}):Y.position(a,t))},Y.next=function(){!G&&j[1]&&(F.loop||j[q+1])&&(q=c(1),o(j[q]))},Y.prev=function(){!G&&j[1]&&(F.loop||q)&&(q=c(-1),o(j[q]))},Y.close=function(){z&&!V&&(z=!(V=!0),v(ae,F.onCleanup),$.unbind("."+te),y.fadeTo(F.fadeOut||0,0),b.stop().fadeTo(F.fadeOut||0,0,function(){b.add(y).css({opacity:1,cursor:"auto"}).hide(),v(le),M.empty().remove(),setTimeout(function(){V=!1,v(se,F.onClosed)},1)}))},Y.remove=function(){b&&(b.stop(),d.colorbox.close(),b.stop().remove(),y.remove(),V=!1,b=null,d("."+ne).removeData(ee).removeClass(ne),d(s).unbind("click."+te))},Y.element=function(){return d(W)},Y.settings=J)}(jQuery,document,window);var load_callback=new LoadCallback(load_callback||[]);function center_colorbox(){$.fn.colorbox.resize();var e=$("#colorbox"),t=e.width();t<725?e.animate({left:(725-t)/2}):e.animate({left:0})}function reload_scrollpane(){}function form_coordinates_edit(){var e=$(this).val().trim("; ");$(this).val(e);var e=e.split(";"),i=new Planner,o="";if(e.each(function(e,t){var n=new Coordinate;n.set_from_OS(e),n.is_valid_gridref()?i.push(n):o="Coordinate "+(+t+1)+" is not valid"}),!o.length)switch(i.count){case 0:o="";break;case 1:o="Please enter at least two coordinates";break;case 2:o="Flight Type: Open Distance, Score: "+i.get_total_distance().round(2)+" before multipliers";break;case 3:o=i[0]==i[2]?"Flight Type: Out & Return, Score: "+i.get_total_distance().round(2)+" before multipliers":"Flight Type: Open Distance, Score: "+i.get_total_distance().round(2)+" before multipliers";break;case 4:o=i[0]==i[4]?"Flight Type: Triangle, Score: "+i.get_total_distance().round(2)+" before multipliers":"Flight Type: Open Distance, Score: "+i.get_total_distance().round(2)+" before multipliers";break;case 5:o="Flight Type: Open Distance, Score: "+i.get_total_distance().round(2)+" before multipliers";break;default:o="You can only enter 5 coordinates"}$(this).parents("form").find(".defined_info").html(o)}function form_coordinates_init(){$(".form-group.coordinates input").change(form_coordinates_edit)}function Graph(e){this.$container=e,this.$a_canvas=null,this.width=this.$container.width(),this.height=this.$container.height(),this.obj=null,this.type=0,this.options={},this.options.toggles=[{name:"Height",index:1,xAxis:"Height (m)",min_value:"min_ele",max_value:"max_ele"},{name:"Climb Rate",index:2,xAxis:"Climb Rate (m/s)",min_value:"min_cr",max_value:"max_cr"},{name:"Speed",index:3,xAxis:"Speed (m/s)",min_value:"min_speed",max_value:"max_speed"}],this.$container.css({position:"relative"}),this.$container.html("<canvas class='graph_a_canvas' style='height:100%;width:100%' width='1000' height='"+this.height+"'></canvas>"),this.$a_canvas=this.$container.find(".graph_a_canvas"),this.$container.hide(),this.initiated=!0,this.legend={show:!1,position:{x:"right",y:"top"}},this.grid={x:{show:!0,count:20},y:{show:!0,count:10}},this.initiated=!1}function LoadCallback(e){var t=e||[],n=!1;this.trigger=function(){for(var e in n=!0,t)t.hasOwnProperty(e)&&t[e]()},this.push=function(e){n?e():t.push(e)}}function UKNXCL_Map(e,t){this.MAP=1,this.EARTH=2,this.initialised=!1,this.planner=new Planner(this),this.airspace=new Airspace,this.graph=new Graph($("#graph_wrapper")),"undefined"!=typeof google&&(this.internal_map=new google.maps.Map(document.getElementById("map"),{zoom:7,center:new google.maps.LatLng(53,-2),mapTypeId:google.maps.MapTypeId.TERRAIN,streetViewControl:!1})),this._callbacks=t||[],this.push=this.callback=function(e){if(!this.initialised)return this._callbacks=e,!0;"function"==typeof e?e(this):window[e](this)},this.$container=e,this.$body=$("body"),this.$tree=$("#tree_content"),this.mode=this.EARTH,this.ge=null,this.map=null,this.obj=null,this.kmls=[],this.drawRadius=!1,this.timer=0,this.playCycles=10,this.playCount=0,this.comp=null;e=$("#map_interface_3d");e.find("span.show").click(function(){$("body").addClass("interface-visible")}),e.find("span.hide").click(function(){$("body").removeClass("interface-visible")}),this.resize=function(){var e=this.$body.width(),t=this.$body.height();e<920?this.$container.hide():this.$container.show(),this.$container.css({width:e-820}),this.graph.resize(e-820),$("#main_wrapper").css({height:t-35})},this.load_map=function(){map.mode=map.MAP;var e=$("#map").hide();$("#map3d").show().hide(),e.children("p.loading").remove(),e.show().css({display:"block"}),google.maps.event.addListener(this.internal_map,"click",function(e){map.planner.enabled&&(e=e.latLng,map.planner.add_marker(e.lat(),e.lng()))}),google.maps.event.addListener(this.internal_map,"idle",function(e){map.initialised=!0;var t=map._callbacks;map._callbacks=[],t.each(function(e){"function"==typeof e?e(map):window[e](map)})}),this.radiusCircle=new google.maps.Circle({center:new google.maps.LatLng(0,0),radius:0,map:this.internal_map,strokeColor:"#FFFFFF",strokeOpacity:1,zIndex:1}),this.GeoXMLsingle=new geoXML3.Parser({map:this.internal_map,singleInfoWindow:!0,processStyles:!0,afterParse:function(e){var t=e[0].url.split("&id=");t[1].isNumber()&&(map.kmls[t[1]].google_data=e[0],map.kmls[t[1]].is_ready())}}),this.GeoXMLcomp=new geoXML3.Parser({map:this.internal_map,singleInfoWindow:!0,afterParse:function(e){map.comp.google_data=e[0],map.comp.is_ready()}})},this.swap=function(e){this.obj&&this.obj.hide(),e.show(),e.center(),0===e.type&&map.isMap(),this.graph.swap(e),$("#airspace").hide(),this.obj=e},this.move=function(e){null!==this.obj&&(e=parseInt(e,10),this.obj.move_marker(e),this.setTime(e))},this.parseKML=function(e,t){map.caller=t,"undefined"!=typeof google?google.earth.fetchKml(this.ge,"http://"+window.location.hostname+"/"+e,function(e){e||alert("Error loading KML"),map.ge.getFeatures().appendChild(e),e.setVisibility(!0),map.caller.google_data={root:e},map.caller.is_ready(),delete map.caller}):alert("Google map not loaded.")},this.center=function(e){var t;"function"==typeof e.center?e.center():this.isMap()&&(t=new google.maps.LatLngBounds,e.each(function(e){"function"==typeof e.toLatLng?t.union(new google.maps.LatLngBounds(e.toLatLng(),e.toLatLng())):t.union(new google.maps.LatLngBounds(e,e))}),this.internal_map.fitBounds(t))},this.isMap=function(){return this.mode==this.MAP},this.isEarth=function(){return this.mode==this.EARTH},this.load_airspace=function(){return this.isMap()?$.fn.ajax_factory("\\model\\airspace","load_js"):this.parseKML("/resources/airspace.kmz",this.airspace),$(".load_airspace").remove(),$("#tree_content").prepend("<div id=\"airspace_tree\" class='kmltree new'><ul class='kmltree'><li data-path='{\"type\":\"airspace\",\"path\":[]}' class='kmltree-item check KmlFolder visible open all'><div class='expander'></div><div class='toggler'></div>Airspace<ul><li id=\"PROHIBITED\" data-path='{\"type\":\"airspace\",\"path\":[0]}' class='kmltree-item check KmlFolder hideChildren visible'><div class='expander'></div><div class='toggler'></div>Prohibited</li><li id=\"RESTRICTED\" data-path='{\"type\":\"airspace\",\"path\":[1]}' class='kmltree-item check KmlFolder hideChildren visible'><div class='expander'></div><div class='toggler'></div>Restricted</li><li id=\"DANGER\" data-path='{\"type\":\"airspace\",\"path\":[2]}' class='kmltree-item check KmlFolder hideChildren visible'><div class='expander'></div><div class='toggler'></div>Danger</li><li id=\"OTHER\" data-path='{\"type\":\"airspace\",\"path\":[3]}' class='kmltree-item check KmlFolder hideChildren visible'><div class='expander'></div><div class='toggler'></div>Other</li><li id=\"CTRCTA\" data-path='{\"type\":\"airspace\",\"path\":[4]}' class='kmltree-item check KmlFolder hideChildren visible'><div class='expander'></div><div class='toggler'></div>CTR/CTA</li></ul></li></ul></div>"),!1},this.setTime=function(e){var t=e*(this.obj.nxcl_data.xMax-this.obj.nxcl_data.xMin)/this.obj.size(),n=Math.floor(t/3600),e=Math.floor((t-3600*n)/60),t=Math.floor(t-3600*n-60*e);e<10&&(e="0"+e),t<10&&(t="0"+t),$("#Time").html(n+":"+e+":"+t)},this.play=function(){clearTimeout(this.timer),this.playCount=0,this.playCycles=this.obj.size()/100,this.playing()},this.pause=function(){clearTimeout(this.timer)},this.clear=function(){this.kmls.each(function(e){e.setMap(null)})},this.playing=function(){if(!(this.playCount<this.obj.size()-this.playCycles))return this.move(this.obj.size()),void clearTimeout(this.timer);this.move(this.playCount+=this.playCycles),this.timer=setTimeout(function(){map.playing()},100)},this.add_flight_coordinates=function(e,t){this.$tree.find(".track_"+t).remove(),this.$tree.append('<div class="track_'+t+'"><div class="kmltree" data-post=\'{"id":'+t+'}\'><ul class="kmltree"><li data-path=\'{"type":"coordinates","path":[]}\' class="kmltree-item check KmlFolder visible closed open"><div class="tree_title"><div class="toggler"></div>Flight '+t+'<div><ul><li data-path=\'{"type":"flight","path":[0]}\' class="kmltree-item check KmlFolder visible open"></li></ul></div></div>');var i=[],n=e.split(";"),e="od";4==n.length&&n[0]===n[3]?e="tr":3==n.length&&n[0]===n[2]&&(e="or"),n.each(function(e,t){var n=new Coordinate;n.set_from_OS(e),i[t]=new google.maps.LatLng(n.lat(),n.lng())}),this.draw_coordinates(i,t,e)},this.draw_coordinates=function(e,t,n){this.isMap()?(this.mapObject&&this.mapObject.setMap(null),this.kmls[t]=new google.maps.Polyline({path:e,strokeColor:"od"==n?"000000":"or"==n?"FF0000":"00FF00",strokeOpacity:1,strokeWeight:1.4}),this.kmls[t].setMap(this.internal_map),this.center(e)):(this.mapObject||(e=this.parent.ge.createPlacemark(""),this.mapObject=this.parent.ge.createLineString(""),e.setGeometry(this.mapObject),this.mapObject.setTessellate(!0),this.parent.ge.getFeatures().appendChild(e),e.setStyleSelector(this.parent.ge.createStyle("")),e.getStyleSelector().getLineStyle().setColor("FFFFFF")),this.mapObject.getCoordinates().clear(),this.coordinates.each(function(e,t,n){n.mapObject.getCoordinates().pushLatLngAlt(e.lat(),e.lng(),0)}))},this.add_flight=function(e,t,n,i,o){this.$tree.find(".track_"+e).remove(),this.$tree.append('<div class="track_'+e+'"></div>'),void 0===this.kmls[e]||n?(this.kmls[e]=new Track(e,i,o||!1),this.kmls[e].load()):this.swap(map.kmls[e])},this.add_comp=function(e){$("#comp_list").prepend('<div class="loading_shroud">Loading...</div>'),null!==this.comp&&this.comp.remove(),this.$tree.find(".comp_"+e).remove(),this.$tree.append('<div class="comp_'+e+'"></div>'),this.comp=new Comp(e)},this.remove=function(e){this.kmls[e].remove(),this.obj.id===e&&Graph.setGraph(null)},this.load_earth=function(){},this.init_earth=function(){$("#map").hide();$("#map3d").show().css({display:"block"});map.load_map()},this.resize()}function Track(e,t,n){var i=this;this.type=0,this.id=e,this.google_data=null,this.nxcl_data=null,this.loaded=!1,this.visible=!0,this.temp=t?"&temp=true":"",this.split=n?"&split=true":"",this.add_google_data=function(){map.isMap()?map.GeoXMLsingle.parse("?module=\\model\\flight&act=download&type=kml"+this.temp+this.split+"&id="+this.id,null,this.id):map.parseKML("/uploads/flight/"+this.temp+this.id+"/track_earth.kmz",this)},this.center=function(){var e;map.isEarth()&&((e=map.ge.createLookAt("")).setLatitude(this.nxcl_data.bounds.center.lat),e.setLongitude(this.nxcl_data.bounds.center.lon),e.setRange(this.nxcl_data.bounds.range),map.ge.getView().setAbstractView(e))},this.add_nxcl_data=function(t){$.ajax({url:"?module=\\model\\flight&act=get_js&id="+this.id,context:this,cache:!1,type:"POST",dataType:"json",success:function(e){this.nxcl_data=new trackData,this.nxcl_data.loadFromAjax(e),t()}})},this.add_marker=function(){map.isMap()&&(this.marker=new google.maps.Marker({position:new google.maps.LatLng(this.nxcl_data.track[0].coords[0].lat,this.nxcl_data.track[0].coords[0].lng),map:map.internal_map,cursor:this.nxcl_data.track[0].pilot,title:this.nxcl_data.track[0].pilot,icon:"../img/Markers/"+this.nxcl_data.track[0].colour+"-"+(this.nxcl_data.track[0].pilot[0]||"a")+".png"}))},this.is_ready=function(){this.nxcl_data&&this.google_data&&(this.loaded=!0,this.add_marker(),$("#tree_content .track_"+this.id).html("<div class='kmltree' data-post='{\"id\":"+this.id+'}\'>    <ul>        <li data-path=\'{"type":"flight","path":[false]}\' class="kmltree-item check KmlFolder visible open">            <div class=\'kmltree-item-title\'><div class="expander"></div><div class="toggler"></div>Flight: '+this.id+'</div>            <ul>                <li data-path=\'{"type":"flight","path":[0]}\' class="kmltree-item check KmlFolder visible closed">                    <div class="toggler"></div>Flight                </li>                <li data-path=\'{"type":"flight","path":[1]}\' class="kmltree-item check KmlFolder visible open">                    <div class="expander"></div><div class="toggler"></div>Task                    <ul>                        <li data-path=\'{"type":"flight","path":[1,0]}\' class="kmltree-item check KmlFolder visible">                            <div class="toggler"></div>Open Distance                        </li>                        <li data-path=\'{"type":"flight","path":[1,1]}\' class="kmltree-item check KmlFolder visible">                            <div class="toggler"></div>Out & Return                        </li>                        <li data-path=\'{"type":"flight","path":[1,2]}\' class="kmltree-item check KmlFolder visible">                            <div class="toggler"></div>Triangle                        </li>                        <li data-path=\'{"type":"flight","path":[1,3]}\' class="kmltree-item check KmlFolder visible">                            <div class="toggler"></div>Flat Triangle                        </li>                        <li data-path=\'{"type":"flight","path":[1,4]}\' class="kmltree-item check KmlFolder visible">                            <div class="toggler"></div>Defined                        </li>                    </ul>                </li>            </ul>        </li>    </ul></div>'),map.swap(this),$("body").addClass("interface-visible"))},this.show=function(){map.isMap()&&(this.marker.setMap(map.internal_map),this.google_data.gpolylines.each(function(e){e.setMap(map.internal_map)})),this.center(),this.visible=!0,map.graph.setGraph()},this.hide=function(){map.isMap()&&(this.marker.setMap(null),this.google_data.gpolylines.each(function(e){e.setMap(null)}),map.graph.setGraph())},this.remove=function(e){this.hide()},this.get_bounds=function(){return this.google_data.bounds},this.size=function(){return this.nxcl_data.track[0].coords.length-1},this.move_marker=function(e){this.marker.setPosition(new google.maps.LatLng(this.nxcl_data.track[0].coords[e].lat,this.nxcl_data.track[0].coords[e].lng)),map.drawRadius?(map.radiusCircle.setCenter(new google.maps.LatLng(this.nxcl_data.track[0].coords[e].lat,this.nxcl_data.track[0].coords[e].lng)),map.radiusCircle.setRadius(400)):map.radiusCircle.setRadius(0),map.airspace.varyWithTrack&&this.airspace.reload(this.nxcl_data.track[0].coords[e].ele)},this.toggle_track=function(e,t){e++,t?this.google_data.gpolylines[e].setMap(map.internal_map):this.google_data.gpolylines[e].setMap(null)},this.load=function(){this.add_google_data(),this.add_nxcl_data(function(){i.is_ready()})}}function Comp(e){this.type=1,this.id=e,this.google_data=null,this.nxcl_data=new trackData,this.loaded=!1,this.visible=!0,this.marker=[],this.temp="",this.add_google_data=function(){map.isMap()?(map.GeoXMLcomp.parse("?module=\\module\\comps\\object\\comp&act=download&type=kmz"+this.temp+"&id="+this.id,null,this.id),this.google_data=!0,this.is_ready()):map.parseKML("/uploads/comp/"+this.id+"/track_earth.kmz",this)},this.add_nxcl_data=function(){$.ajax({url:"?module=\\module\\comps\\object\\comp&act=get_js&id="+this.id,context:this,cache:!1,async:!0,type:"POST",dataType:"json",success:function(e){this.nxcl_data.loadFromAjax(e),this.is_ready()}})},this.add_marker=function(){map.isMap()&&this.nxcl_data.track.each(function(e,t,n){n.marker[t]=new google.maps.Marker({position:new google.maps.LatLng(e.coords[0].lat,e.coords[0].lng),map:map.internal_map,cursor:e.pilot,title:e.pilot,icon:"../img/Markers/"+e.colour+"-"+e.pilot[0]+".png"})},this)},this.is_ready=function(){this.nxcl_data.loaded&&this.google_data&&(this.loaded=!0,this.add_marker(),$("#WriteHereComp").html((map.isMap(),this.nxcl_data.html)),$("#comp_list .loading_shroud").remove(),map.swap(this))},this.center=function(){var e;map.isEarth()&&((e=map.ge.createLookAt("")).setLatitude(this.nxcl_data.bounds.center.lat),e.setLongitude(this.nxcl_data.bounds.center.lon),e.setRange(this.nxcl_data.bounds.range),map.ge.getView().setAbstractView(e))},this.show=function(){this.nxcl_data.track.each(function(e){e.draw_graph=!0}),this.marker.each(function(e){e.setMap(map.internal_map)}),map.isMap()&&(this.google_data.gpolylines.each(function(e){e.setMap(map.internal_map)}),this.google_data.gpolygons.each(function(e){e.setMap(map.internal_map)}),this.visible=!0,map.graph.setGraph())},this.hide=function(){void 0!==this.nxcl_data.track&&(this.nxcl_data.track.each(function(e){e.draw_graph=!1}),this.marker.each(function(e){e.setMap(null)}),this.google_data.gpolylines.each(function(e){e.setMap(null)}),this.google_data.gpolygons.each(function(e){e.setMap(null)})),this.visible=!1,map.graph.setGraph()},this.remove=function(){this.hide()},this.get_bounds=function(){return this.google_data.bounds},this.size=function(){return this.nxcl_data.track[0].coords.length-1},this.toggle_track=function(e,t){t?(this.marker[e].setMap(map.internal_map),this.google_data.gpolylines[e].setMap(map.internal_map)):(this.marker[e].setMap(null),this.google_data.gpolylines[e].setMap(null)),this.nxcl_data.track[e].draw_graph=t,map.graph.setGraph()},this.move_marker=function(i){this.marker.each(function(e,t,n){e.setPosition(new google.maps.LatLng(n.nxcl_data.track[t].coords[i].lat,n.nxcl_data.track[t].coords[i].lng))},this)},this.add_google_data(),this.add_nxcl_data()}function Coordinate(e,t){this.ele=0,"object"==typeof e?(this.placemark=e,this.lat=function(){return this.placemark.hasOwnProperty("getLatitude")?this.placemark.getLatitude():this.placemark.position.lat()},this.lng=function(){return this.placemark.hasOwnProperty("getLongitude")?this.placemark.getLongitude():this.placemark.position.lng()}):(e=parseFloat(e),t=parseFloat(t),this._lat=e||0,this._lon=t||0,this.lat=function(){return this._lat},this.lng=function(){return this._lon},this.set_lat=function(e){this._lat=e},this.set_lng=function(e){this._lng=e}),this._gridref=null,this.toLatLng=function(){return new google.maps.LatLng(this.lat(),this.lng())},this.set_from_OS=function(e){var t=(this._gridref=e).toUpperCase().charCodeAt(0)-"A".charCodeAt(0),n=e.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);7<t&&t--,7<n&&n--;var i=(t-2)%5*5+n%5,o=19-5*Math.floor(t/5)-Math.floor(n/5);if(i<0||6<i||o<0||12<o)return!1;switch(i+=(e=e.slice(2).replace(/ /g,"")).slice(0,e.length/2),o+=e.slice(e.length/2),e.length){case 0:i+="50000",o+="50000";break;case 2:i+="5000",o+="5000";break;case 4:i+="500",o+="500";break;case 6:i+="50",o+="50";break;case 8:i+="5",o+="5"}var r=i,a=o,s=6377563.396,l=6356256.91,c=.9996012717,d=49*Math.PI/180,h=-2*Math.PI/180,u=1-l*l/(s*s),p=(o=(s-l)/(s+l))*o,f=o*o*o,g=d,m=0;do{m=l*c*((1+o+5/4*p+5/4*f)*((g=(a- -1e5-m)/(s*c)+g)-d)-(3*o+3*o*o+21/8*f)*Math.sin(g-d)*Math.cos(g+d)+(15/8*p+15/8*f)*Math.sin(2*(g-d))*Math.cos(2*(g+d))-35/24*f*Math.sin(3*(g-d))*Math.cos(3*(g+d)))}while(1e-5<=a- -1e5-m);var v=Math.cos(g),y=Math.sin(g),b=s*c/Math.sqrt(1-u*y*y),w=s*c*(1-u)/Math.pow(1-u*y*y,1.5),x=b/w-1,_=Math.tan(g),k=_*_,C=k*k,T=1/v,t=b*b*b,n=t*b*b,e=r-4e5,u=e*e,y=u*e,v=u*u,r=y*u,r=h+T/b*e-T/(6*t)*(b/w+2*k)*y+T/(120*n)*(5+28*k+24*C)*r-T/(5040*(n*b*b))*(61+662*k+1320*C+720*(C*k))*(r*u);this._lat=(g=g-_/(2*w*b)*u+_/(24*w*t)*(5+3*k+x-9*k*x)*v-_/(720*w*n)*(61+90*k+45*C)*(v*u)).toDeg(),this._lon=r.toDeg()},this.gridref=function(){return this._gridref||(this._gridref=this.set_grid_ref()),this._gridref},this.is_valid_gridref=function(){return this._gridref.match(/^(h[l-z]|n[a-hj-z]|s[a-hj-z]|t[abfglmqrvw])[0-9]{6}$/i)},this.set_grid_ref=function(){var e=this.lat().toRad(),t=this.lng().toRad(),n=6377563.396,i=6356256.91,o=.9996012717,r=49..toRad(),a=(-2).toRad(),s=1-i*i/(n*n),l=(g=(n-i)/(n+i))*g,c=g*g*g,d=Math.cos(e),h=Math.sin(e),u=n*o/Math.sqrt(1-s*h*h),p=n*o*(1-s)/Math.pow(1-s*h*h,1.5),f=u/p-1,n=i*o*((1+g+5/4*l+5/4*c)*(e-r)-(3*g+3*g*g+21/8*c)*Math.sin(e-r)*Math.cos(e+r)+(15/8*l+15/8*c)*Math.sin(2*(e-r))*Math.cos(2*(e+r))-35/24*c*Math.sin(3*(e-r))*Math.cos(3*(e+r))),s=d*d*d,i=s*d*d,o=Math.tan(e)*Math.tan(e),l=o*o,c=t-a,r=c*c,e=r*c,t=e*c,a=t*c,g=n-1e5+u/2*h*d*r+u/24*h*s*(5-o+9*f)*t+u/720*h*i*(61-58*o+l)*(a*c);if(NaN==(l=4e5+u*d*c+u/6*s*(u/p-o)*e+u/120*i*(5-18*o+l+14*f-58*o*f)*a)||NaN==g)return"??";o=Math.floor(l/1e5),f=Math.floor(g/1e5);if(o<0||6<o||f<0||12<f)return"";a=19-f-(19-f)%5+Math.floor((o+10)/5),o=5*(19-f)%25+o%5;7<a&&a++,7<o&&o++;o=String.fromCharCode(a+"A".charCodeAt(0),o+"A".charCodeAt(0)),l=Math.floor(l%1e5/Math.pow(10,2));return g=Math.floor(g%1e5/Math.pow(10,2)),o+l.padLz(3)+g.padLz(3)}}function trackData(){this.loaded=!1,this.id=0,this.xMin=0,this.xMax=0,this.od_score=0,this.or_score=0,this.tr_score=0,this.od_time=0,this.or_time=0,this.tr_time=0,this.track=[],this.loadFromAjax=function(e){for(var t in e)e[t]&&(this[t]=e[t]);this.loaded=!0}}function trackData(){this.loaded=!1,this.draw_graph=1,this.pilot=0,this.colour=0,this.max_ele=0,this.min_ele=0,this.max_cr=0,this.min_cr=0,this.max_speed=0,this.total_dist=0,this.av_speed=0,this.coords=[],this.data=[],this.xMin=0,this.EndT=0,this.loadFromAjax=function(e){for(var t in e)"function"!=typeof e[t]&&(this[t]=e[t]);this.loaded=!0}}function yessan(n){var i=map.internal_map.getProjection();n.each(function(e,t){n[t]=i.fromLatLngToPoint(new google.maps.LatLng(e[0],e[1]))});var e,t,o=direction_check(n),r=new google.maps.Point(n[1].x-n[0].x,n[1].y-n[0].y),a=o*Math.atan2(r.y,r.x);map.b=a;for(var s=Math.sqrt(r.x*r.x+r.y*r.y),l=Array(49),c=28;c<44;++c)e=((t=s*(72-c)/28)*t+s*s-(e=s*c/28)*e)/(2*s),t=Math.sqrt(t*t-e*e),l[c-28]=new google.maps.Point(n[0].x+e*Math.cos(a)-t*Math.sin(a),n[0].y+o*(e*Math.sin(a)+t*Math.cos(a)));for(c=28;c<44;++c)e=((t=28*s/c)*t+s*s-(e=s*(72-c)/c)*e)/(2*s),t=Math.sqrt(t*t-e*e),l[16+c-28]=new google.maps.Point(n[0].x+e*Math.cos(a)-t*Math.sin(a),n[0].y+o*(e*Math.sin(a)+t*Math.cos(a)));for(c=44;28<=c;--c)e=((t=s*(72-c)/c)*t+s*s-(e=28*s/c)*e)/(2*s),t=Math.sqrt(t*t-e*e),l[76-c]=new google.maps.Point(n[0].x+e*Math.cos(a)-t*Math.sin(a),n[0].y+o*(e*Math.sin(a)+t*Math.cos(a)));return l.each(function(e,t){l[t]=i.fromPointToLatLng(e)}),map.triangles=l}function direction_check(e){return e.length<3?0:(e=cyclic_loop(e,function(e,t){return new google.maps.Point(e.x-t.x,e.y-t.y)}),(e=loop(e=cyclic_loop(e,function(e,t){return e.x*t.y-e.y*t.x}),function(e,t){return{min:Math.min(e.min,t),max:Math.max(e.max,t)}},{min:e[0],max:e[1]})).max<0?-1:0<e.min?1:0)}function cyclic_loop(e,t){for(var n=e.length,i=Array(n),o=0;o<n;++o)i[o]=t.call(this,e[o],e[(o+1)%n],o,e);return i}function loop(n,i,e){if(n.reduce)return n.reduce(i,e);var o=e;return n.each(function(e,t){o=i.call(k,o,e,t,n)}),o}function Planner(e){this.parent=e||{},this.waypoints=[],this.enabled=!1,this.count=0,this.mapObject=null,this.coordinates=[],this.distance_array=[0],this.total_distance_array=[0],this.R=6371,this.enable=function(){this.enabled=!0,$("body").addClass("waypoint_mode")},this.get_share_link=function(){var t=document.location.host+"/planner/";return this.coordinates.each(function(e){t+=e.lat().toFixed(6)+","+e.lng().toFixed(6)+";"}),t.trim(";")},this.writeplanner=function(){this.calculate_distances();var n="<table class='results main' style='width:100%'><thead><tr><th></th><th>Lat</th><th>Lng</th><th>Distance</th><th></th><th></th></tr></thead>";this.coordinates.each(function(e,t){n+="<tr><td>Turnpoint "+t+"</td><td>Lat:"+Math.round(1e4*e.lat())/1e4+"</td><td>Lng:"+Math.round(1e4*e.lng())/1e4+"</td><td>"+Math.round(1e4*map.planner.distance_array[t])/1e4+"km</td><td>"+Math.round(map.planner.total_distance_array[t]/map.planner.get_total_distance()*1e4)/100+'%</td><td><a class="remove" href="#" onclick="map.planner.remove('+t+'); return false;">[x]</a></td></tr>'}),n+='<tr class="total"><td>Total</td><td/><td/><td>'+Math.floor(1e4*this.get_total_distance())/1e4+"km</td><td/><td></td></tr>",$("#path").html(n+'</table><h4 class="heading">Share this track:</h4><p><pre>'+this.get_share_link()+"</pre></p>");var e=this.get_flight_type();"od"==e?$("#decOD").removeAttr("disabled"):$("#decOD").attr("disabled","disabled"),"or"==e?$("#decOR").removeAttr("disabled"):$("#decOR").attr("disabled","disabled"),"tr"==e?$("#decTR").removeAttr("disabled"):$("#decTR").attr("disabled","disabled");var t=this.get_coordinates();$("#decOR, #decOD, #decTR").each(function(){var e=$(this).data("ajaxpost");e.coordinates=t,$(this).data("ajaxpost",e)}),reload_scrollpane()},this.set_triangle_guides=function(){var e,t,n,i;this.parent.isMap()?this.triangle_guides=[new google.maps.Polygon({clickable:!1,fillColor:"#FF0000",fillOpacity:.25,strokeColor:"#FF0000",strokeWeight:.8}),new google.maps.Polygon({clickable:!1,fillColor:"#FF0000",fillOpacity:.25,strokeColor:"#FF0000",strokeWeight:.8}),new google.maps.Polygon({clickable:!1,fillColor:"#FF0000",fillOpacity:.25,strokeColor:"#FF0000",strokeWeight:.8})]:(this.triangle_guides=Array(3),(e=this.parent.ge.createPlacemark("")).setStyleSelector(this.parent.ge.createStyle("")),n=e.getStyleSelector().getLineStyle(),i=e.getStyleSelector().getPolyStyle(),n.setWidth(2),n.getColor().set("990000ff"),i.getColor().set("330000ff"),i.setFill(1),t=this.parent.ge.createPolygon(""),e.setGeometry(t),n=this.parent.ge.createPolygon(""),e.setGeometry(t),i=this.parent.ge.createPolygon(""),e.setGeometry(t),ge.getFeatures().appendChild(e),this.triangle_guides[0]=t,this.triangle_guides[1]=n,this.triangle_guides[2]=i)},this.get_flight_type=function(){return 4===this.count&&this.is_equal(0,3)?this.min_leg()>.28*this.get_total_distance()?"tr":"ftr":this.is_equal(0,2)?"or":2<=this.count&&this.count<=5?"od":void 0},this.min_leg=function(){var t=this.distance_array[1];return this.distance_array.each(function(e){e<t&&e&&(t=e)}),t},this.get_coordinates=function(){var t=[];return this.coordinates.each(function(e){t.push(e.gridref())}),t.join(";")},this.toGoogleEarth=function(){var t=[];return this.coordinates.each(function(e){t.push(e.toLatLng())}),t},this.draw=function(){this.triangle_guides||this.set_triangle_guides(),this.parent.isMap()?(this.mapObject&&this.mapObject.setMap(null),this.mapObject=new google.maps.Polyline({map:this.parent.internal_map,path:map.planner.toGoogleEarth(),strokeColor:"FF0000",strokeOpacity:1,strokeWeight:3}),google.maps.event.addListener(this.mapObject,"click",function(e){var t=map.planner.getClosestPoint(e.latLng),e=map.planner.add_marker(t.x,t.y);map.planner.add_waypoint(e,t.i-1)})):(this.mapObject||(e=this.parent.ge.createPlacemark(""),this.mapObject=this.parent.ge.createLineString(""),e.setGeometry(this.mapObject),this.mapObject.setTessellate(!0),this.parent.ge.getFeatures().appendChild(e),e.setStyleSelector(this.parent.ge.createStyle("")),(e=e.getStyleSelector().getLineStyle()).getColor().set("AA0000CC"),e.setWidth(4)),this.mapObject.getCoordinates().clear(),this.coordinates.each(function(e,t,n){n.mapObject.getCoordinates().pushLatLngAlt(e.lat(),e.lng(),0)},this));var e=this.get_flight_type();"tr"==e||"ftr"==e?this.draw_triangle_guides():this.hide_triangle_guides()},this.getClosestPoint=function(e){var t,n,i,o;if(1<this.count){for(var r,a=1;a<this.count;a++){r=this.coordinates[a].lat()!=this.coordinates[a-1].lat()?(h=(this.coordinates[a].lng()-this.coordinates[a-1].lng())/(this.coordinates[a].lat()-this.coordinates[a-1].lat()),d=this.coordinates[a].lng()-h*this.coordinates[a].lat(),Math.abs(h*e.lat()+d-e.lng())/Math.sqrt(h*h+1)):Math.abs(e.lat()-this.coordinates[a].lat());var s=Math.pow(this.coordinates[a].lng()-this.coordinates[a-1].lng(),2)+Math.pow(this.coordinates[a].lat()-this.coordinates[a-1].lat(),2),l=Math.pow(this.coordinates[a].lng()-e.lng(),2)+Math.pow(this.coordinates[a].lat()-e.lat(),2),c=Math.pow(this.coordinates[a-1].lng()-e.lng(),2)+Math.pow(this.coordinates[a-1].lat()-e.lat(),2),d=Math.pow(r,2),h=l-d+c-d;s<h&&(r=Math.sqrt(Math.min(l,c))),(null==t||r<t)&&(s<h?c<l?(n=0,i=1):(i=0,n=1):(n=Math.sqrt(c-d)/Math.sqrt(s),i=Math.sqrt(l-d)/Math.sqrt(s)),t=r,o=a)}var u=this.coordinates[o-1].lat()-this.coordinates[o].lat(),p=this.coordinates[o-1].lng()-this.coordinates[o].lng(),u=this.coordinates[o-1].lat()-u*n,p=this.coordinates[o-1].lng()-p*n}return{x:u,y:p,i:o,fTo:n,fFrom:i}},this.hide_triangle_guides=function(){this.parent.isMap()?(this.triangle_guides[0].setMap(null),this.triangle_guides[1].setMap(null),this.triangle_guides[2].setMap(null)):this.triangle_guides[0].setMap(null)},this.draw_triangle_guides=function(){var e,t=[this.coordinates[0].lat(),this.coordinates[0].lng()],n=[this.coordinates[1].lat(),this.coordinates[1].lng()],i=[this.coordinates[2].lat(),this.coordinates[2].lng()];this.parent.isMap()?(this.triangle_guides[0].setPath(yessan([t,n,i])),this.triangle_guides[1].setPath(yessan([n,i,t])),this.triangle_guides[2].setPath(yessan([i,t,n])),this.triangle_guides[0].setMap(this.parent.internal_map),this.triangle_guides[1].setMap(this.parent.internal_map),this.triangle_guides[2].setMap(this.parent.internal_map)):((e=function(e,t){t.getCoordinates().clear();var n=this.parent.ge.createLinearRing("");e.each(function(e){n.getCoordinates().pushLatLngAlt(e.lat(),e.lng(),0)}),t.setOuterBoundary(n)})(yessan([t,n,i]),this.triangle_guides[0]),e(yessan([n,i,t]),this.triangle_guides[1]),e(yessan([i,t,n]),this.triangle_guides[2]))},this.clear=function(){this.waypoints.each(function(e,t,n){n.parent.isMap()?e.setMap(null):n.parent.ge.getFeatures().removeChild(e)},this),this.waypoints=[],this.coordinates=[],this.count=0,this.enabled=!1,$("body").removeClass("waypoint_mode"),this.writeplanner(),this.draw()},this.push=function(e,t){this.coordinates.splice(t,0,e),this.calculate_distances(),this.count++},this.remove=function(n){var i=[];return this.coordinates.each(function(e,t){t!=n&&i.push(e)}),this.coordinates=i,this.calculate_distances(),this.draw(),this.writeplanner(),this.count--,!1},this.calculate_distances=function(){this.distance_array=[0],this.total_distance_array=[0],this.coordinates.each(function(e,t,n){1<=t&&(e=Math.acos(Math.sin(n.coordinates[t-1].lat().toRad())*Math.sin(e.lat().toRad())+Math.cos(n.coordinates[t-1].lat().toRad())*Math.cos(e.lat().toRad())*Math.cos(n.coordinates[t-1].lng().toRad()-e.lng().toRad()))*n.R,n.distance_array.push(e),n.total_distance_array.push(n.total_distance_array[t-1]+e))},this)},this.is_equal=function(e,t){var n=this.coordinates.length;return e<n&&t<n&&Math.abs(this.coordinates[e].lat()-this.coordinates[t].lat())<1e-4&&Math.abs(this.coordinates[e].lng()-this.coordinates[t].lng())<1e-4},this.get_total_distance=function(){return this.total_distance_array[this.total_distance_array.length-1]},this.add_marker=function(e,t,n){var i,o,r;if(this.enabled)return this.parent.isEarth()?((i=this.parent.ge.createPlacemark("")).setName(""),(o=this.parent.ge.createPoint("")).setLatitude(parseFloat(e)),o.setLongitude(parseFloat(t)),i.setGeometry(o),(o=this.parent.ge.createIcon("")).setHref(n||"http://maps.google.com/mapfiles/kml/paddle/red-circle.png"),(n=this.parent.ge.createStyle("")).getIconStyle().setIcon(o),n.getIconStyle().getHotSpot().set(.5,this.parent.ge.UNITS_FRACTION,0,this.parent.ge.UNITS_FRACTION),i.setStyleSelector(n),google.earth.addEventListener(i,"mousedown",function(e){map.dragInfo={placemark:e.getTarget(),dragged:!1}}),google.earth.addEventListener(i,"mousemove",function(e){var t;map.dragInfo&&(e.preventDefault(),(t=map.dragInfo.placemark.getGeometry()).setLatitude(e.getLatitude()),t.setLongitude(e.getLongitude()),map.dragInfo.dragged=!0,map.planner.calculate_distances(),map.planner.writeplanner(),map.planner.draw())}),google.earth.addEventListener(i,"mouseup",function(e){map.dragInfo&&map.dragInfo.dragged?map.dragInfo=null:(map.planner.push(new Coordinate(map.dragInfo.placemark.getGeometry())),map.dragInfo=null,map.event=e),map.planner.writeplanner(),map.planner.draw(),e.preventDefault(),e.stopPropagation()}),this.parent.ge.getFeatures().appendChild(i),map.planner.waypoints.push(i)):((r=new google.maps.Marker({position:new google.maps.LatLng(e,t),map:map.internal_map,draggable:!0})).id=map.planner.waypoints.length,google.maps.event.addListener(r,"click",function(e){map.planner.add_waypoint(r),map.event=e}),google.maps.event.addListener(r,"drag",function(e){map.planner.writeplanner(),map.planner.draw(),map.planner.calculate_distances()}),google.maps.event.addListener(r,"dragend",function(e){map.planner.writeplanner(),map.planner.draw(),map.planner.calculate_distances()}),map.planner.waypoints.push(r)),r},this.add_waypoint=function(e,t){t?(t=t||map.planner.count,++t>=map.planner.count&&(t=map.planner.count-1)):t=map.planner.count,map.planner.push(new Coordinate(e),t),map.planner.writeplanner(),map.planner.draw()},this.load_string=function(e){e&&(this.enable(),e.split("|").each(function(e,i,t){e.split(";").each(function(e,t,n){e=e.split(",");1<e.length&&(e=n.add_marker(e[0],e[1]),0==i&&new google.maps.event.trigger(e,"click"))},t)},this),map.center(this.coordinates))},this.add_point_full=function(e,t){this.enable();t=this.add_marker(e,t);new google.maps.event.trigger(t,"click")}}$(document).ready(function(){$body=$("body"),load_callback.trigger(),map=new UKNXCL_Map($("#map_wrapper"),map),"undefined"!=typeof google?map.load_map():($("#map").children("p.loading").html("Google maps are unavailable"),$("#map_interface_3d span.toggle").hide(),$("#map_interface").hide()),map.resize(),reload_scrollpane(),page_handeler.defaults.complete.push("reload_scrollpane"),$.fn.ajax_factory.defaults.complete.push("center_colorbox"),$body.on("change","input[name=flights]",function(){map.swap(map.kmls[$(this).val()])}),$body.on("click",".kmltree .toggler",function(e){kmlPath=new UKNXCL_Map.KmlPath(e,$(this)),kmlPath.load()&&kmlPath.toggle()}),$body.on("click",".kmltree .expander",function(){var e=$(this).parents("kmltree-item").eq(0);e.hasClass("open")?(e.removeClass("open"),e.find("li").removeClass("open")):(e.addClass("open"),e.find("li").addClass("open"))}),$(document).bind("cbox_complete","center_colorbox")}),window.onresize=function(){throttleTimeout=throttleTimeout||setTimeout(function(){map&&map.resize(),$("#colorbox").width()&&center_colorbox(),reload_scrollpane(),throttleTimeout=null},50)},page_handeler.toggle_page=function(e){var t;2!=e.css("z-index")&&(t=$("#main"),e.css({left:800,top:10,position:"absolute"}),t.stop(!0,!0).animate({left:-800},200,"linear",function(){t.children("div").addClass("remove"),e.show().removeClass("remove"),t.children("div.remove").remove(),t.css({left:0}),e.css({left:0,position:"relative",top:0}),$("a").removeClass("sel").parent("li").removeClass("sel"),$('a[href="'+e.data("url")+'"]').addClass("sel").parent("li").addClass("sel"),t.animate({scrollTo:0}),page_handeler.defaults.complete&&page_handeler.defaults.complete.each(function(e){"function"==typeof e?e():window[e]()})}))},function(a){function i(e,t){this.$element=a(e),this.$input=this.$element.find(":file"),0!==this.$input.length&&(this.name=this.$input.attr("name")||t.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=a('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview"),t=this.$preview.css("height"),"inline"!==this.$preview.css("display")&&"0px"!==t&&"none"!==t&&this.$preview.css("line-height",t),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen())}var n="Microsoft Internet Explorer"==window.navigator.appName;i.prototype.listen=function(){this.$input.on("change.bs.fileinput",a.proxy(this.change,this)),a(this.$input[0].form).on("reset.bs.fileinput",a.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",a.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",a.proxy(this.clear,this))},i.prototype.change=function(e){var n,i,o,r=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;e.stopPropagation(),0!==r.length?(this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name),n=r[0],0<this.$preview.length&&(void 0!==n.type?n.type.match(/^image\/(gif|png|jpeg)$/):n.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader?(e=new FileReader,i=this.$preview,o=this.$element,e.onload=function(e){var t=a("<img>");t[0].src=e.target.result,r[0].result=e.target.result,o.find(".fileinput-filename").text(n.name),"none"!=i.css("max-height")&&t.css("max-height",parseInt(i.css("max-height"),10)-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10)-parseInt(i.css("border-top"),10)-parseInt(i.css("border-bottom"),10)),i.html(t),o.addClass("fileinput-exists").removeClass("fileinput-new"),o.trigger("change.bs.fileinput",r)},e.readAsDataURL(n)):(this.$element.find(".fileinput-filename").text(n.name),this.$preview.text(n.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput"))):this.clear()},i.prototype.clear=function(e){var t;e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),n?(t=this.$input.clone(!0),this.$input.after(t),this.$input.remove(),this.$input=t):this.$input.val(""),this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==e&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},i.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},i.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()};var e=a.fn.fileinput;a.fn.fileinput=function(n){return this.each(function(){var e=a(this),t=e.data("bs.fileinput");t||e.data("bs.fileinput",t=new i(this,n)),"string"==typeof n&&t[n]()})},a.fn.fileinput.Constructor=i,a.fn.fileinput.noConflict=function(){return a.fn.fileinput=e,this},a(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var t=a(this);t.data("bs.fileinput")||(t.fileinput(t.data()),0<(t=a(e.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]')).length&&(e.preventDefault(),t.trigger("click.bs.fileinput")))})}(window.jQuery),$(document).ready(function(){form_coordinates_init(),$.fn.ajax_factory.defaults.complete.push("form_coordinates_init")}),Graph.prototype.add_radios=function(){var i;this.$container.find(".graph_toggles").remove(),this.options.toggles&&(i='<span class="graph_toggles">',this.options.toggles.each(function(e,t,n){i+='<label><input type="radio" name="graph_type" data-type="'+t+'" '+(t==n.type?"checked":"")+"/>"+e.name+"</label>"},this),i+="</span>",this.$container.prepend(i));var e=this;this.$container.find("[name=graph_type]").change(function(){e.changeType($(this).data("type"))})},Graph.prototype.set_subsets=function(e){this.options.toggles=e,this.initiated&&this.add_radios()},Graph.prototype.resize=function(e){this.initiated&&(this.width=e-5,this.$a_canvas[0].width=e,this.setGraph())},Graph.prototype.swap=function(e){this.obj=e,this.setGraph()},Graph.prototype.changeType=function(e){this.type=e,this.setGraph()},Graph.prototype.setGraph=function(){var e,t,n,i,o,r;null!==this.obj?(this.$container.show(),t=e="",void(i=n=0)!==this.options.toggles[this.type]&&(e=this.options.toggles[this.type].xAxis,t=this.options.toggles[this.type].index,n=this.options.toggles[this.type].min_value,i=this.options.toggles[this.type].max_value),o=-1e6,r=1e7,this.obj.nxcl_data.track.each(function(e){e.draw_graph&&(parseFloat(e[i])>o&&(o=parseFloat(e[i])),parseFloat(e[n])<r&&(r=parseFloat(e[n])))}),this.draw_graph(o.roundUp(),r.roundDown(),"#"+this.obj.nxcl_data.track[0].colour,t,e)):this.$container.hide()},Graph.prototype.addLegend=function(t,e){var n;this.$container.find(".legend").remove(),this.legend.show&&(n="",e.track.each(function(e){t=e.colour||t,n+='<span class="legend_entry" style="display: block">'+e.name+'<span class="line" style="display:inline-block; margin-left:10px; width:7px; height:2px; margin-bottom: 5px; background:#'+t+';text-indent:-999px;overflow:hidden">'+t+"</span></span>"}),this.$container.prepend('<div class="legend" style="background-color:#ffffff; padding: 4px; border: 1px solid #EEEEEE; position: absolute;'+this.legend.position.x+":10px;"+this.legend.position.y+':10px;">'+n+"</div>"))},Graph.prototype.draw_graph=function(e,o,r,a,t){if(this.obj&&this.obj.nxcl_data.track.length){this.$container.show(),this.$a_canvas[0].width=this.$a_canvas.width(),this.width=this.$container.width(),this.height=this.$container.height();var s=this.$a_canvas[0].getContext("2d");if(s.fillStyle="rgba(255, 255, 255, 0.7)",s.fillRect(0,0,this.width,this.height),this.grid.x.show)for(var n=0;n<=this.grid.x.count-1;n++){var i=n*this.width/(this.grid.x.count-1);s.moveTo(i,0),s.lineTo(i,this.height)}if(this.grid.y.show)for(var l=0;l<=this.grid.y.count-1;l++){var c=l*this.height/(this.grid.y.count-1);s.moveTo(0,c),s.lineTo(this.width,c)}s.strokeStyle="#DBDBDB",s.stroke();var d=this.obj.nxcl_data;this.addLegend(r,d);var h=this.width/(d.xMax-d.xMin),u=this.height/(e-o);d.track.count&&d.track.each(function(e,t,n){if(e.draw_graph){for(j in s.beginPath(),s.strokeStyle=e.colour?"#"+e.colour:r,e.data){var i=e.data[j];s.lineTo(i[0]*h,n.height-(parseInt(i[a])-o)*u)}s.stroke()}},this),s.font="12px sans-serif",s.fillStyle="#444",s.fillText(e,10,15),s.fillText(o,10,this.height-5),s.fillText(t,10,this.height/2),this.add_radios()}else this.$container.hide()},Number.prototype.roundDown=function(e){e=e||2;var t=Math.floor(Math.log(this)/Math.LN10);if(e<t){var n=this/Math.pow(10,t-e);return(this<0?Math.ceil(n):Math.floor(n))*Math.pow(10,t-e)}return Math.floor(this)},Number.prototype.roundUp=function(e){e=e||2;var t=Math.floor(Math.log(this)/Math.LN10);if(e<t){var n=this/Math.pow(10,t-e);return(0<this?Math.ceil(n):Math.floor(n))*Math.pow(10,t-e)}return Math.ceil(this)},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),geoXML3=window.geoXML3||{instances:[]},geoXML3.Parser=function(e){var l,y=geoXML3.combineOptions(e,{singleInfoWindow:!1,processStyles:!0,zoom:!0}),b=[];void 0===y.suppressInfoWindows&&(y.suppressInfoWindows=!1),!y.infoWindow&&y.singleInfoWindow&&(y.infoWindow=new google.maps.InfoWindow);var w={color:"ff000000",width:1,fill:!0,outline:!0,fillcolor:"3fff0000"};function x(e,t,n){var i=geoXML3.nodeValue;t[n]=t[n]||_(w);var o=e.getElementsByTagName("Icon");return o&&o.length&&0<o.length&&(t[n].href=i(o[0].getElementsByTagName("href")[0]),t[n].scale=i(o[0].getElementsByTagName("scale")[0]),isNaN(t[n].scale)||(t[n].scale=1)),(o=e.getElementsByTagName("LineStyle"))&&o.length&&0<o.length&&(t[n].color=i(o[0].getElementsByTagName("color")[0]),t[n].width=i(o[0].getElementsByTagName("width")[0])),(o=e.getElementsByTagName("PolyStyle"))&&o.length&&0<o.length&&(t[n].outline=r(o[0].getElementsByTagName("outline")[0]),t[n].fill=r(o[0].getElementsByTagName("fill")[0]),t[n].fillcolor=i(o[0].getElementsByTagName("color")[0])),t[n]}function _(e){if(null==e||"object"!=typeof e)return e;var t,n=new e.constructor;for(t in e)n[t]=_(e[t]);return n}function r(e){e=geoXML3.nodeValue(e);return!e||(e=e&&parseInt(e),!!isNaN(e)||0!=e)}function k(e,t){for(var n=e.getElementsByTagName(t),i=[],o=0;o<n.length;o++){var r=n[o].getElementsByTagName("coordinates");if(!r){if(0<i.length)break;return[{coordinates:[]}]}for(var a=0;a<r.length;a++){for(var s=geoXML3.nodeValue(r[a]).trim(),l=(s=s.replace(/,\s+/g,",")).split(/\s+/g),c=l.length,d=[],h=0;h<c;h++)s=l[h].split(","),isNaN(s[0])||isNaN(s[1])||d.push({lat:parseFloat(s[1]),lng:parseFloat(s[0]),alt:parseFloat(s[2])});i.push({coordinates:d})}}return i}function g(e){var t={};return e?(aa=e.substr(0,2),bb=e.substr(2,2),gg=e.substr(4,2),rr=e.substr(6,2),t.color="#"+rr+gg+bb,t.opacity=parseInt(aa,16)/256):(t.color=n(),t.opacity=1),t}function C(e){var t,n,i=new google.maps.Point(0,0);e.href&&(n=/\/(red|blue|green|yellow|lightblue|purple|pink|orange|pause|go|stop)(-dot)?\.png/.test(e.href)?new google.maps.Point(16*e.scale,32*e.scale):new google.maps.Point(16*e.scale,16*e.scale),e.icon=new google.maps.MarkerImage(e.href,new google.maps.Size(32*e.scale,32*e.scale),i,n,new google.maps.Size(32,32)),t=new google.maps.Size(59,32),n=new google.maps.Point(16,32),/\/(red|blue|green|yellow|lightblue|purple|pink|orange)(-dot)?\.png/.test(e.href)?e.shadow=new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png",t,i,n):-1<e.href.indexOf("-pushpin.png")?e.shadow=new google.maps.MarkerImage("http://maps.google.com/mapfiles/ms/micons/pushpin_shadow.png",t,i,n):e.shadow=new google.maps.MarkerImage(e.href.replace(".png",".shadow.png"),t,i,n))}function T(e){for(var t in e.styles)C(e.styles[t])}function j(e,t){var n,i=geoXML3.combineOptions(y.markerOptions,{map:y.map,position:new google.maps.LatLng(e.Point.coordinates[0].lat,e.Point.coordinates[0].lng),title:e.name,zIndex:500,icon:e.style.icon,shadow:e.style.shadow}),o=new google.maps.Marker(i);return t&&t.markers.push(o),y.suppressInfoWindows||(n=geoXML3.combineOptions(y.infoWindowOptions,{content:'<div class="geoxml3_infowindow"><h3>'+e.name+"</h3><div>"+e.description+"</div></div>",pixelOffset:new google.maps.Size(0,2)}),y.infoWindow?o.infoWindow=y.infoWindow:o.infoWindow=new google.maps.InfoWindow(n),google.maps.event.addListener(o,"click",function(){this.infoWindow.close(),o.infoWindow.setOptions(n),this.infoWindow.open(this.map,this)})),e.marker=o}function $(e,t){for(var n=[],i=0;i<e.LineString.length;i++)for(var o=e.LineString[i].coordinates,r=new google.maps.LatLngBounds,a=0;a<o.length;a++){var s=new google.maps.LatLng(o[a].lat,o[a].lng);n.push(s),r.extend(s)}var l,c=n[Math.floor(n.length/2)],d=g(e.style.color),d=geoXML3.combineOptions(y.polylineOptions,{map:y.map,path:n,strokeColor:d.color,strokeWeight:e.style.width,strokeOpacity:d.opacity,title:e.name,zIndex:500}),h=new google.maps.Polyline(d);return h.bounds=r,y.suppressInfoWindows||(l=geoXML3.combineOptions(y.infoWindowOptions,{content:'<div class="geoxml3_infowindow"><h3>'+e.name+"</h3><div>"+e.description+"</div></div>",pixelOffset:new google.maps.Size(0,2)}),y.infoWindow?h.infoWindow=y.infoWindow:h.infoWindow=new google.maps.InfoWindow(l),google.maps.event.addListener(h,"click",function(e){h.infoWindow.close(),h.infoWindow.setOptions(l),e&&e.latLng?h.infoWindow.setPosition(e.latLng):h.infoWindow.setPosition(c),h.infoWindow.open(this.map)})),t&&t.gpolylines.push(h),e.polyline=h}function M(e,t){for(var n=new google.maps.LatLngBounds,i=[],o=0;o<e.Polygon.length;o++){for(var r=0;r<e.Polygon[o].outerBoundaryIs.length;r++){for(var a=e.Polygon[o].outerBoundaryIs[r].coordinates,s=[],l=0;l<a.length;l++){var c=new google.maps.LatLng(a[l].lat,a[l].lng);s.push(c),n.extend(c)}i.push(s),s.length}for(r=0;r<e.Polygon[o].innerBoundaryIs.length;r++){for(a=e.Polygon[o].innerBoundaryIs[r].coordinates,s=[],l=0;l<a.length;l++)c=new google.maps.LatLng(a[l].lat,a[l].lng),s.push(c),n.extend(c);i.push(s),s.length}}var d=g(e.style.color),h=g(e.style.fillcolor);e.style.fill||(h.opacity=0);var u=e.style.width;e.style.outline||(d.opacity=u=0);var p,h=geoXML3.combineOptions(y.polygonOptions,{map:y.map,paths:i,title:e.name,clickable:!1,strokeColor:d.color,strokeWeight:u,strokeOpacity:d.opacity,fillColor:h.color,fillOpacity:.1}),f=new google.maps.Polygon(h);return f.bounds=n,y.suppressInfoWindows||(p=geoXML3.combineOptions(y.infoWindowOptions,{content:'<div class="geoxml3_infowindow"><h3>'+e.name+"</h3><div>"+e.description+"</div></div>",pixelOffset:new google.maps.Size(0,2)}),y.infoWindow?f.infoWindow=y.infoWindow:f.infoWindow=new google.maps.InfoWindow(p),google.maps.event.addListener(f,"click",function(e){f.infoWindow.close(),f.infoWindow.setOptions(p),e&&e.latLng?f.infoWindow.setPosition(e.latLng):f.infoWindow.setPosition(f.bounds.getCenter()),f.infoWindow.open(this.map)})),t&&t.gpolygons.push(f),e.polygon=f}var c=function(e,t){if(e){if(!t)throw"geoXML3 internal error: render called with null document";var n,i,o,r,a,s={};for(t.placemarks=[],t.groundoverlays=[],t.ggroundoverlays=[],t.networkLinks=[],t.gpolygons=[],t.gpolylines=[],t.structure=[],nodes=e.getElementsByTagName("Style"),nodeCount=nodes.length,n=0;n<nodeCount;n++){var l=nodes[n],c=l.getAttribute("id");c&&x(l,s,"#"+c)}for(nodes=e.getElementsByTagName("StyleMap"),n=0;n<nodes.length;n++)(c=(l=nodes[n]).getAttribute("id"))&&function(e,t,n){for(var i=geoXML3.nodeValue,o=e.getElementsByTagName("Pair"),r={},a=0;a<o.length;a++){var s=i(o[a].getElementsByTagName("key")[0]),l=i(o[a].getElementsByTagName("Style")[0]),c=i(o[a].getElementsByTagName("styleUrl")[0]);l?x(l,r[s],n):c&&t[c]&&(r[s]=_(t[c]))}r.normal?t[n]=_(r.normal):t[n]=_(w),r.highlight&&C(r.highlight),t[n].map=_(r)}(l,s,"#"+c);if(t.styles=s,!y.processStyles&&y.createMarker||T(t),t.reload&&t.markers)for(n=0;n<t.markers.length;n++)t.markers[n].active=!1;t.structure=function e(t,n,i){if(t.childElementCount)for(var o=0;o<t.childElementCount;o++){var r=t.children[o];if("Folder"==r.nodeName){var a=e(r,[],i);i=a[1],n.push(a[0])}else if("Placemark"==r.nodeName)n.push(i),i++;else if(i=(a=e(r,[],i))[1],a[0].length)for(var s=0;s<a[0].length;s++)n.push(a[0][s])}return[n,i]}(e,[],0);for(var d=e.getElementsByTagName("Placemark"),h=0;h<d.length;h++){o=d[h],(i={name:geoXML3.nodeValue(o.getElementsByTagName("name")[0]),description:geoXML3.nodeValue(o.getElementsByTagName("description")[0]),styleUrl:geoXML3.nodeValue(o.getElementsByTagName("styleUrl")[0])}).style=t.styles[i.styleUrl]||_(w);var u=o.getElementsByTagName("Style");u&&0<u.length&&(u=x(o,t.styles,"inline"),C(u),u&&(i.style=u)),/^https?:\/\//.test(i.description)&&(i.description=['<a href="',i.description,'">',i.description,"</a>"].join(""));var p=o.getElementsByTagName("coordinates");if(p&&0<p.length)for(var f=0;f<p.length;f++)if(p[f].parentNode&&p[f].parentNode.nodeName)switch(p[f].parentNode.nodeName){case"Point":i.Point=k(o,"Point")[0],i.latlng=new google.maps.LatLng(i.Point.coordinates[0].lat,i.Point.coordinates[0].lng),0;break;case"LinearRing":a=o.getElementsByTagName("Polygon"),i.Polygon||(i.Polygon=[{outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]}]);for(var g=0;g<a.length;g++)i.Polygon[g]={outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]},i.Polygon[g].outerBoundaryIs=k(a[g],"outerBoundaryIs"),i.Polygon[g].innerBoundaryIs=k(a[g],"innerBoundaryIs");i.Polygon[0].outerBoundaryIs;break;case"LineString":i.LineString=k(o,"LineString")}else;if(y.pmParseFn&&y.pmParseFn(o,i),t.placemarks.push(i),i.Point)if(google.maps&&(t.bounds=t.bounds||new google.maps.LatLngBounds,t.bounds.extend(i.latlng)),y.createMarker)y.createMarker(i,t);else{var m=!1;if(t&&(t.markers=t.markers||[],t.reload))for(var v=0;v<t.markers.length;v++)if(t.markers[v].getPosition().equals(i.latlng)){m=t.markers[v].active=!0;break}m||(j(i,t).active=!0)}i.Polygon&&(t&&(t.gpolygons=t.gpolygons||[]),y.createPolygon?r=y.createPolygon(i,t):(r=M(i,t)).active=!0,google.maps&&(t.bounds=t.bounds||new google.maps.LatLngBounds,t.bounds.union(r.bounds))),i.LineString&&(t&&(t.gpolylines=t.gpolylines||[]),y.createPolyline?r=y.createPolyline(i,t):(r=$(i,t)).active=!0,google.maps&&(t.bounds=t.bounds||new google.maps.LatLngBounds,t.bounds.union(r.bounds)))}if(t.reload&&t.markers)for(n=t.markers.length-1;0<=n;n--)t.markers[n].active||(t.markers[n].infoWindow&&t.markers[n].infoWindow.close(),t.markers[n].setMap(null),t.markers.splice(n,1))}else geoXML3.log("Unable to retrieve "+t.url),y.failedParse&&y.failedParse(t);if(t.bounds&&(t.internals.bounds=t.internals.bounds||new google.maps.LatLngBounds,t.internals.bounds.union(t.bounds)),(t.markers||t.groundoverlays||t.gpolylines||t.gpolygons)&&(t.internals.parseOnly=!1),--t.internals.remaining,0===t.internals.remaining&&(y.zoom&&t.internals.bounds&&y.map.fitBounds(t.internals.bounds),y.afterParse&&y.afterParse(t.internals.docSet),!t.internals.parseOnly))for(n=t.internals.docSet.length-1;0<=n;n--)b.push(t.internals.docSet[n])},n=function(){var e="#",t=(8388607*Math.random()).toString(16);return e+=t.substring(0,t.indexOf("."))};return{options:y,docs:b,parse:function(e,t,n){l=l||"geoXML3.instances["+(geoXML3.instances.push(this)-1)+"]";for(var i,o={parser:this,docSet:t||[],remaining:(e="string"==typeof e?[e]:e).length,parseOnly:!(y.afterParse||y.processStyles)},r=0;r<e.length;r++){for(var a=e[r].split("?")[0],s=0;s<b.length;s++)if(a===b[s].baseUrl){(i=b[s]).reload=!0,b.splice(s,1);break}s>=b.length&&((i={}).baseUrl=a),i.url=e[r],(i.internals=o).docSet.push(i),function(e,t,n){geoXML3.fetchXML(e,function(e){c(e,t,n)})}(i.url,i,n)}},hideDocument:function(e){var t;if((e=e||b[0]).markers)for(t=0;t<e.markers.length;t++)e.markers[t].infoWindow&&e.markers[t].infoWindow.close(),e.markers[t].setVisible(!1);if(e.ggroundoverlays)for(t=0;t<e.ggroundoverlays.length;t++)e.ggroundoverlays[t].setOpacity(0);if(e.gpolylines)for(t=0;t<e.gpolylines.length;t++)e.gpolylines[t].setMap(null);if(e.gpolygons)for(t=0;t<e.gpolygons.length;t++)e.gpolygons[t].setMap(null)},showDocument:function(e){var t;if((e=e||b[0]).markers)for(t=0;t<e.markers.length;t++)e.markers[t].setVisible(!0);if(e.ggroundoverlays)for(t=0;t<e.ggroundoverlays.length;t++)e.ggroundoverlays[t].setOpacity(e.ggroundoverlays[t].percentOpacity_);if(e.gpolylines)for(t=0;t<e.gpolylines.length;t++)e.gpolylines[t].setMap(y.map);if(e.gpolygons)for(t=0;t<e.gpolygons.length;t++)e.gpolygons[t].setMap(y.map)},processStyles:T,createMarker:j,createOverlay:function(e,t){if(!window.ProjectedOverlay)throw"geoXML3 error: ProjectedOverlay not found while rendering GroundOverlay from KML";var n=new google.maps.LatLngBounds(new google.maps.LatLng(e.latLonBox.south,e.latLonBox.west),new google.maps.LatLng(e.latLonBox.north,e.latLonBox.east)),i=geoXML3.combineOptions(y.overlayOptions,{percentOpacity:100*e.opacity}),i=new ProjectedOverlay(y.map,e.icon.href,n,i);return t&&(t.ggroundoverlays=t.ggroundoverlays||[],t.ggroundoverlays.push(i)),i},createPolyline:$,createPolygon:M}},geoXML3.getOpacity=function(e){return e&&""!==e&&8==e.length?parseInt(e.substr(0,2),16)/255:1},geoXML3.log=function(e){window.console?console.log(e):alert("log:"+e)},geoXML3.combineOptions=function(e,t){var n={};if(e)for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);if(t)for(i in t)t.hasOwnProperty(i)&&void 0===n[i]&&(n[i]=t[i]);return n},geoXML3.xmlParse=function(e){if("undefined"==typeof ActiveXObject||"undefined"==typeof GetObject)return"undefined"!=typeof DOMParser?(new DOMParser).parseFromString(e,"text/xml"):createElement("div",null);var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t},geoXML3.fetchXML=function(e,t){var n={};window.XMLHttpRequest?n.fetcher=new window.XMLHttpRequest:window.ActiveXObject&&(n.fetcher=new window.ActiveXObject("Microsoft.XMLHTTP")),n.fetcher?(n.fetcher.overrideMimeType&&n.fetcher.overrideMimeType("text/xml"),n.fetcher.open("GET",e,!0),n.fetcher.onreadystatechange=function(){4===n.fetcher.readyState&&(n.xhrtimeout&&clearTimeout(n.xhrtimeout),400<=n.fetcher.status?(geoXML3.log("HTTP error "+n.fetcher.status+" retrieving "+e),t()):t(geoXML3.xmlParse(n.fetcher.responseText)))},n.xhrtimeout=setTimeout(function(){t()},6e4),n.fetcher.send(null)):(geoXML3.log("Unable to create XHR object"),t(null))},geoXML3.nodeValue=function(e){var t="";if(!e)return"";if(3==e.nodeType||4==e.nodeType||2==e.nodeType)t+=e.nodeValue;else if(1==e.nodeType||9==e.nodeType||11==e.nodeType)for(var n=0;n<e.childNodes.length;++n)t+=arguments.callee(e.childNodes[n]);return t},UKNXCL_Map.KmlPath=function(e,t){this.internal_array=[],this.event=e,this.root="",this.kml="",this.root_data=t.parents("div.kmltree").eq(0).data("post"),this.$li=t.parents("li").eq(0),this.data=this.$li.data("path"),this.$parent_li=this.$li.parents("li"),this.push=function(e){this.internal_array.push(e)},this.index=function(e){if(e<0){if(0<=this.internal_array.length+(e-1))return this.internal_array[this.internal_array.length+(e-1)]}else if(this.internal_array.length>=e)return this.internal_array[e];return!1},this.last=function(){return this.internal_array[this.internal_array.length-1]},this.load=function(){return map.isEarth()?this._earth_load():this._map_load()},this.toggle=function(){map.isEarth()?this._earth_toggle():this._map_toggle()},this.recursiveHide=function(e){map.isEarth()?this._earth_recursiveHide(e):this._map_recursiveHide(e)},this.recursiveShow=function(e){map.isEarth()?this._earth_recursiveShow(e):this._map_recursiveShow(e)},this.setVisibility=function(e,t){map.isEarth()?this.index(e).setVisibility(t):t?this._map_recursiveHide(this.index(e)):this._map_recursiveShow(this.index(e))},this._earth_load=function(){return"comp"==this.data.type?(this.root=map.comp,this.push(this.root.google_data.root),this.kml=this.index(0).getFeatures().getChildNodes().item(0)):"flight"==this.data.type?(this.root=map.kmls[this.root_data.id],this.push(this.root.google_data.root),this.kml=this.index(0).getFeatures().getChildNodes().item(0)):(this.root=map.airspace,this.kml=map.airspace.google_data.root),null!==this.data.path&&this.data.path.each(function(e,t,n){e=n.kml.getFeatures().getChildNodes().item(e);n.push(e),n.kml=e},this),!0},this._map_load=function(){if("comp"==this.data.type)this.root=map.comp,this.push(this.root.google_data.structure[0][0]),this.path=this.root.google_data.structure[0][0];else{if("flight"!=this.data.type)return"coordinates"==this.data.type?(this.root=map.kmls[this.root_data.id],this.root.setVisible(!this.root.getVisible()),this.root.getVisible()?this.$li.addClass("visible"):this.$li.removeClass("visible")):(this.root=map.airspace,this.root.toggle(this.data.path[0])),!1;this.root=map.kmls[this.root_data.id],this.push(this.root.google_data.structure[0][0]),this.path=this.root.google_data.structure[0][0]}return null!==this.data.path&&this.data.path.each(function(e,t,n){n.path=n.path[e],n.push(n.path)},this),!0},this._earth_toggle=function(){if(this.$li.hasClass("visible")){if(this.$parent_li.hasClass("radioFolder"))return;(this.$li.hasClass("radioFolder")||this.$li.hasClass("KmlFolder"))&&this.recursiveHide(this.last()),this.$li.removeClass("visible"),this.$li.find("li").removeClass("visible")}else this.$parent_li.hasClass("radioFolder")&&(this.recursiveHide(this.index(-1)),this.setVisibility(-1,!0),this.$parent_li.addClass("visible"),this.$li.siblings("li").removeClass("visible")),this.last().setVisibility(!0),this.$li.addClass("visible"),this.$li.hasClass("radioFolder")?(this.recursiveShow(this.last().getFeatures().getFirstChild()),this.$li.find("li").eq(0).addClass("visible")):(this.$li.find("li").addClass("visible"),this.recursiveShow(this.last()));this.root.center()},this._map_toggle=function(){if(this.$li.hasClass("visible")){if(this.$parent_li.hasClass("radioFolder"))return;(this.$li.hasClass("radioFolder")||this.$li.hasClass("KmlFolder"))&&this.recursiveHide(this.last()),this.$li.removeClass("visible"),this.$li.find("li").removeClass("visible")}else this.$parent_li.hasClass("radioFolder")&&(this.recursiveHide(this.index(-1)),this.setVisibility(-1,!0),this.$parent_li.addClass("visible"),this.$li.siblings("li").removeClass("visible")),this.setVisibility(),this.$li.addClass("visible"),this.$li.hasClass("radioFolder")?(this.recursiveShow(this.last()),this.$li.find("li").eq(0).addClass("visible")):(this.$li.find("li").addClass("visible"),this.recursiveShow(this.last()));this.root.center()},this._earth_recursiveHide=function(e){if("object"==typeof e&&"function"==typeof e.getFeatures){for(var t=e.getFeatures().getChildNodes(),n=t.getLength(),i=0;i<n;i++)this.recursiveHide(t.item(i));e.setVisibility(!1)}},this._map_recursiveHide=function(e){if(void 0===e)this.recursiveHide(this.root.google_data.structure[0][0]);else if("number"==typeof e)void 0!==(t=this.root.google_data.placemarks[e]).polyline&&t.polyline.setMap(null),void 0!==t.polygon&&t.polygon.setMap(null);else for(var t,n=0;n<e.length;n++)"object"==typeof e[n]?this.recursiveHide(e[n]):(void 0!==(t=this.root.google_data.placemarks[e[n]]).polyline&&t.polyline.setMap(null),void 0!==t.polygon&&t.polygon.setMap(null))},this._earth_recursiveShow=function(e){if("object"==typeof e&&"function"==typeof e.getFeatures){for(var t=e.getFeatures().getChildNodes(),n=t.getLength(),i=0;i<n;i++)this.recursiveShow(t.item(i));e.setVisibility(!0)}},this._map_recursiveShow=function(e){if(void 0===e)this.recursiveShow(this.root.google_data.structure[0][0]);else if("number"==typeof e)void 0!==(t=this.root.google_data.placemarks[e]).polyline&&t.polyline.setMap(map.internal_map),void 0!==t.polygon&&t.polygon.setMap(map.internal_map);else for(var t,n=0;n<e.length;n++)"object"==typeof e[n]?this.recursiveShow(e[n]):(void 0!==(t=this.root.google_data.placemarks[e[n]]).polyline&&t.polyline.setMap(map.internal_map),void 0!==t.polygon&&t.polygon.setMap(map.internal_map))}},Number.prototype.toRad=function(){return this*Math.PI/180},Number.prototype.toDeg=function(){return 180*this/Math.PI},Number.prototype.padLz=function(e){for(var t=this.toString(),n=t.length,i=0;i<e-n;i++)t="0"+t;return t},Number.prototype.round=function(e){return Math.floor(this*Math.pow(10,e))/Math.pow(10,e)};